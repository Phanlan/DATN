{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/eway/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\pages\\\\OrganizationCustomer\\\\Create\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\eway\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useCallback, useContext, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { GeneralInformation } from './GeneralInformation';\nimport { ContactInformation } from './ContactInfomation';\nimport { RepresentativeInformation } from './RepresentativeInfomation';\nimport { Steps } from 'primereact/steps';\nimport { Button } from 'primereact/button';\nimport { useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { CustomerService } from '../../../service/CustomerService';\nimport { ToastContext } from '../../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var OrganizationCreateCustomer = function OrganizationCreateCustomer() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      _useTranslation2 = _slicedToArray(_useTranslation, 1),\n      t = _useTranslation2[0];\n\n  var toast = useContext(ToastContext);\n  var customerService = new CustomerService();\n  var history = useHistory();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeIndex = _useState2[0],\n      setActiveIndex = _useState2[1];\n\n  var schema = yup.object().shape({\n    fullName: yup.string().required(t('valid.validFieldRequire')),\n    partyTypeEnumId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    productStoreId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    countryGeoId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    stateProvinceGeoId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    districtId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    wardId: yup.object().nullable().required(t('valid.validFieldRequire')),\n    tarAddress: yup.string().required(t('valid.validFieldRequire')),\n    fullNameRe: yup.string().required(t('valid.validFieldRequire'))\n  });\n  var defaultValues = {\n    partyId: '',\n    fullName: '',\n    taxInformation: '',\n    partyTypeEnumId: {\n      name: 'Organization',\n      code: 'PtyOrganization'\n    },\n    productStoreId: null,\n    description: '',\n    // currencyUomId: null,\n    officeSiteName: '',\n    salesmanId: null,\n    routeId: null,\n    unitId: null,\n    countryGeoId: null,\n    stateProvinceGeoId: null,\n    districtId: null,\n    wardId: null,\n    tarAddress: '',\n    telecomNumber: '',\n    emailAddress: '',\n    latitude: '',\n    longitude: '',\n    fullNameRe: '',\n    telecomNumberRe: '',\n    emailAddressRe: ''\n  };\n\n  var _useForm = useForm({\n    defaultValues: defaultValues,\n    resolver: yupResolver(schema)\n  }),\n      control = _useForm.control,\n      _useForm$formState = _useForm.formState,\n      errors = _useForm$formState.errors,\n      isSubmitting = _useForm$formState.isSubmitting,\n      handleSubmit = _useForm.handleSubmit,\n      setError = _useForm.setError,\n      clearErrors = _useForm.clearErrors,\n      setValue = _useForm.setValue;\n\n  var items = [{\n    label: t('customer.generallInformation')\n  }, {\n    label: t('customer.contactInfomation')\n  }, {\n    label: t('customer.representative')\n  }, {\n    label: t('customer.confirmation')\n  }];\n  var onSubmit = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var _data$countryGeoId, _data$districtId, _data$partyTypeEnumId, _data$productStoreId, _data$stateProvinceGe, _data$wardId, params, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              params = _objectSpread(_objectSpread({}, data), {}, {\n                countryGeoId: (_data$countryGeoId = data.countryGeoId) === null || _data$countryGeoId === void 0 ? void 0 : _data$countryGeoId.code,\n                districtId: (_data$districtId = data.districtId) === null || _data$districtId === void 0 ? void 0 : _data$districtId.code,\n                partyTypeEnumId: (_data$partyTypeEnumId = data.partyTypeEnumId) === null || _data$partyTypeEnumId === void 0 ? void 0 : _data$partyTypeEnumId.code,\n                productStoreId: (_data$productStoreId = data.productStoreId) === null || _data$productStoreId === void 0 ? void 0 : _data$productStoreId.code,\n                stateProvinceGeoId: (_data$stateProvinceGe = data.stateProvinceGeoId) === null || _data$stateProvinceGe === void 0 ? void 0 : _data$stateProvinceGe.code,\n                wardId: (_data$wardId = data.wardId) === null || _data$wardId === void 0 ? void 0 : _data$wardId.code\n              });\n              _context.next = 4;\n              return customerService.createOrganizationCustomer(params);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.partyId) {\n                history.push(\"/sales/organizationcustomer/detail/\" + res.partyId);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: _context.t0.response.data.errors,\n                life: 5000\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), []);\n\n  var validate = function validate(name) {\n    var flag = true;\n\n    try {\n      yup.reach(schema, name).validateSync(control._formValues[name]);\n      clearErrors(name);\n    } catch (error) {\n      setError(name, {\n        type: \"manual\",\n        message: error.message\n      });\n      flag = false;\n    }\n\n    return flag;\n  };\n\n  var next = function next(e) {\n    var flag = true;\n\n    if (activeIndex === 0) {\n      flag = validate('fullName') ? flag : false;\n      flag = validate('partyTypeEnumId') ? flag : false;\n      flag = validate('productStoreId') ? flag : false;\n    }\n\n    if (activeIndex === 1) {\n      flag = validate('countryGeoId') ? flag : false;\n      flag = validate('stateProvinceGeoId') ? flag : false;\n      flag = validate('districtId') ? flag : false;\n      flag = validate('wardId') ? flag : false;\n      flag = validate('tarAddress') ? flag : false;\n    }\n\n    if (activeIndex < 3 && flag) {\n      setActiveIndex(activeIndex + 1);\n    }\n  };\n\n  var previous = function previous(e) {\n    if (activeIndex > 0) {\n      setActiveIndex(activeIndex - 1);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-grid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: t('customer.create')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Steps, {\n          model: items,\n          activeIndex: activeIndex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, _this), activeIndex === 0 && /*#__PURE__*/_jsxDEV(GeneralInformation, {\n          control: control,\n          errors: errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 43\n        }, _this), activeIndex === 1 && /*#__PURE__*/_jsxDEV(ContactInformation, {\n          control: control,\n          errors: errors,\n          setValue: setValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 43\n        }, _this), activeIndex === 2 && /*#__PURE__*/_jsxDEV(RepresentativeInformation, {\n          control: control,\n          errors: errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 43\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-field p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-3\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: activeIndex === 0,\n                  label: t('previous'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: function onClick(e) {\n                    return previous(e);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 37\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-3\",\n                children: [activeIndex < 2 && /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: activeIndex === 2,\n                  label: t('next'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: function onClick(e) {\n                    return next(e);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 57\n                }, _this), activeIndex === 2 && /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: isSubmitting,\n                  label: t('save'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: handleSubmit(onSubmit)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 59\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(OrganizationCreateCustomer, \"9j/M2OivRpcdlMTkHO2R4SkJUv8=\", false, function () {\n  return [useTranslation, useHistory, useForm];\n});\n\n_c = OrganizationCreateCustomer;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrganizationCreateCustomer\");","map":{"version":3,"sources":["D:/eway/src/pages/OrganizationCustomer/Create/index.js"],"names":["React","useCallback","useContext","useState","useTranslation","GeneralInformation","ContactInformation","RepresentativeInformation","Steps","Button","useHistory","useForm","yupResolver","yup","CustomerService","ToastContext","OrganizationCreateCustomer","t","toast","customerService","history","activeIndex","setActiveIndex","schema","object","shape","fullName","string","required","partyTypeEnumId","nullable","productStoreId","countryGeoId","stateProvinceGeoId","districtId","wardId","tarAddress","fullNameRe","defaultValues","partyId","taxInformation","name","code","description","officeSiteName","salesmanId","routeId","unitId","telecomNumber","emailAddress","latitude","longitude","telecomNumberRe","emailAddressRe","resolver","control","formState","errors","isSubmitting","handleSubmit","setError","clearErrors","setValue","items","label","onSubmit","data","params","createOrganizationCustomer","res","push","current","show","severity","summary","detail","response","life","validate","flag","reach","validateSync","_formValues","error","type","message","next","e","previous"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { GeneralInformation } from './GeneralInformation';\r\nimport { ContactInformation } from './ContactInfomation';\r\nimport { RepresentativeInformation } from './RepresentativeInfomation';\r\n\r\nimport { Steps } from 'primereact/steps';\r\nimport { Button } from 'primereact/button';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport { CustomerService } from '../../../service/CustomerService';\r\nimport { ToastContext } from '../../../App';\r\n\r\nexport const OrganizationCreateCustomer = () => {\r\n    const [t] = useTranslation('common');\r\n    const toast = useContext(ToastContext);\r\n    const customerService = new CustomerService();\r\n    const history = useHistory();\r\n\r\n    const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n    const schema = yup.object().shape({\r\n        fullName: yup.string().required(t('valid.validFieldRequire')),\r\n        partyTypeEnumId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n        productStoreId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n\r\n        countryGeoId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n        stateProvinceGeoId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n        districtId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n        wardId: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n        tarAddress: yup.string().required(t('valid.validFieldRequire')),\r\n\r\n        fullNameRe: yup.string().required(t('valid.validFieldRequire')),\r\n    });\r\n\r\n    const defaultValues = {\r\n        partyId: '',\r\n        fullName: '',\r\n        taxInformation: '',\r\n        partyTypeEnumId: {name: 'Organization', code: 'PtyOrganization'},\r\n        productStoreId: null,\r\n        description: '',\r\n\r\n        // currencyUomId: null,\r\n        officeSiteName: '',\r\n        salesmanId: null,\r\n        routeId: null,\r\n        unitId: null,\r\n\r\n        countryGeoId: null,\r\n        stateProvinceGeoId: null,\r\n        districtId: null,\r\n        wardId: null,\r\n        tarAddress: '',\r\n        telecomNumber: '',\r\n        emailAddress: '',\r\n\r\n        latitude: '',\r\n        longitude: '',\r\n\r\n        fullNameRe: '',\r\n        telecomNumberRe: '',\r\n        emailAddressRe: '',\r\n    }\r\n    const { control, formState: { errors, isSubmitting }, handleSubmit, setError, clearErrors, setValue } = useForm({ defaultValues, resolver: yupResolver(schema) });\r\n\r\n    const items = [\r\n        { label: t('customer.generallInformation') },\r\n        { label: t('customer.contactInfomation') },\r\n        { label: t('customer.representative') },\r\n        { label: t('customer.confirmation') }\r\n    ];\r\n\r\n    const onSubmit = useCallback(async (data) => {\r\n        try {\r\n            let params = {\r\n                ...data,\r\n                countryGeoId: data.countryGeoId?.code,\r\n                districtId: data.districtId?.code,\r\n                partyTypeEnumId: data.partyTypeEnumId?.code,\r\n                productStoreId: data.productStoreId?.code,\r\n                stateProvinceGeoId: data.stateProvinceGeoId?.code,\r\n                wardId: data.wardId?.code\r\n            };\r\n            let res = await customerService.createOrganizationCustomer(params);\r\n            if (res.partyId) {\r\n                history.push(\"/sales/organizationcustomer/detail/\" + res.partyId)\r\n            }\r\n        } catch (error) {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: error.response.data.errors, life: 5000 });\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const validate = (name) => {\r\n        let flag = true;\r\n        try {\r\n          yup.reach(schema, name).validateSync(control._formValues[name]);\r\n          clearErrors(name);\r\n        } catch (error) {\r\n          setError(name, {\r\n            type: \"manual\",\r\n            message: error.message,\r\n          });\r\n          flag = false;\r\n        }\r\n    \r\n        return flag;\r\n    }\r\n\r\n    const next = (e) => {\r\n        let flag = true;\r\n\r\n        if (activeIndex === 0) {\r\n            flag = validate('fullName') ? flag : false;\r\n            flag = validate('partyTypeEnumId') ? flag : false;\r\n            flag = validate('productStoreId') ? flag : false;\r\n        }\r\n\r\n        if (activeIndex === 1) {\r\n            flag = validate('countryGeoId') ? flag : false;\r\n            flag = validate('stateProvinceGeoId') ? flag : false;\r\n            flag = validate('districtId') ? flag : false;\r\n            flag = validate('wardId') ? flag : false;\r\n            flag = validate('tarAddress') ? flag : false;\r\n        }\r\n\r\n        if (activeIndex < 3 && flag) {\r\n          setActiveIndex(activeIndex + 1);\r\n        } \r\n    }\r\n    \r\n    const previous = (e) => {\r\n        if (activeIndex > 0) {\r\n            setActiveIndex(activeIndex - 1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-grid\">\r\n            <div className=\"p-col-12\">\r\n                <div className=\"card p-fluid\">\r\n                    <h5>{t('customer.create')}</h5>\r\n                    <Steps model={items} activeIndex={activeIndex} />\r\n\r\n                    {activeIndex === 0 && <GeneralInformation control={control} errors={errors} />}\r\n                    {activeIndex === 1 && <ContactInformation control={control} errors={errors} setValue={setValue}/>}\r\n                    {activeIndex === 2 && <RepresentativeInformation control={control} errors={errors} />}\r\n                    \r\n\r\n                    <div className=\"p-grid\">\r\n                        <div className=\"p-col-12 p-md-6\"></div>\r\n                        <div className=\"p-col-12 p-md-6\">\r\n                            <div className=\"p-field p-grid\">\r\n                                <div className=\"p-col-12 p-md-6\"></div>\r\n                                <div className=\"p-col-12 p-md-3\">\r\n                                    <Button disabled={activeIndex === 0} label={t('previous')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={(e) => previous(e)} />\r\n                                </div>\r\n                                <div className=\"p-col-12 p-md-3\">\r\n                                    {activeIndex < 2 && <Button disabled={activeIndex === 2} label={t('next')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={(e) => next(e)} />}\r\n\r\n                                    {activeIndex === 2 && <Button disabled={isSubmitting} label={t('save')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={handleSubmit(onSubmit)} />}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}