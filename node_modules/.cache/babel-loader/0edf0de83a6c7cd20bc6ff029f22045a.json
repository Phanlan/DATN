{"ast":null,"code":"import _asyncToGenerator from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\SalesDashboard\\\\StoreValueBarChart.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\\\u0110A\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from 'primereact/button';\nimport { BarChart } from '../../components/Report';\nimport { SalesReportService } from '../../service/SalesReportService';\nimport { DialogDate } from './Dialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var StoreValueBarChart = function StoreValueBarChart(props) {\n  _s();\n\n  var options = props.options,\n      cycles = props.cycles,\n      height = props.height;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      display = _useState4[0],\n      setDisplay = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      option = _useState6[0],\n      setOption = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cycle = _useState8[0],\n      setCycle = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fromDate = _useState10[0],\n      setFromDate = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      toDate = _useState12[0],\n      setToDate = _useState12[1];\n\n  var _useTranslation = useTranslation('common'),\n      _useTranslation2 = _slicedToArray(_useTranslation, 1),\n      t = _useTranslation2[0];\n\n  var init = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var endDate, startDate, salesReportService, params, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setOption({\n              name: t('report.option'),\n              code: 'option'\n            });\n            setCycle({\n              name: t('report.week'),\n              code: 'week'\n            });\n            endDate = new Date();\n            startDate = new Date(endDate.getFullYear(), endDate.getMonth(), 1);\n            setToDate(endDate);\n            setFromDate(startDate);\n            salesReportService = new SalesReportService();\n            params = {\n              startDate: startDate.toISOString().slice(0, 10),\n              endDate: endDate.toISOString().slice(0, 10),\n              dateType: 'week'\n            };\n            _context.next = 10;\n            return salesReportService.olapChartColTorProdStoreMini(params);\n\n          case 10:\n            res = _context.sent;\n            res.datasets[0].label = t('report.salesValue');\n            setData(res); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  useEffect(function () {\n    init(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var search = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var salesReportService, params, res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            salesReportService = new SalesReportService();\n            params = {\n              startDate: fromDate.toISOString().slice(0, 10),\n              endDate: toDate.toISOString().slice(0, 10),\n              dateType: cycle.code\n            };\n            _context2.next = 4;\n            return salesReportService.olapChartColTorProdStoreMini(params);\n\n          case 4:\n            res = _context2.sent;\n            res.datasets[0].label = t('report.salesValue');\n            setData(res);\n            setDisplay(false);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [fromDate, toDate, cycle, t]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card height-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: t('report.olapChartColTorProdStoreMini')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          icon: \"pi pi-cog\",\n          onClick: function onClick() {\n            return setDisplay(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(BarChart, {\n        data: data,\n        height: height\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(DialogDate, {\n      cycles: cycles,\n      search: search,\n      options: options,\n      display: display,\n      setDisplay: setDisplay,\n      option: option,\n      setOption: setOption,\n      cycle: cycle,\n      setCycle: setCycle,\n      fromDate: fromDate,\n      setFromDate: setFromDate,\n      toDate: toDate,\n      setToDate: setToDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(StoreValueBarChart, \"q5I5t0BCxdQ9TqrJWel0SYxMfoo=\", false, function () {\n  return [useTranslation];\n});\n\n_c = StoreValueBarChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreValueBarChart\");","map":{"version":3,"sources":["D:/ƒêA/src/pages/SalesDashboard/StoreValueBarChart.js"],"names":["React","useCallback","useEffect","useState","useTranslation","Button","BarChart","SalesReportService","DialogDate","StoreValueBarChart","props","options","cycles","height","data","setData","display","setDisplay","option","setOption","cycle","setCycle","fromDate","setFromDate","toDate","setToDate","t","init","name","code","endDate","Date","startDate","getFullYear","getMonth","salesReportService","params","toISOString","slice","dateType","olapChartColTorProdStoreMini","res","datasets","label","search"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { Button } from 'primereact/button';\r\n\r\nimport { BarChart } from '../../components/Report';\r\n\r\nimport { SalesReportService } from '../../service/SalesReportService';\r\n\r\nimport { DialogDate } from './Dialog';\r\n\r\nexport const StoreValueBarChart = (props) => {\r\n    const { options, cycles, height } = props;\r\n\r\n    const [data, setData ] = useState({});\r\n    const [display, setDisplay] = useState(false);\r\n\r\n    const [option, setOption] = useState();\r\n    const [cycle, setCycle] = useState({});\r\n    const [fromDate, setFromDate] = useState(null);\r\n    const [toDate, setToDate] = useState(null);\r\n\r\n    const [ t ] = useTranslation('common');\r\n\r\n    const init = useCallback(async () => {\r\n\r\n        setOption({ name: t('report.option'), code: 'option' });\r\n        setCycle({ name: t('report.week'), code: 'week' });\r\n\r\n        let endDate = new Date();\r\n        let startDate = new Date(endDate.getFullYear(), endDate.getMonth(), 1);\r\n        setToDate(endDate);\r\n        setFromDate(startDate);\r\n\r\n        const salesReportService = new SalesReportService();\r\n\r\n        let params = {\r\n            startDate: startDate.toISOString().slice(0,10), \r\n            endDate: endDate.toISOString().slice(0,10),\r\n            dateType: 'week'\r\n        }\r\n        let res = await salesReportService.olapChartColTorProdStoreMini(params);\r\n        res.datasets[0].label = t('report.salesValue');\r\n        setData(res);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        init();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const search = useCallback(async () => {\r\n        const salesReportService = new SalesReportService();\r\n\r\n        let params = {\r\n            startDate: fromDate.toISOString().slice(0,10), \r\n            endDate: toDate.toISOString().slice(0,10),\r\n            dateType: cycle.code,\r\n        }\r\n        let res = await salesReportService.olapChartColTorProdStoreMini(params);\r\n        res.datasets[0].label = t('report.salesValue');\r\n        setData(res);\r\n        setDisplay(false);\r\n    }, [fromDate, toDate, cycle, t]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card height-100\">\r\n                <div className=\"card-header\">\r\n                    <h5>{t('report.olapChartColTorProdStoreMini')}</h5>\r\n                    <Button icon=\"pi pi-cog\" onClick={() => setDisplay(true)} />\r\n                </div>\r\n                <BarChart data={data} height={height} />\r\n            </div>\r\n\r\n            <DialogDate\r\n                cycles={cycles} \r\n                search={search} options={options} \r\n                display={display} setDisplay={setDisplay} \r\n                \r\n                option={option} setOption={setOption} \r\n                cycle={cycle} setCycle={setCycle} \r\n                fromDate={fromDate} setFromDate={setFromDate} \r\n                toDate={toDate} setToDate={setToDate} \r\n                \r\n            />\r\n        </>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}