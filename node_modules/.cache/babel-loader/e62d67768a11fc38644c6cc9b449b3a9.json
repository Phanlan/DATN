{"ast":null,"code":"import _asyncToGenerator from \"D:/eway/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\pages\\\\POS.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\eway\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useState, useRef, useContext, useEffect, useCallback } from 'react';\nimport { InputText } from 'primereact/inputtext';\nimport { Button } from 'primereact/button';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Dialog } from 'primereact/dialog';\nimport { POSSearchProductForm } from '../components/POSSearchProductForm';\nimport { POSSearchCustomerForm } from '../components/POSSearchCustomerForm';\nimport { POSService } from '../service/POSService';\nimport { CommonService } from '../service/CommonService';\nimport { UserProfileContext } from '../App';\nimport { ToastContext } from \"../App\";\nimport { useTranslation } from 'react-i18next';\nimport { FormPrint } from '../components/ComponentPrint/FormPrint';\nimport { FormPrint2 } from '../components/ComponentPrint/FormPrint2';\nimport { useReactToPrint } from 'react-to-print';\nimport { sum } from 'lodash';\nimport { InputNumber } from 'primereact/inputnumber';\nimport { ListPromotion } from '../components/POSComponent/ListPromotion';\nimport { SalesOrderHistory } from '../components/POSComponent/SalesOrderHistory';\nimport { Loading } from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var POS = function POS() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var userProfile = useContext(UserProfileContext);\n  var toast = useContext(ToastContext);\n  var commonService = new CommonService();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      productStores = _useState2[0],\n      setProductStores = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentProductStore = _useState4[0],\n      setCurrentProductStore = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      orderId = _useState6[0],\n      setOrderId = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      orderItems = _useState8[0],\n      setOrderItems = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      orderHeader = _useState10[0],\n      setOrderHeader = _useState10[1];\n\n  var _useState11 = useState({\n    partyId: '_NA_'\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      customerInfo = _useState12[0],\n      setCustomerInfo = _useState12[1]; //const [paymentTypeOptions, setPaymentTypeOptions] = useState([]);\n  //const [selectedPaymentType, setSelectedPaymentType] = useState(null)\n\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      paymentInstrumentOptions = _useState14[0],\n      setPaymentInstrumentOptions = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selectedPaymentInstrument = _useState16[0],\n      setSelectedPaymentInstrument = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      paymentAmount = _useState18[0],\n      setPaymentAmount = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      paymentDisplay = _useState20[0],\n      setPaymentDisplay = _useState20[1];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      heldOrderDisplay = _useState22[0],\n      setHeldOrderDisplay = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      heldOrderList = _useState24[0],\n      setHeldOrderList = _useState24[1];\n\n  var _useState25 = useState(0),\n      _useState26 = _slicedToArray(_useState25, 2),\n      quantity = _useState26[0],\n      setQuantity = _useState26[1];\n\n  var _useState27 = useState(null),\n      _useState28 = _slicedToArray(_useState27, 2),\n      selectedProduct = _useState28[0],\n      setSelectedProduct = _useState28[1];\n\n  var _useState29 = useState(0),\n      _useState30 = _slicedToArray(_useState29, 2),\n      moneyBack = _useState30[0],\n      setMoneyBack = _useState30[1];\n\n  var _useState31 = useState(false),\n      _useState32 = _slicedToArray(_useState31, 2),\n      displayDeleteItem = _useState32[0],\n      setDisplayDeleteItem = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      displayListPromotion = _useState34[0],\n      setDisplayListPromotion = _useState34[1];\n\n  var _useState35 = useState(false),\n      _useState36 = _slicedToArray(_useState35, 2),\n      loading = _useState36[0],\n      setLoading = _useState36[1];\n\n  var _useState37 = useState(false),\n      _useState38 = _slicedToArray(_useState37, 2),\n      displaySalesOrderHistory = _useState38[0],\n      setDisplaySalesOrderHistory = _useState38[1];\n\n  var refInput = useRef();\n  var refInputProduct = useRef();\n  var refInputCustomer = useRef();\n  var printRef = useRef();\n  var print2Ref = useRef();\n  var totalAmount = sum(orderItems === null || orderItems === void 0 ? void 0 : orderItems.map(function (elm) {\n    return elm.unitAmount * elm.quantity;\n  }));\n  var posService = new POSService();\n  useEffect(function () {\n    // setLoading(true);\n    commonService.getProductStores(userProfile.info.partyId).then(function (data) {\n      setProductStores(data.productStoreList);\n\n      if (data.productStoreList[0]) {\n        setCurrentProductStore(data.productStoreList[0]);\n        getTentativeOrderIfAny(customerInfo.partyId, data.productStoreList[0].productStoreId);\n      }\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n    posService.getPaymentInstrumentOptions().then(function (data) {\n      setPaymentInstrumentOptions(data.paymentInstrumentOptions);\n      setSelectedPaymentInstrument(data.paymentInstrumentOptions.find(function (ele) {\n        return ele.enumId === 'PiCash';\n      }));\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n    document.title = t('title.pos');\n    return function () {\n      document.title = t('title.homepage');\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var escFunction = useCallback(function (event) {\n    if (event.keyCode === 112) {\n      //F1\n      event.preventDefault();\n      refInputProduct.current.focus();\n    }\n\n    if (event.keyCode === 113) {\n      //F2\n      event.preventDefault();\n      refInputCustomer.current.focus();\n    }\n\n    if (event.keyCode === 116) {\n      //F5\n      event.preventDefault();\n      holdOrder();\n    }\n\n    if (event.keyCode === 114) {\n      //F3\n      event.preventDefault();\n      setPaymentDisplay(true);\n    }\n\n    if (event.keyCode === 117) {\n      //F6\n      event.preventDefault();\n    }\n\n    if (event.keyCode === 118) {\n      //F7\n      event.preventDefault();\n      getHeldOrderList();\n      setHeldOrderDisplay(true);\n    }\n\n    if (event.keyCode === 199) {\n      //F8\n      //   setDisplayDeleteOrder(true);\n      event.preventDefault();\n    }\n\n    if (event.keyCode === 120) {\n      //F9\n      event.preventDefault();\n    }\n\n    if (event.keyCode === 121) {\n      //F10\n      event.preventDefault();\n      cancelOrder();\n    }\n\n    if (event.keyCode === 187) {\n      // +\n      event.preventDefault();\n      addOrderItem(selectedProduct.productId, 1);\n      setQuantity(quantity + 1);\n    }\n\n    if (event.keyCode === 189) {\n      // -\n      event.preventDefault();\n      reduceOrderItem();\n    }\n\n    if (event.ctrlKey && event.keyCode === 76) {\n      // Ctrl + L\n      event.preventDefault();\n      setDisplayListPromotion(true);\n    }\n\n    if (event.ctrlKey && event.keyCode === 72) {\n      // Ctrl + H\n      event.preventDefault();\n      setDisplaySalesOrderHistory(true);\n    }\n\n    if (event.shiftKey && event.keyCode === 46) {\n      // shift delete\n      event.preventDefault();\n      setDisplayDeleteItem(true);\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [selectedProduct, orderItems]);\n  useEffect(function () {\n    document.addEventListener('keydown', escFunction, false);\n    return function () {\n      document.removeEventListener('keydown', escFunction, false);\n    };\n  }, [escFunction]);\n\n  var getHeldOrderList = function getHeldOrderList() {\n    setLoading(true);\n    posService.getHeldOrderList().then(function (data) {\n      setHeldOrderList(data.heldOrderList);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var getOrderItemList = function getOrderItemList(orderId) {\n    posService.getOrderItemList(orderId).then(function (data) {\n      setOrderItems(data.orderItemList);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n  };\n\n  var getOrderHeader = function getOrderHeader(orderId) {\n    posService.getOrderHeader(orderId).then(function (data) {\n      setOrderHeader(data.orderHeader);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n  };\n\n  var getCustomerInfo = function getCustomerInfo(orderId) {\n    posService.getCustomerInfo({\n      orderId: orderId\n    }).then(function (data) {\n      setCustomerInfo(data.customerInfo);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n  };\n\n  var getTentativeOrderIfAny = function getTentativeOrderIfAny(customerPartyId, productStoreId) {\n    posService.getTentativeOrderIfAny(customerPartyId, productStoreId).then(function (data3) {\n      if (data3.orderId) {\n        setOrderId(data3.orderId);\n        getOrderHeader(data3.orderId);\n        getOrderItemList(data3.orderId);\n        getCustomerInfo(data3.orderId);\n      }\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n  };\n\n  var addOrderPartPayment = function addOrderPartPayment() {\n    setLoading(true);\n    posService.addOrderPartPayment(orderId, selectedPaymentInstrument.enumId, paymentAmount).then(function (data) {\n      if (data.paymentId) {\n        posService.completeOrder(orderId, data.paymentId).then(function (data) {\n          if (data.orderCompleted === 'true') {\n            toast.current.show({\n              severity: 'info',\n              summary: t('successMessage'),\n              detail: \"Order completed !\",\n              life: 3000\n            });\n          }\n\n          clearState();\n        }).catch(function (err) {\n          toast.current.show({\n            severity: 'error',\n            summary: t('errorMessage'),\n            detail: err.response.data.errors,\n            life: 5000\n          });\n        }).finally(function () {\n          setLoading(false);\n        });\n      }\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    });\n    setPaymentDisplay(false);\n  };\n\n  var clearState = function clearState() {\n    setOrderHeader(null);\n    setOrderId(null);\n    setOrderItems([]);\n    setCustomerInfo({\n      partyId: '_NA_'\n    });\n  };\n\n  var addOrderItem = function addOrderItem(productId, quantity) {\n    setLoading(true);\n    posService.addOrderItem(currentProductStore.productStoreId, customerInfo.partyId, orderId, productId, quantity).then(function (data) {\n      if (orderId == null) {\n        setOrderId(data.orderId);\n      }\n\n      getOrderHeader(data.orderId);\n      getOrderItemList(data.orderId);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var reduceOrderItem = function reduceOrderItem() {\n    orderItems.forEach(function (elm) {\n      if (elm.productId === selectedProduct.productId) {\n        updateQuantityProduct(elm.quantity - 1);\n      }\n    });\n  };\n\n  var updateQuantityProduct = function updateQuantityProduct(quantity) {\n    setLoading(true);\n    posService.updateOrderItem(orderId, selectedProduct.orderItemSeqId, quantity).then(function (data) {\n      getOrderHeader(orderId);\n      getOrderItemList(orderId);\n      setQuantity(quantity);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var handleDeleteOrderItem = function handleDeleteOrderItem(item) {\n    setLoading(true);\n    posService.deleteOrderItem(item.orderItemSeqId, orderId, item.orderPartSeqId).then(function (data) {\n      setDisplayDeleteItem(false);\n      getOrderHeader(orderId);\n      getOrderItemList(orderId);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var holdOrder = function holdOrder() {\n    setLoading(true);\n    posService.holdOrder(orderId).then(function (data) {\n      if (data.heldOrder === 'true') {\n        clearState();\n        toast.current.show({\n          severity: 'info',\n          summary: t('successMessage'),\n          detail: \"Order Held !\",\n          life: 3000\n        });\n      }\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var reopenOrder = function reopenOrder(orderId) {\n    setLoading(true);\n    setHeldOrderDisplay(false);\n    setOrderId(orderId);\n    posService.reopenOrder(orderId).then(function (data) {\n      setOrderHeader(data.orderHeader);\n      setCustomerInfo(data.customerInfo);\n      setOrderItems(data.orderItemList);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var cancelOrder = function cancelOrder() {\n    setLoading(true);\n    posService.cancelOrder(orderId).then(function (data) {\n      if (data.cancelledOrder === 'true') {\n        toast.current.show({\n          severity: 'info',\n          summary: t('successMessage'),\n          detail: \"Order Cancelled !\",\n          life: 3000\n        });\n      }\n\n      clearState();\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: t('errorMessage'),\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var inputPaymentAmount = function inputPaymentAmount(e) {\n    setPaymentAmount(e.value);\n    setMoneyBack(e.value - totalAmount < 0 ? 0 : e.value - totalAmount);\n  };\n\n  var changeQuantityInput = function changeQuantityInput(e) {\n    if (e.keyCode === 13) {\n      updateQuantityProduct(quantity);\n    }\n  };\n\n  var selectTableRow = function selectTableRow(e) {\n    setSelectedProduct(e.data);\n    setQuantity(e.data.quantity);\n  };\n\n  var handlePrint = useReactToPrint({\n    content: function content() {\n      return printRef.current;\n    }\n  }); // const handlePrint2 = useReactToPrint({\n  //   content: () => print2Ref.current,\n  // });\n\n  var updateOrderCustomerPartyId = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(partyId) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return posService.updateOrderCustomerPartyId(orderId, partyId);\n\n            case 3:\n              data = _context.sent;\n              setOrderId(data.orderId);\n              getOrderHeader(data.orderId);\n              getOrderItemList(data.orderId);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateOrderCustomerPartyId(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var colSeqBodyTemplate = function colSeqBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, _this), rowData.orderItemSeqId]\n    }, void 0, true);\n  };\n\n  var colIdBodyTemplate = function colIdBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, _this), rowData.productId]\n    }, void 0, true);\n  };\n\n  var colDescBodyTemplate = function colDescBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, _this), rowData.itemDescription]\n    }, void 0, true);\n  };\n\n  var colQtyBodyTemplate = function colQtyBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, _this), rowData.quantity]\n    }, void 0, true);\n  };\n\n  var colTotalBodyTemplate = function colTotalBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, _this), rowData.unitAmount]\n    }, void 0, true);\n  };\n\n  var colStoreBodyTemplate = function colStoreBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, _this), rowData.productStoreId]\n    }, void 0, true);\n  };\n\n  var colOrderIdBodyTemplate = function colOrderIdBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, _this), rowData.orderId]\n    }, void 0, true);\n  };\n\n  var colOrderGrandTotalBodyTemplate = function colOrderGrandTotalBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, _this), rowData.grandTotal]\n    }, void 0, true);\n  };\n\n  var colOrderEntryBodyTemplate = function colOrderEntryBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: rowData.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, _this), rowData.entryDate]\n    }, void 0, true);\n  };\n\n  var dialogDeleteFooter = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: \"No\",\n      icon: \"pi pi-times\",\n      onClick: function onClick() {\n        return setDisplayDeleteItem(false);\n      },\n      className: \"p-button-text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: \"Yes\",\n      icon: \"pi pi-check\",\n      onClick: function onClick() {\n        return handleDeleteOrderItem(selectedProduct);\n      },\n      className: \"p-button-text\",\n      autoFocus: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n\n  var actionBodyTemplate = function actionBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"actions\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        icon: \"pi pi-plus\",\n        className: \"p-button-rounded p-button-success p-mr-2\",\n        onClick: function onClick() {\n          return addOrderItem(rowData.productId, 1);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"pi pi-trash\",\n        className: \"p-button-rounded p-button-warning\",\n        onClick: function onClick() {\n          setSelectedProduct(rowData);\n          setDisplayDeleteItem(true);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var heldOrderActionBodyTemplate = function heldOrderActionBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"actions\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"pi pi-lock-open\",\n        className: \"p-button-rounded p-button-success p-mr-2\",\n        onClick: function onClick() {\n          return reopenOrder(rowData.orderId);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var paymentFooter = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: t('printInvoice'),\n      onClick: handlePrint\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: t('paid'),\n      onClick: function onClick() {\n        return addOrderPartPayment();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: t('cancel'),\n      onClick: function onClick() {\n        return setPaymentDisplay(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n\n  var heldOrderFooter = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      label: \"Cancel\",\n      onClick: function onClick() {\n        return setHeldOrderDisplay(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-grid\",\n    children: [/*#__PURE__*/_jsxDEV(Dialog, {\n      header: t('pos.payment'),\n      visible: paymentDisplay,\n      style: {\n        width: '50vw'\n      },\n      modal: true,\n      footer: paymentFooter,\n      onHide: function onHide() {\n        return setPaymentDisplay(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-4 p-md-4 p-mb-md-0\",\n            children: t('pos.paymentInstrument')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-8\",\n            children: /*#__PURE__*/_jsxDEV(Dropdown, {\n              id: \"enumId\",\n              value: selectedPaymentInstrument,\n              onChange: function onChange(e) {\n                return setSelectedPaymentInstrument(e.value);\n              },\n              options: paymentInstrumentOptions,\n              optionLabel: \"description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-4 p-md-4 p-mb-md-0\",\n            children: t('pos.amount')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-8\",\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              value: paymentAmount,\n              onChange: inputPaymentAmount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-4 p-md-4 p-mb-md-0\",\n            children: t('pos.backAmount')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-8\",\n            children: /*#__PURE__*/_jsxDEV(InputText, {\n              disabled: true,\n              id: \"moneyBack\",\n              type: \"text\",\n              value: moneyBack\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Dialog, {\n      header: \"On Hold\",\n      visible: heldOrderDisplay,\n      style: {\n        width: '50vw'\n      },\n      modal: true,\n      footer: heldOrderFooter,\n      onHide: function onHide() {\n        return setHeldOrderDisplay(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(DataTable, {\n        value: heldOrderList,\n        dataKey: \"orderId\",\n        className: \"datatable-responsive\",\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          field: \"productStoreId\",\n          header: \"Store\",\n          body: colStoreBodyTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"orderId\",\n          header: \"Order\",\n          body: colOrderIdBodyTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"grandTotal\",\n          header: \"Total\",\n          body: colOrderGrandTotalBodyTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"entryDate\",\n          header: \"Entry Date\",\n          body: colOrderEntryBodyTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          body: heldOrderActionBodyTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12 p-md-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-mb-12 p-md-12\",\n            children: /*#__PURE__*/_jsxDEV(POSSearchProductForm, {\n              inputRef: refInputProduct,\n              addOrderItem: addOrderItem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-fluid p-col-12 p-mb-12 p-md-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.itemDescription) || t('pos.productName')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-field p-grid\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"quantity\",\n                    className: \"p-col-12 p-mb-2 p-md-2 p-mb-md-0\",\n                    children: t('pos.quantity')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 626,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-col-12 p-md-10\",\n                    children: /*#__PURE__*/_jsxDEV(InputText, {\n                      ref: refInput,\n                      id: \"quantity\",\n                      value: quantity,\n                      onChange: function onChange(e) {\n                        return setQuantity(e.target.value);\n                      },\n                      onKeyUp: function onKeyUp(e) {\n                        return changeQuantityInput(e);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 630,\n                      columnNumber: 23\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 629,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-field p-grid\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"unitPrice\",\n                    className: \"p-col-12 p-mb-2 p-md-2 p-mb-md-0\",\n                    children: t('pos.unitPrice')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-col-12 p-md-10\",\n                    children: /*#__PURE__*/_jsxDEV(InputText, {\n                      id: \"unitPrice\",\n                      type: \"text\",\n                      value: selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.unitAmount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 646,\n                      columnNumber: 23\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-mb-12 p-md-12\",\n            children: /*#__PURE__*/_jsxDEV(DataTable, {\n              value: orderItems,\n              selection: selectedProduct,\n              onRowClick: function onRowClick(e) {\n                return selectTableRow(e);\n              },\n              selectionMode: \"single\",\n              className: \"datatable-responsive\",\n              children: [/*#__PURE__*/_jsxDEV(Column, {\n                field: \"orderItemSeqId\",\n                header: \"#\",\n                body: colSeqBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"productId\",\n                header: t('pos.code'),\n                body: colIdBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"itemDescription\",\n                header: t('pos.product'),\n                body: colDescBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"unitAmount\",\n                header: t('pos.price'),\n                body: colTotalBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"quantity\",\n                header: t('pos.quantity'),\n                body: colQtyBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                body: actionBodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12 p-md-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-mb-12 p-md-12\",\n            children: /*#__PURE__*/_jsxDEV(POSSearchCustomerForm, {\n              inputRef: refInputCustomer,\n              setCustomerInfo: setCustomerInfo,\n              updateOrderCustomerPartyId: updateOrderCustomerPartyId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.code')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: customerInfo === null || customerInfo === void 0 ? void 0 : customerInfo.partyId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.firstAndLastName')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: [customerInfo === null || customerInfo === void 0 ? void 0 : customerInfo.firstName, \" \", customerInfo === null || customerInfo === void 0 ? void 0 : customerInfo.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.address')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: customerInfo === null || customerInfo === void 0 ? void 0 : customerInfo.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.phoneNumber')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: customerInfo === null || customerInfo === void 0 ? void 0 : customerInfo.phoneNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.store')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: /*#__PURE__*/_jsxDEV(Dropdown, {\n              id: \"productStoreId\",\n              value: currentProductStore,\n              onChange: function onChange(e) {\n                return setCurrentProductStore(e.value);\n              },\n              options: productStores,\n              optionLabel: \"productStoreId\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.orderId')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: orderId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.totalTax')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"p-col-12 p-mb-3 p-md-3 p-mb-md-0\",\n            children: t('pos.total')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-9\",\n            children: orderHeader ? (orderHeader === null || orderHeader === void 0 ? void 0 : orderHeader.grandTotal) + ' (' + (orderHeader === null || orderHeader === void 0 ? void 0 : orderHeader.currencyUomId) + ')' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          label: \"\".concat(t('pos.payment'), \" (F3)\"),\n          className: \"p-mr-2 p-mb-2\",\n          onClick: function onClick() {\n            return setPaymentDisplay(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\".concat(t('pos.holdOrder'), \" (F5)\"),\n          className: \"p-mr-2 p-mb-2\",\n          onClick: holdOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\".concat(t('pos.openOrder'), \" (F7)\"),\n          className: \"p-mr-2 p-mb-2\",\n          onClick: function onClick() {\n            getHeldOrderList();\n            setHeldOrderDisplay(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\".concat(t('pos.cancelOrder'), \" (F10)\"),\n          className: \"p-button-danger p-mr-2 p-mb-2\",\n          onClick: cancelOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: printRef,\n        children: /*#__PURE__*/_jsxDEV(FormPrint, {\n          payment: {\n            moneyBack: moneyBack,\n            totalAmount: totalAmount,\n            paymentAmount: paymentAmount\n          },\n          data: orderItems,\n          store: currentProductStore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: print2Ref,\n        children: /*#__PURE__*/_jsxDEV(FormPrint2, {\n          payment: {\n            moneyBack: moneyBack,\n            totalAmount: totalAmount,\n            paymentAmount: paymentAmount\n          },\n          data: orderItems,\n          store: currentProductStore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 741,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Dialog, {\n      header: \"Confirmation\",\n      visible: displayDeleteItem,\n      onHide: function onHide() {\n        return setDisplayDeleteItem(false);\n      },\n      style: {\n        width: '350px'\n      },\n      modal: true,\n      footer: dialogDeleteFooter,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirmation-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"pi pi-exclamation-triangle p-mr-3\",\n          style: {\n            fontSize: '2rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: t('pos.confirmDeleteItemProduct')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 765,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(ListPromotion, {\n      visible: displayListPromotion,\n      onHide: function onHide() {\n        return setDisplayListPromotion(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Loading, {\n      visible: loading,\n      onHide: function onHide() {\n        return setLoading(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(SalesOrderHistory, {\n      visible: displaySalesOrderHistory,\n      onHide: function onHide() {\n        return setDisplaySalesOrderHistory(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 554,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(POS, \"0mrSwJ7ciArxqRP0r8y4dZUQgDg=\", false, function () {\n  return [useTranslation, useReactToPrint];\n});\n\n_c = POS;\n\nvar _c;\n\n$RefreshReg$(_c, \"POS\");","map":{"version":3,"sources":["D:/eway/src/pages/POS.js"],"names":["React","useState","useRef","useContext","useEffect","useCallback","InputText","Button","DataTable","Column","Dropdown","Dialog","POSSearchProductForm","POSSearchCustomerForm","POSService","CommonService","UserProfileContext","ToastContext","useTranslation","FormPrint","FormPrint2","useReactToPrint","sum","InputNumber","ListPromotion","SalesOrderHistory","Loading","POS","t","userProfile","toast","commonService","productStores","setProductStores","currentProductStore","setCurrentProductStore","orderId","setOrderId","orderItems","setOrderItems","orderHeader","setOrderHeader","partyId","customerInfo","setCustomerInfo","paymentInstrumentOptions","setPaymentInstrumentOptions","selectedPaymentInstrument","setSelectedPaymentInstrument","paymentAmount","setPaymentAmount","paymentDisplay","setPaymentDisplay","heldOrderDisplay","setHeldOrderDisplay","heldOrderList","setHeldOrderList","quantity","setQuantity","selectedProduct","setSelectedProduct","moneyBack","setMoneyBack","displayDeleteItem","setDisplayDeleteItem","displayListPromotion","setDisplayListPromotion","loading","setLoading","displaySalesOrderHistory","setDisplaySalesOrderHistory","refInput","refInputProduct","refInputCustomer","printRef","print2Ref","totalAmount","map","elm","unitAmount","posService","getProductStores","info","then","data","productStoreList","getTentativeOrderIfAny","productStoreId","catch","err","current","show","severity","summary","detail","response","errors","life","getPaymentInstrumentOptions","find","ele","enumId","document","title","escFunction","event","keyCode","preventDefault","focus","holdOrder","getHeldOrderList","cancelOrder","addOrderItem","productId","reduceOrderItem","ctrlKey","shiftKey","addEventListener","removeEventListener","finally","getOrderItemList","orderItemList","getOrderHeader","getCustomerInfo","customerPartyId","data3","addOrderPartPayment","paymentId","completeOrder","orderCompleted","clearState","forEach","updateQuantityProduct","updateOrderItem","orderItemSeqId","handleDeleteOrderItem","item","deleteOrderItem","orderPartSeqId","heldOrder","reopenOrder","cancelledOrder","inputPaymentAmount","e","value","changeQuantityInput","selectTableRow","handlePrint","content","updateOrderCustomerPartyId","colSeqBodyTemplate","rowData","header","colIdBodyTemplate","colDescBodyTemplate","itemDescription","colQtyBodyTemplate","colTotalBodyTemplate","colStoreBodyTemplate","colOrderIdBodyTemplate","colOrderGrandTotalBodyTemplate","grandTotal","colOrderEntryBodyTemplate","entryDate","dialogDeleteFooter","actionBodyTemplate","heldOrderActionBodyTemplate","paymentFooter","heldOrderFooter","width","target","firstName","lastName","address","phoneNumber","currencyUomId","display","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext, useEffect, useCallback } from 'react';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { Dropdown } from 'primereact/dropdown';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { POSSearchProductForm } from '../components/POSSearchProductForm';\r\nimport { POSSearchCustomerForm } from '../components/POSSearchCustomerForm';\r\nimport { POSService } from '../service/POSService';\r\nimport { CommonService } from '../service/CommonService';\r\nimport { UserProfileContext } from '../App';\r\nimport { ToastContext } from \"../App\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { FormPrint } from '../components/ComponentPrint/FormPrint';\r\nimport { FormPrint2 } from '../components/ComponentPrint/FormPrint2';\r\nimport { useReactToPrint } from 'react-to-print';\r\nimport { sum } from 'lodash';\r\nimport { InputNumber } from 'primereact/inputnumber';\r\nimport { ListPromotion } from '../components/POSComponent/ListPromotion';\r\nimport { SalesOrderHistory } from '../components/POSComponent/SalesOrderHistory';\r\nimport { Loading } from '../components/Loading';\r\n\r\nexport const POS = () => {\r\n  const { t } = useTranslation('common');\r\n\r\n  const userProfile = useContext(UserProfileContext);\r\n  const toast = useContext(ToastContext);\r\n\r\n  const commonService = new CommonService();\r\n\r\n  const [productStores, setProductStores] = useState([])\r\n  const [currentProductStore, setCurrentProductStore] = useState(null);\r\n  const [orderId, setOrderId] = useState(null);\r\n  const [orderItems, setOrderItems] = useState([]);\r\n  const [orderHeader, setOrderHeader] = useState(null);\r\n  const [customerInfo, setCustomerInfo] = useState({ partyId: '_NA_' });\r\n\r\n  //const [paymentTypeOptions, setPaymentTypeOptions] = useState([]);\r\n  //const [selectedPaymentType, setSelectedPaymentType] = useState(null)\r\n  const [paymentInstrumentOptions, setPaymentInstrumentOptions] = useState([]);\r\n  const [selectedPaymentInstrument, setSelectedPaymentInstrument] = useState(null)\r\n  const [paymentAmount, setPaymentAmount] = useState(null);\r\n  const [paymentDisplay, setPaymentDisplay] = useState(false);\r\n  const [heldOrderDisplay, setHeldOrderDisplay] = useState(false)\r\n  const [heldOrderList, setHeldOrderList] = useState([]);\r\n  const [quantity, setQuantity] = useState(0)\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [moneyBack, setMoneyBack] = useState(0)\r\n  const [displayDeleteItem, setDisplayDeleteItem] = useState(false);\r\n  const [displayListPromotion, setDisplayListPromotion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [displaySalesOrderHistory, setDisplaySalesOrderHistory] = useState(false);\r\n\r\n  const refInput = useRef();\r\n  const refInputProduct = useRef();\r\n  const refInputCustomer = useRef();\r\n  const printRef = useRef();\r\n  const print2Ref = useRef();\r\n\r\n  const totalAmount = sum(\r\n    orderItems?.map(elm => elm.unitAmount * elm.quantity),\r\n  );\r\n\r\n  const posService = new POSService();\r\n\r\n  useEffect(() => {\r\n    // setLoading(true);\r\n    commonService.getProductStores(userProfile.info.partyId).then((data) => {\r\n      setProductStores(data.productStoreList);\r\n      if (data.productStoreList[0]) {\r\n        setCurrentProductStore(data.productStoreList[0]);\r\n        getTentativeOrderIfAny(customerInfo.partyId, data.productStoreList[0].productStoreId);\r\n      }\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n\r\n    posService.getPaymentInstrumentOptions().then((data) => {\r\n      setPaymentInstrumentOptions(data.paymentInstrumentOptions)\r\n      setSelectedPaymentInstrument(data.paymentInstrumentOptions.find(ele => ele.enumId === 'PiCash'))\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n\r\n    document.title = t('title.pos');\r\n    return () => {\r\n        document.title = t('title.homepage');\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const escFunction = useCallback(\r\n    (event) => {\r\n      if (event.keyCode === 112) {\r\n        //F1\r\n        event.preventDefault();\r\n        refInputProduct.current.focus();\r\n      }\r\n      if (event.keyCode === 113) {\r\n        //F2\r\n        event.preventDefault();\r\n        refInputCustomer.current.focus();\r\n      }\r\n      if (event.keyCode === 116) {\r\n        //F5\r\n        event.preventDefault();\r\n        holdOrder();\r\n      }\r\n      if (event.keyCode === 114) {\r\n        //F3\r\n        event.preventDefault();\r\n        setPaymentDisplay(true);\r\n      }\r\n      if (event.keyCode === 117) {\r\n        //F6\r\n        event.preventDefault();\r\n      }\r\n      if (event.keyCode === 118) {\r\n        //F7\r\n        event.preventDefault();\r\n        getHeldOrderList();\r\n        setHeldOrderDisplay(true);\r\n      }\r\n      if (event.keyCode === 199) {\r\n        //F8\r\n        //   setDisplayDeleteOrder(true);\r\n        event.preventDefault();\r\n      }\r\n      if (event.keyCode === 120) {\r\n        //F9\r\n        event.preventDefault();\r\n      }\r\n      if (event.keyCode === 121) {\r\n        //F10\r\n        event.preventDefault();\r\n        cancelOrder();\r\n      }\r\n      if (event.keyCode === 187) {\r\n        // +\r\n        event.preventDefault();\r\n        addOrderItem(selectedProduct.productId, 1);\r\n        setQuantity(quantity + 1);\r\n      }\r\n      if (event.keyCode === 189) {\r\n        // -\r\n        event.preventDefault();\r\n        reduceOrderItem();\r\n      }\r\n      if (event.ctrlKey && event.keyCode === 76) {\r\n        // Ctrl + L\r\n        event.preventDefault();\r\n        setDisplayListPromotion(true);\r\n      }\r\n      if (event.ctrlKey && event.keyCode === 72) {\r\n        // Ctrl + H\r\n        event.preventDefault();\r\n        setDisplaySalesOrderHistory(true);\r\n      }\r\n      if (event.shiftKey && event.keyCode === 46) {\r\n        // shift delete\r\n        event.preventDefault();\r\n        setDisplayDeleteItem(true);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [selectedProduct, orderItems],\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', escFunction, false);\r\n    return () => {\r\n      document.removeEventListener('keydown', escFunction, false);\r\n    };\r\n  }, [escFunction]);\r\n\r\n  const getHeldOrderList = () => {\r\n    setLoading(true);\r\n    posService.getHeldOrderList().then((data) => {\r\n      setHeldOrderList(data.heldOrderList);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const getOrderItemList = (orderId) => {\r\n    posService.getOrderItemList(orderId).then((data) => {\r\n      setOrderItems(data.orderItemList);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n  }\r\n\r\n  const getOrderHeader = (orderId) => {\r\n    posService.getOrderHeader(orderId).then((data) => {\r\n      setOrderHeader(data.orderHeader);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n  }\r\n\r\n  const getCustomerInfo = (orderId) => {\r\n\r\n    posService.getCustomerInfo({orderId: orderId}).then(data => {\r\n      setCustomerInfo(data.customerInfo);\r\n    }).catch(err => {\r\n      toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n    });\r\n  }\r\n\r\n  const getTentativeOrderIfAny = (customerPartyId, productStoreId) => {\r\n    posService.getTentativeOrderIfAny(customerPartyId, productStoreId).then((data3) => {\r\n      if (data3.orderId) {\r\n        setOrderId(data3.orderId);\r\n        getOrderHeader(data3.orderId);\r\n        getOrderItemList(data3.orderId);\r\n        getCustomerInfo(data3.orderId);\r\n      }\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n  }\r\n\r\n\r\n  const addOrderPartPayment = () => {\r\n    setLoading(true);\r\n    posService.addOrderPartPayment(orderId, selectedPaymentInstrument.enumId, paymentAmount).then((data) => {\r\n      if (data.paymentId) {\r\n        posService.completeOrder(orderId, data.paymentId).then((data) => {\r\n          if (data.orderCompleted === 'true') {\r\n            toast.current.show({ severity: 'info', summary: t('successMessage'), detail: \"Order completed !\", life: 3000 });\r\n          }\r\n          clearState();\r\n        })\r\n          .catch(err => {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n          }).finally(() => {\r\n            setLoading(false);\r\n          })\r\n      }\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      })\r\n    setPaymentDisplay(false);\r\n  }\r\n\r\n  const clearState = () => {\r\n    setOrderHeader(null);\r\n    setOrderId(null);\r\n    setOrderItems([]);\r\n    setCustomerInfo({ partyId: '_NA_' });\r\n  }\r\n\r\n  const addOrderItem = (productId, quantity) => {\r\n    setLoading(true);\r\n    posService.addOrderItem(currentProductStore.productStoreId, customerInfo.partyId, orderId, productId, quantity).then((data) => {\r\n      if (orderId == null) {\r\n        setOrderId(data.orderId)\r\n      }\r\n      getOrderHeader(data.orderId)\r\n      getOrderItemList(data.orderId)\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const reduceOrderItem = () => {\r\n    orderItems.forEach((elm) => {\r\n      if (elm.productId === selectedProduct.productId) {\r\n        updateQuantityProduct(elm.quantity - 1);\r\n      }\r\n    });\r\n  };\r\n\r\n  const updateQuantityProduct = (quantity) => {\r\n    setLoading(true);\r\n    posService\r\n      .updateOrderItem(orderId, selectedProduct.orderItemSeqId, quantity)\r\n      .then((data) => {\r\n        getOrderHeader(orderId);\r\n        getOrderItemList(orderId);\r\n        setQuantity(quantity);\r\n      })\r\n      .catch((err) => {\r\n        toast.current.show({\r\n          severity: 'error',\r\n          summary: t('errorMessage'),\r\n          detail: err.response.data.errors,\r\n          life: 5000,\r\n        });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      }); \r\n  };\r\n\r\n  const handleDeleteOrderItem = (item) => {\r\n    setLoading(true);\r\n    posService\r\n      .deleteOrderItem(item.orderItemSeqId, orderId, item.orderPartSeqId)\r\n      .then((data) => {\r\n        setDisplayDeleteItem(false);\r\n        getOrderHeader(orderId);\r\n        getOrderItemList(orderId);\r\n      })\r\n      .catch((err) => {\r\n        toast.current.show({\r\n          severity: 'error',\r\n          summary: t('errorMessage'),\r\n          detail: err.response.data.errors,\r\n          life: 5000,\r\n        });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n  };\r\n\r\n  const holdOrder = () => {\r\n    setLoading(true);\r\n    posService.holdOrder(orderId).then((data) => {\r\n      if (data.heldOrder === 'true') {\r\n        clearState();\r\n        toast.current.show({ severity: 'info', summary: t('successMessage'), detail: \"Order Held !\", life: 3000 });\r\n      }\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const reopenOrder = (orderId) => {\r\n    setLoading(true);\r\n    setHeldOrderDisplay(false);\r\n    setOrderId(orderId);\r\n    posService.reopenOrder(orderId).then((data) => {\r\n      setOrderHeader(data.orderHeader);\r\n      setCustomerInfo(data.customerInfo);\r\n      setOrderItems(data.orderItemList);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n\r\n  }\r\n\r\n  const cancelOrder = () => {\r\n    setLoading(true);\r\n    posService.cancelOrder(orderId).then((data) => {\r\n      if (data.cancelledOrder === 'true') {\r\n        toast.current.show({ severity: 'info', summary: t('successMessage'), detail: \"Order Cancelled !\", life: 3000 });\r\n      }\r\n      clearState();\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const inputPaymentAmount = (e) => {\r\n    setPaymentAmount(e.value);\r\n\r\n    setMoneyBack(e.value - totalAmount < 0 ? 0 : e.value - totalAmount);\r\n  };\r\n\r\n  const changeQuantityInput = (e) => {\r\n    if (e.keyCode === 13) {\r\n      updateQuantityProduct(quantity);\r\n    }\r\n  };\r\n\r\n  const selectTableRow = (e) => {\r\n    setSelectedProduct(e.data);\r\n    setQuantity(e.data.quantity);\r\n  };\r\n\r\n  const handlePrint = useReactToPrint({\r\n    content: () => printRef.current,\r\n  });\r\n\r\n  // const handlePrint2 = useReactToPrint({\r\n  //   content: () => print2Ref.current,\r\n  // });\r\n\r\n\r\n\r\n  const updateOrderCustomerPartyId = async (partyId) => {\r\n    setLoading(true);\r\n    const data = await posService.updateOrderCustomerPartyId(orderId, partyId);\r\n    setOrderId(data.orderId);\r\n    getOrderHeader(data.orderId);\r\n    getOrderItemList(data.orderId);\r\n    setLoading(false);\r\n  }\r\n\r\n  const colSeqBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.orderItemSeqId}\r\n      </>\r\n    );\r\n  }\r\n  const colIdBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.productId}\r\n      </>\r\n    );\r\n  }\r\n  const colDescBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.itemDescription}\r\n      </>\r\n    );\r\n  }\r\n  const colQtyBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.quantity}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const colTotalBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.unitAmount}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const colStoreBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.productStoreId}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const colOrderIdBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.orderId}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const colOrderGrandTotalBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.grandTotal}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const colOrderEntryBodyTemplate = (rowData) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{rowData.header}</span>\r\n        {rowData.entryDate}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const dialogDeleteFooter = (\r\n    <>\r\n      <Button\r\n        type=\"button\"\r\n        label=\"No\"\r\n        icon=\"pi pi-times\"\r\n        onClick={() => setDisplayDeleteItem(false)}\r\n        className=\"p-button-text\"\r\n      />\r\n      <Button\r\n        type=\"button\"\r\n        label=\"Yes\"\r\n        icon=\"pi pi-check\"\r\n        onClick={() => handleDeleteOrderItem(selectedProduct)}\r\n        className=\"p-button-text\"\r\n        autoFocus\r\n      />\r\n    </>\r\n  );\r\n\r\n  const actionBodyTemplate = (rowData) => {\r\n    return (\r\n      <div className=\"actions\">\r\n        <Button\r\n          icon=\"pi pi-plus\"\r\n          className=\"p-button-rounded p-button-success p-mr-2\"\r\n          onClick={() => addOrderItem(rowData.productId, 1)}\r\n        />\r\n        <Button\r\n          icon=\"pi pi-trash\"\r\n          className=\"p-button-rounded p-button-warning\"\r\n          onClick={() => {\r\n            setSelectedProduct(rowData);\r\n            setDisplayDeleteItem(true);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const heldOrderActionBodyTemplate = (rowData) => {\r\n    return (\r\n      <div className=\"actions\">\r\n        <Button icon=\"pi pi-lock-open\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={() => reopenOrder(rowData.orderId)} />\r\n      </div>\r\n    );\r\n  }\r\n  const paymentFooter = (\r\n    <>\r\n      <Button type=\"button\" label={t('printInvoice')} onClick={handlePrint} />\r\n      {/* <Button type=\"button\" label=\"Print2\" onClick={handlePrint2} /> */}\r\n      <Button type=\"button\" label={t('paid')} onClick={() => addOrderPartPayment()} />\r\n      <Button type=\"button\" label={t('cancel')} onClick={() => setPaymentDisplay(false)} />\r\n    </>\r\n  )\r\n\r\n  const heldOrderFooter = (\r\n    <>\r\n      <Button type=\"button\" label=\"Cancel\" onClick={() => setHeldOrderDisplay(false)} />\r\n    </>\r\n  )\r\n\r\n\r\n  return (\r\n    <div className=\"p-grid\">\r\n      <Dialog\r\n        header={t('pos.payment')}\r\n        visible={paymentDisplay}\r\n        style={{ width: '50vw' }}\r\n        modal\r\n        footer={paymentFooter}\r\n        onHide={() => setPaymentDisplay(false)}\r\n      >\r\n        <div className=\"p-fluid\">\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-4 p-md-4 p-mb-md-0\">{t('pos.paymentInstrument')}</label>\r\n            <div className=\"p-col-12 p-md-8\">\r\n              <Dropdown\r\n                id=\"enumId\"\r\n                value={selectedPaymentInstrument}\r\n                onChange={(e) => setSelectedPaymentInstrument(e.value)}\r\n                options={paymentInstrumentOptions}\r\n                optionLabel=\"description\"\r\n              ></Dropdown>\r\n            </div>\r\n          </div>\r\n          {/*\r\n                    <div className=\"p-field p-grid\">\r\n                        <label className=\"p-col-12 p-mb-4 p-md-4 p-mb-md-0\">Payment Type</label>\r\n                        <div className=\"p-col-12 p-md-8\">\r\n                            <Dropdown id=\"enumId\" value={selectedPaymentType} onChange={(e) => setSelectedPaymentType(e.value)} options={paymentTypeOptions} optionLabel=\"description\"></Dropdown>\r\n                        </div>\r\n                    </div>\r\n                    */}\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-4 p-md-4 p-mb-md-0\">{t('pos.amount')}</label>\r\n            <div className=\"p-col-12 p-md-8\">\r\n              <InputNumber value={paymentAmount} onChange={inputPaymentAmount} />\r\n            </div>\r\n          </div>\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-4 p-md-4 p-mb-md-0\">{t('pos.backAmount')}</label>\r\n            <div className=\"p-col-12 p-md-8\">\r\n              <InputText disabled id=\"moneyBack\" type=\"text\" value={moneyBack} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n      <Dialog\r\n        header=\"On Hold\"\r\n        visible={heldOrderDisplay}\r\n        style={{ width: '50vw' }}\r\n        modal\r\n        footer={heldOrderFooter}\r\n        onHide={() => setHeldOrderDisplay(false)}\r\n      >\r\n        <DataTable value={heldOrderList} dataKey=\"orderId\" className=\"datatable-responsive\">\r\n          <Column field=\"productStoreId\" header=\"Store\" body={colStoreBodyTemplate}></Column>\r\n          <Column field=\"orderId\" header=\"Order\" body={colOrderIdBodyTemplate}></Column>\r\n          <Column field=\"grandTotal\" header=\"Total\" body={colOrderGrandTotalBodyTemplate}></Column>\r\n          <Column field=\"entryDate\" header=\"Entry Date\" body={colOrderEntryBodyTemplate}></Column>\r\n          <Column body={heldOrderActionBodyTemplate}></Column>\r\n        </DataTable>\r\n      </Dialog>\r\n\r\n      <div className=\"p-col-12 p-md-8\">\r\n        <div className=\"card\">\r\n          <div className=\"p-grid\">\r\n            <div className=\"p-col-12 p-mb-12 p-md-12\">\r\n              <POSSearchProductForm inputRef={refInputProduct} addOrderItem={addOrderItem} />\r\n            </div>\r\n            <div className=\"p-fluid p-col-12 p-mb-12 p-md-12\">\r\n              <h5>{selectedProduct?.itemDescription || t('pos.productName')}</h5>\r\n              <div className=\"p-grid\">\r\n                <div className=\"p-col-6\">\r\n                  <div className=\"p-field p-grid\">\r\n                    <label htmlFor=\"quantity\" className=\"p-col-12 p-mb-2 p-md-2 p-mb-md-0\">\r\n                      {t('pos.quantity')}\r\n                    </label>\r\n                    <div className=\"p-col-12 p-md-10\">\r\n                      <InputText\r\n                        ref={refInput}\r\n                        id=\"quantity\"\r\n                        value={quantity}\r\n                        onChange={(e) => setQuantity(e.target.value)}\r\n                        onKeyUp={(e) => changeQuantityInput(e)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-col-6\">\r\n                  <div className=\"p-field p-grid\">\r\n                    <label htmlFor=\"unitPrice\" className=\"p-col-12 p-mb-2 p-md-2 p-mb-md-0\">\r\n                      {t('pos.unitPrice')}\r\n                    </label>\r\n                    <div className=\"p-col-12 p-md-10\">\r\n                      <InputText id=\"unitPrice\" type=\"text\" value={selectedProduct?.unitAmount} />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-col-12 p-mb-12 p-md-12\">\r\n              <DataTable\r\n                value={orderItems}\r\n                selection={selectedProduct}\r\n                onRowClick={(e) => selectTableRow(e)}\r\n                selectionMode=\"single\"\r\n                className=\"datatable-responsive\"\r\n              >\r\n                <Column field=\"orderItemSeqId\" header=\"#\" body={colSeqBodyTemplate}></Column>\r\n                <Column field=\"productId\" header={t('pos.code')} body={colIdBodyTemplate}></Column>\r\n                <Column field=\"itemDescription\" header={t('pos.product')} body={colDescBodyTemplate}></Column>\r\n                <Column field=\"unitAmount\" header={t('pos.price')} body={colTotalBodyTemplate}></Column>\r\n                <Column field=\"quantity\" header={t('pos.quantity')} body={colQtyBodyTemplate}></Column>\r\n                <Column body={actionBodyTemplate}></Column>\r\n              </DataTable>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-col-12 p-md-4\">\r\n        <div className=\"card\">\r\n          <div className=\"p-grid\">\r\n            <div className=\"p-col-12 p-mb-12 p-md-12\">\r\n              <POSSearchCustomerForm\r\n                inputRef={refInputCustomer}\r\n                setCustomerInfo={setCustomerInfo}\r\n                updateOrderCustomerPartyId={updateOrderCustomerPartyId}\r\n              />\r\n            </div>\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.code')}</label>\r\n            <div className=\"p-col-12 p-md-9\">{customerInfo?.partyId}</div>\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.firstAndLastName')}</label>\r\n            <div className=\"p-col-12 p-md-9\">\r\n              {customerInfo?.firstName} {customerInfo?.lastName}\r\n            </div>\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.address')}</label>\r\n            <div className=\"p-col-12 p-md-9\">{customerInfo?.address}</div>\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.phoneNumber')}</label>\r\n            <div className=\"p-col-12 p-md-9\">{customerInfo?.phoneNumber}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"card p-fluid\">\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.store')}</label>\r\n            <div className=\"p-col-12 p-md-9\">\r\n              <Dropdown\r\n                id=\"productStoreId\"\r\n                value={currentProductStore}\r\n                onChange={(e) => setCurrentProductStore(e.value)}\r\n                options={productStores}\r\n                optionLabel=\"productStoreId\"\r\n              ></Dropdown>\r\n            </div>\r\n          </div>\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.orderId')}</label>\r\n            <div className=\"p-col-12 p-md-9\">{orderId}</div>\r\n          </div>\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.totalTax')}</label>\r\n            <div className=\"p-col-12 p-md-9\"></div>\r\n          </div>\r\n          <div className=\"p-field p-grid\">\r\n            <label className=\"p-col-12 p-mb-3 p-md-3 p-mb-md-0\">{t('pos.total')}</label>\r\n            <div className=\"p-col-12 p-md-9\">{orderHeader ? (orderHeader?.grandTotal + ' (' + orderHeader?.currencyUomId + ')') : ''}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"card\">\r\n          <Button\r\n            label={`${t('pos.payment')} (F3)`}\r\n            className=\"p-mr-2 p-mb-2\"\r\n            onClick={() => setPaymentDisplay(true)}\r\n          ></Button>\r\n          <Button label={`${t('pos.holdOrder')} (F5)`} className=\"p-mr-2 p-mb-2\" onClick={holdOrder}></Button>\r\n          <Button\r\n            label={`${t('pos.openOrder')} (F7)`}\r\n            className=\"p-mr-2 p-mb-2\"\r\n            onClick={() => {\r\n              getHeldOrderList();\r\n              setHeldOrderDisplay(true);\r\n            }}\r\n          ></Button>\r\n          <Button\r\n            label={`${t('pos.cancelOrder')} (F10)`}\r\n            className=\"p-button-danger p-mr-2 p-mb-2\"\r\n            onClick={cancelOrder}\r\n          ></Button>\r\n        </div>\r\n      </div>\r\n      <div style={{ display: 'none' }}>\r\n        <div ref={printRef}>\r\n          <FormPrint\r\n            payment={{ moneyBack, totalAmount, paymentAmount }}\r\n            data={orderItems}\r\n            store={currentProductStore}\r\n          />\r\n        </div>\r\n        <div ref={print2Ref}>\r\n          <FormPrint2\r\n            payment={{ moneyBack, totalAmount, paymentAmount }}\r\n            data={orderItems}\r\n            store={currentProductStore}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Dialog\r\n        header=\"Confirmation\"\r\n        visible={displayDeleteItem}\r\n        onHide={() => setDisplayDeleteItem(false)}\r\n        style={{ width: '350px' }}\r\n        modal\r\n        footer={dialogDeleteFooter}\r\n      >\r\n        <div className=\"confirmation-content\">\r\n          <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem' }} />\r\n          <span>{t('pos.confirmDeleteItemProduct')}</span>\r\n        </div>\r\n      </Dialog>\r\n      <ListPromotion visible={displayListPromotion} onHide={() => setDisplayListPromotion(false)} />\r\n      <Loading visible={loading} onHide={() => setLoading(false)} />\r\n      <SalesOrderHistory visible={displaySalesOrderHistory} onHide={() => setDisplaySalesOrderHistory(false)} />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}