{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\components\\\\POSSearchProductForm.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport { CommonService } from '../service/CommonService';\nimport { ToastContext } from '../App';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var POSSearchProductForm = function POSSearchProductForm(props) {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      foundProducts = _useState2[0],\n      setFoundProducts = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedAutoValue = _useState4[0],\n      setSelectedAutoValue = _useState4[1];\n\n  var toast = useContext(ToastContext);\n\n  var searchProducts = function searchProducts(event) {\n    setTimeout(function () {\n      var commonService = new CommonService();\n      commonService.quickSearch('MantleProduct', \"*\".concat(event.query, \"*\")).then(function (data) {\n        var documentList = data.documentList.filter(function (document) {\n          return document.productTypeEnumId === 'PtAsset';\n        });\n        setFoundProducts(documentList.map(function (document) {\n          return {\n            product: \"\".concat(document.productId, \" :: \").concat(document.name)\n          };\n        }));\n\n        if (data.documentList.length === 1) {\n          props.addOrderItem(data.documentList[0].productId, 1);\n          setFoundProducts([]);\n          setSelectedAutoValue(null);\n        }\n      }).catch(function (err) {\n        toast.current.show({\n          severity: 'error',\n          summary: 'Error Message',\n          detail: err.response.data.errors,\n          life: 5000\n        });\n      });\n    }, 400);\n  };\n\n  var addOrderItem = function addOrderItem(event) {\n    var productId = event.value.product.split(' :: ')[0];\n    props.addOrderItem(productId, 1);\n    setSelectedAutoValue(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-inputgroup\",\n    children: /*#__PURE__*/_jsxDEV(AutoComplete, _objectSpread(_objectSpread({}, props), {}, {\n      placeholder: \"\".concat(t('pos.searchProduct'), \" (F1)\"),\n      id: \"searchProduct\",\n      dropdown: true,\n      value: selectedAutoValue,\n      onChange: function onChange(e) {\n        return setSelectedAutoValue(e.value);\n      },\n      suggestions: foundProducts,\n      completeMethod: searchProducts,\n      field: \"product\",\n      onSelect: addOrderItem\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(POSSearchProductForm, \"p3J4ldgVs1JuZeyToolG7QMbxNg=\", false, function () {\n  return [useTranslation];\n});\n\n_c = POSSearchProductForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"POSSearchProductForm\");","map":{"version":3,"sources":["D:/eway/src/components/POSSearchProductForm.js"],"names":["React","useState","useContext","AutoComplete","CommonService","ToastContext","useTranslation","POSSearchProductForm","props","t","foundProducts","setFoundProducts","selectedAutoValue","setSelectedAutoValue","toast","searchProducts","event","setTimeout","commonService","quickSearch","query","then","data","documentList","filter","document","productTypeEnumId","map","product","productId","name","length","addOrderItem","catch","err","current","show","severity","summary","detail","response","errors","life","value","split","e"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { AutoComplete } from 'primereact/autocomplete';\r\nimport { CommonService } from '../service/CommonService';\r\n\r\nimport { ToastContext } from '../App';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport const POSSearchProductForm = (props) => {\r\n  const { t } = useTranslation('common');\r\n\r\n  const [foundProducts, setFoundProducts] = useState([]);\r\n  const [selectedAutoValue, setSelectedAutoValue] = useState(null);\r\n\r\n  const toast = useContext(ToastContext);\r\n\r\n  const searchProducts = (event) => {\r\n    setTimeout(() => {\r\n      const commonService = new CommonService();\r\n      commonService\r\n        .quickSearch('MantleProduct', `*${event.query}*`)\r\n        .then((data) => {\r\n          let documentList = data.documentList.filter((document) => {\r\n            return document.productTypeEnumId === 'PtAsset';\r\n          });\r\n          setFoundProducts(\r\n            documentList.map((document) => {\r\n              return { product: `${document.productId} :: ${document.name}` };\r\n            }),\r\n          );\r\n          if (data.documentList.length === 1) {\r\n            props.addOrderItem(data.documentList[0].productId, 1);\r\n            setFoundProducts([]);\r\n            setSelectedAutoValue(null);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          toast.current.show({\r\n            severity: 'error',\r\n            summary: 'Error Message',\r\n            detail: err.response.data.errors,\r\n            life: 5000,\r\n          });\r\n        });\r\n    }, 400);\r\n  };\r\n\r\n  const addOrderItem = (event) => {\r\n    let productId = event.value.product.split(' :: ')[0];\r\n    props.addOrderItem(productId, 1);\r\n    setSelectedAutoValue(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-inputgroup\">\r\n      <AutoComplete\r\n        {...props}\r\n        placeholder={`${t('pos.searchProduct')} (F1)`}\r\n        id=\"searchProduct\"\r\n        dropdown\r\n        value={selectedAutoValue}\r\n        onChange={(e) => setSelectedAutoValue(e.value)}\r\n        suggestions={foundProducts}\r\n        completeMethod={searchProducts}\r\n        field=\"product\"\r\n        onSelect={addOrderItem}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}