{"ast":null,"code":"import _objectSpread from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\Salesman\\\\List\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\\\u0110A\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useState, useEffect, useRef, useCallback, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { InputText } from \"primereact/inputtext\";\nimport { MultiSelect } from \"primereact/multiselect\";\nimport { Button } from 'primereact/button';\nimport { useTranslation } from 'react-i18next';\nimport { ToastContext } from \"../../../App\";\nimport { UserProfileContext } from \"../../../App\";\nimport { SalesmanService } from '../../../service/SalesmanService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var SalesmanList = function SalesmanList() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var toast = useContext(ToastContext);\n  var userProfile = useContext(UserProfileContext);\n  var history = useHistory();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState({\n    first: 0,\n    rows: 10,\n    page: 0,\n    sortField: \"partyId\",\n    sortOrder: -1\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lazyParams = _useState4[0],\n      setLazyParams = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalRecords = _useState6[0],\n      setTotalRecords = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      salesmans = _useState8[0],\n      setSalesmans = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      partyIdIdFilter = _useState10[0],\n      setPartyIdIdFilter = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      fullNameFilter = _useState12[0],\n      setFullNameFilter = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      postalAddressFilter = _useState14[0],\n      setPostalAddressFilter = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      emailAddressFilter = _useState16[0],\n      setEmailAddressFilter = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      telecomNumberFilter = _useState18[0],\n      setTelecomNumberFilter = _useState18[1]; // const [webAddressFilter, setWebAddressFilter] = useState(null);\n\n\n  var genders = [{\n    id: 'M',\n    description: t('male')\n  }, {\n    id: 'F',\n    description: t('female')\n  }];\n\n  var _useState19 = useState({\n    matchMode: \"in\",\n    value: [],\n    id: \"gender\"\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      selectedGender = _useState20[0],\n      setSelectedGender = _useState20[1];\n\n  var dt = useRef(null);\n  var typingTimeoutRef = useRef(null);\n\n  var emptyMessage = /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: t('noDataFound')\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 26\n  }, _this);\n\n  var getParams = useCallback(function (lazyParams) {\n    var params = {};\n    var filters = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.filters;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.page && (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.page) >= 0) params.pageIndex = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.page;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.rows) params.pageSize = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.rows;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.sortField && lazyParams !== null && lazyParams !== void 0 && lazyParams.sortOrder) params.orderByField = (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortOrder) === 1 ? lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortField : \"-\" + (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortField);\n\n    if (filters && Object.keys(filters).length !== 0) {\n      for (var key in filters) {\n        if (Object.hasOwnProperty.call(filters, key)) {\n          var filter = filters[key];\n          var matchMode = filter.matchMode;\n          var value = filter.value;\n          if (value == null || value === \"\") continue;\n\n          switch (matchMode) {\n            case \"contains\":\n              params[key] = value;\n              break;\n\n            case \"in\":\n              params[key + \"s\"] = value.join();\n              break;\n\n            default:\n              break;\n          }\n        }\n      }\n    }\n\n    return params;\n  }, []);\n  var initData = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(lazyParams) {\n      var salesmanService, params, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              salesmanService = new SalesmanService();\n              setLoading(true);\n              _context.prev = 2;\n              params = getParams(lazyParams);\n              _context.next = 6;\n              return salesmanService.getSaleEmployeeList(params);\n\n            case 6:\n              data = _context.sent;\n              setTotalRecords(data.totalRecords);\n              setSalesmans(data.salesmans);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: _context.t0.response.data.errors,\n                life: 5000\n              });\n\n            case 14:\n              _context.prev = 14;\n              setLoading(false);\n              return _context.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11, 14, 17]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [getParams, toast, t]);\n  useEffect(function () {\n    initData(lazyParams);\n    document.title = t('title.SalesmanList');\n    return function () {\n      document.title = t('title.homepage');\n    };\n  }, [lazyParams, initData, t]);\n  var onPage = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  }, [lazyParams]);\n  var onFilter = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread(_objectSpread({}, lazyParams), e), {}, {\n      first: 0\n    }));\n  }, [lazyParams]);\n  var onSort = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  }, [lazyParams]);\n  var onFilterTextChange = useCallback(function (e) {\n    var obj = e.target;\n\n    switch (obj.id) {\n      case 'partyId':\n        setPartyIdIdFilter(obj.value);\n        break;\n\n      case 'fullName':\n        setFullNameFilter(obj.value);\n        break;\n\n      case 'postalAddress':\n        setPostalAddressFilter(obj.value);\n        break;\n\n      case 'emailAddress':\n        setEmailAddressFilter(obj.value);\n        break;\n\n      case 'telecomNumber':\n        setTelecomNumberFilter(obj.value);\n        break;\n\n      case 'webAddress':\n        // setWebAddressFilter(obj.value);\n        break;\n\n      default:\n        break;\n    }\n\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    typingTimeoutRef.current = setTimeout(function () {\n      dt.current.filter(obj.value, obj.id, 'contains');\n    }, 400);\n  }, []);\n\n  var onMultiSelectHide = function onMultiSelectHide(id) {\n    switch (id) {\n      case \"gender\":\n        dt.current.filter(selectedGender.value, \"gender\", \"in\");\n        break;\n\n      default:\n        console.log(\"not found ! \" + id);\n        break;\n    }\n  };\n\n  var onMultiSelectFilterChange = function onMultiSelectFilterChange(e) {\n    var obj = e.target; //console.log(e.target);\n\n    switch (obj.id) {\n      case \"gender\":\n        setSelectedGender(_objectSpread(_objectSpread({}, selectedGender), {}, {\n          value: obj.value\n        }));\n        break;\n\n      default:\n        console.log(\"not multi  found! \", obj);\n        break;\n    }\n  };\n\n  var getItemTemplate = function getItemTemplate(option) {\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      id: option.id,\n      children: option.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, _this);\n  };\n\n  var getOptions = function getOptions(id) {\n    switch (id) {\n      case \"gender\":\n        return genders;\n\n      default:\n        break;\n    }\n  };\n\n  var multiSelectFilter = function multiSelectFilter(id, value) {\n    return /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: id,\n      value: value,\n      options: getOptions(id),\n      itemTemplate: getItemTemplate,\n      onChange: onMultiSelectFilterChange,\n      onHide: function onHide() {\n        onMultiSelectHide(id);\n      },\n      optionLabel: \"description\",\n      optionValue: \"id\",\n      placeholder: t(\"common:all\"),\n      style: {\n        width: \"100%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }, _this);\n  };\n\n  var textFilter = useCallback(function (id, value) {\n    return /*#__PURE__*/_jsxDEV(InputText, {\n      type: \"text\",\n      id: id,\n      value: value || '',\n      onChange: onFilterTextChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 51\n    }, _this);\n  }, [onFilterTextChange]);\n  var bodyIdTemplate = useCallback(function (data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#/sales/salesman/detail/\".concat(data.partyId),\n        style: {\n          color: '#2196f3'\n        },\n        children: data[props.field]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true);\n  }, []);\n  var bodyTemplate = useCallback(function (data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, _this), data[props.field]]\n    }, void 0, true);\n  }, []);\n  var bodyGenderTemplate = useCallback(function (data, props) {\n    var gender = genders.find(function (elm) {\n      return elm.id === data[props.field];\n    });\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, _this), gender === null || gender === void 0 ? void 0 : gender.description]\n    }, void 0, true);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-grid table-demo\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-8\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: t('title.SalesmanList')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-4\",\n                children: userProfile.roles.includes('ADMIN') && /*#__PURE__*/_jsxDEV(Button, {\n                  label: t('common:homepage.sales.Create'),\n                  icon: \"pi pi-plus\",\n                  className: \"p-button-text\",\n                  onClick: function onClick(e) {\n                    return history.push(\"/sales/promotion/create\");\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 41\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(DataTable, {\n          value: salesmans,\n          paginator: true,\n          className: \"p-datatable-customers\",\n          dataKey: \"productId\",\n          ref: dt,\n          filters: lazyParams.filters,\n          lazy: true,\n          first: lazyParams.first,\n          rows: lazyParams.rows,\n          totalRecords: totalRecords,\n          rowsPerPageOptions: [5, 10, 20, 50, 100],\n          onPage: onPage,\n          onFilter: onFilter,\n          onSort: onSort,\n          sortField: lazyParams.sortField,\n          sortOrder: lazyParams.sortOrder,\n          rowHover: true,\n          paginatorTemplate: \"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\",\n          currentPageReportTemplate: \"{first} - {last} of {totalRecords}\",\n          emptyMessage: emptyMessage,\n          loading: loading,\n          paginatorPosition: \"bottom\",\n          children: [/*#__PURE__*/_jsxDEV(Column, {\n            field: \"partyCode\",\n            header: t('salesman.id'),\n            sortable: true,\n            body: bodyIdTemplate,\n            filter: true,\n            filterElement: textFilter(\"partyCode\", partyIdIdFilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"fullName\",\n            header: t('salesman.fullName'),\n            sortable: true,\n            filter: true,\n            body: bodyTemplate,\n            filterElement: textFilter(\"fullName\", fullNameFilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"gender\",\n            header: t('salesman.gender'),\n            sortable: true,\n            filter: true,\n            body: bodyGenderTemplate,\n            filterElement: multiSelectFilter(\"gender\", selectedGender.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"postalAddress\",\n            header: t('salesman.postalAddress'),\n            sortable: true,\n            filter: true,\n            body: bodyTemplate,\n            filterElement: textFilter(\"postalAddress\", postalAddressFilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"emailAddress\",\n            header: t('salesman.emailAddress'),\n            sortable: true,\n            filter: true,\n            body: bodyTemplate,\n            filterElement: textFilter(\"emailAddress\", emailAddressFilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"telecomNumber\",\n            header: t('salesman.telecomNumber'),\n            sortable: true,\n            filter: true,\n            body: bodyTemplate,\n            filterElement: textFilter(\"telecomNumber\", telecomNumberFilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(SalesmanList, \"lrpnimE07XPZEcJOVcFN0stjxQc=\", false, function () {\n  return [useTranslation, useHistory];\n});\n\n_c = SalesmanList;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalesmanList\");","map":{"version":3,"sources":["D:/ĐA/src/pages/Salesman/List/index.js"],"names":["React","useState","useEffect","useRef","useCallback","useContext","useHistory","DataTable","Column","InputText","MultiSelect","Button","useTranslation","ToastContext","UserProfileContext","SalesmanService","SalesmanList","t","toast","userProfile","history","loading","setLoading","first","rows","page","sortField","sortOrder","lazyParams","setLazyParams","totalRecords","setTotalRecords","salesmans","setSalesmans","partyIdIdFilter","setPartyIdIdFilter","fullNameFilter","setFullNameFilter","postalAddressFilter","setPostalAddressFilter","emailAddressFilter","setEmailAddressFilter","telecomNumberFilter","setTelecomNumberFilter","genders","id","description","matchMode","value","selectedGender","setSelectedGender","dt","typingTimeoutRef","emptyMessage","textAlign","getParams","params","filters","pageIndex","pageSize","orderByField","Object","keys","length","key","hasOwnProperty","call","filter","join","initData","salesmanService","getSaleEmployeeList","data","current","show","severity","summary","detail","response","errors","life","document","title","onPage","e","onFilter","onSort","onFilterTextChange","obj","target","clearTimeout","setTimeout","onMultiSelectHide","console","log","onMultiSelectFilterChange","getItemTemplate","option","getOptions","multiSelectFilter","width","textFilter","bodyIdTemplate","props","header","partyId","color","field","bodyTemplate","bodyGenderTemplate","gender","find","elm","roles","includes","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { InputText } from \"primereact/inputtext\";\r\nimport { MultiSelect } from \"primereact/multiselect\";\r\nimport { Button } from 'primereact/button';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { ToastContext } from \"../../../App\";\r\nimport { UserProfileContext } from \"../../../App\";\r\n\r\nimport { SalesmanService } from '../../../service/SalesmanService';\r\n\r\nexport const SalesmanList = () => {\r\n    const { t } = useTranslation('common');\r\n    const toast = useContext(ToastContext);\r\n    const userProfile = useContext(UserProfileContext);\r\n    const history = useHistory();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    \r\n    const [lazyParams, setLazyParams] = useState({ first: 0, rows: 10, page: 0, sortField: \"partyId\", sortOrder: -1 });\r\n    const [totalRecords, setTotalRecords] = useState(0);\r\n    const [salesmans, setSalesmans] = useState(null);\r\n\r\n    const [partyIdIdFilter, setPartyIdIdFilter] = useState(null);\r\n    const [fullNameFilter, setFullNameFilter] = useState(null);\r\n    const [postalAddressFilter, setPostalAddressFilter] = useState(null);\r\n    const [emailAddressFilter, setEmailAddressFilter] = useState(null);\r\n    const [telecomNumberFilter, setTelecomNumberFilter] = useState(null);\r\n    // const [webAddressFilter, setWebAddressFilter] = useState(null);\r\n\r\n    const genders = [\r\n        {\r\n            id: 'M',\r\n            description: t('male') \r\n        },\r\n        {\r\n            id: 'F',\r\n            description: t('female') \r\n        }\r\n    ];\r\n\r\n    const [selectedGender, setSelectedGender] = useState({\r\n        matchMode: \"in\",\r\n        value: [],\r\n        id: \"gender\",\r\n    });\r\n\r\n    const dt = useRef(null);\r\n    const typingTimeoutRef = useRef(null);\r\n    const emptyMessage = <p style={{textAlign: 'center'}}>{t('noDataFound')}</p>;\r\n\r\n    const getParams = useCallback((lazyParams) => {\r\n        const params = {};\r\n        const filters = lazyParams?.filters;\r\n\r\n        if (lazyParams?.page && lazyParams?.page >= 0) params.pageIndex = lazyParams?.page;\r\n        if (lazyParams?.rows) params.pageSize = lazyParams?.rows;\r\n        if (lazyParams?.sortField && lazyParams?.sortOrder) params.orderByField = lazyParams?.sortOrder === 1 ? lazyParams?.sortField : \"-\" + lazyParams?.sortField;\r\n        if (filters && Object.keys(filters).length !== 0) {\r\n            for (const key in filters) {\r\n                if (Object.hasOwnProperty.call(filters, key)) {\r\n                    const filter = filters[key];\r\n                    const matchMode = filter.matchMode;\r\n                    const value = filter.value;\r\n                    if (value == null || value === \"\") continue;\r\n                    switch (matchMode) {\r\n                        case \"contains\":\r\n                            params[key] = value;\r\n                            break;\r\n                        case \"in\":\r\n                            params[key + \"s\"] = value.join();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return params;\r\n    }, []);\r\n\r\n    const initData = useCallback(async (lazyParams) => {\r\n        let salesmanService = new SalesmanService();\r\n        setLoading(true);\r\n\r\n        try {\r\n            let params = getParams(lazyParams);\r\n            let data = await salesmanService.getSaleEmployeeList(params);   \r\n\r\n            setTotalRecords(data.totalRecords);\r\n            setSalesmans(data.salesmans);\r\n        } catch (error) {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: error.response.data.errors, life: 5000 });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [getParams, toast, t]);\r\n\r\n    useEffect(() => {\r\n        initData(lazyParams);\r\n\r\n        document.title = t('title.SalesmanList');\r\n\r\n        return () => {\r\n            document.title = t('title.homepage');\r\n        }\r\n    }, [lazyParams, initData, t]);\r\n\r\n    const onPage = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e });\r\n    }, [lazyParams]);\r\n\r\n    const onFilter = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e, first: 0 });\r\n    }, [lazyParams]);\r\n    \r\n    const onSort = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e});\r\n    }, [lazyParams]);\r\n\r\n    const onFilterTextChange = useCallback((e) => {\r\n        let obj = e.target;\r\n        switch (obj.id) {\r\n               \r\n            case 'partyId':\r\n                setPartyIdIdFilter(obj.value);\r\n                break;\r\n            case 'fullName':\r\n                setFullNameFilter(obj.value);\r\n                break;\r\n            case 'postalAddress':\r\n                setPostalAddressFilter(obj.value);\r\n                break;\r\n            case 'emailAddress':\r\n                setEmailAddressFilter(obj.value);\r\n                break;\r\n            case 'telecomNumber':\r\n                setTelecomNumberFilter(obj.value);\r\n                break;\r\n            case 'webAddress':\r\n                // setWebAddressFilter(obj.value);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (typingTimeoutRef.current) {\r\n            clearTimeout(typingTimeoutRef.current);\r\n        }\r\n        typingTimeoutRef.current = setTimeout(() => {\r\n            dt.current.filter(obj.value, obj.id, 'contains');\r\n        }, 400);\r\n    }, []);\r\n    const onMultiSelectHide = (id) => {\r\n        switch (id) {\r\n          case \"gender\":\r\n            dt.current.filter(selectedGender.value, \"gender\", \"in\");\r\n            break;\r\n          default:\r\n            console.log(\"not found ! \" + id);\r\n            break;\r\n        }\r\n    };\r\n\r\n    const onMultiSelectFilterChange = (e) => {\r\n        let obj = e.target;\r\n        //console.log(e.target);\r\n        switch (obj.id) {\r\n          case \"gender\":\r\n            setSelectedGender({ ...selectedGender, value: obj.value });\r\n            break;\r\n          default:\r\n            console.log(\"not multi  found! \", obj);\r\n            break;\r\n        }\r\n    };\r\n\r\n    const getItemTemplate = (option) => (\r\n        <span id={option.id}>{option.description}</span>\r\n    );\r\n\r\n    const getOptions = (id) => {\r\n        switch (id) {\r\n          case \"gender\":\r\n            return genders;\r\n          default:\r\n            break;\r\n        }\r\n    };\r\n\r\n    const multiSelectFilter = (id, value) => (\r\n        <MultiSelect\r\n          id={id}\r\n          value={value}\r\n          options={getOptions(id)}\r\n          itemTemplate={getItemTemplate}\r\n          onChange={onMultiSelectFilterChange}\r\n          onHide={() => {\r\n            onMultiSelectHide(id);\r\n          }}\r\n          optionLabel=\"description\"\r\n          optionValue=\"id\"\r\n          placeholder={t(\"common:all\")}\r\n          style={{ width: \"100%\" }}\r\n        ></MultiSelect>\r\n    );\r\n\r\n    const textFilter = useCallback((id, value) => <InputText type='text' id={id} value={value || ''} onChange={onFilterTextChange}></InputText>, [onFilterTextChange]);\r\n\r\n    const bodyIdTemplate = useCallback((data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                <a href={`#/sales/salesman/detail/${data.partyId}`} style={{color: '#2196f3'}}>\r\n                    {data[props.field]}\r\n                </a>\r\n            </>\r\n        );\r\n    }, []);\r\n\r\n    const bodyTemplate = useCallback((data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                {data[props.field]}\r\n            </>\r\n        );\r\n    }, []);\r\n\r\n    const bodyGenderTemplate = useCallback((data, props) => {\r\n        let gender = genders.find(elm => elm.id === data[props.field]);\r\n\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                {gender?.description}\r\n            </>\r\n        );\r\n    }, []);\r\n    \r\n    return (\r\n        <div className=\"p-grid table-demo\">\r\n            <div className=\"p-col-12\">\r\n                <div className=\"card\">\r\n                    <div className=\"p-grid\">\r\n                        <div className=\"p-col-12 p-md-8\">\r\n                            <h5>{t('title.SalesmanList')}</h5>\r\n                        </div>\r\n                        <div className=\"p-col-12 p-md-4\">\r\n                            <div className=\"p-grid\">\r\n                                <div className=\"p-col-12 p-md-8\"></div>\r\n                                <div className=\"p-col-12 p-md-4\">\r\n                                    {\r\n                                        userProfile.roles.includes('ADMIN') && \r\n                                        <Button label={t('common:homepage.sales.Create')} icon=\"pi pi-plus\" className=\"p-button-text\" onClick={(e) => history.push(\"/sales/promotion/create\")} />\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DataTable \r\n                        value={salesmans} paginator className=\"p-datatable-customers\" dataKey=\"productId\"\r\n                        ref={dt} filters={lazyParams.filters} lazy first={lazyParams.first} rows={lazyParams.rows}\r\n                        totalRecords={totalRecords} rowsPerPageOptions={[5, 10, 20, 50, 100]} onPage={onPage} onFilter={onFilter} onSort={onSort}\r\n                        sortField={lazyParams.sortField} sortOrder={lazyParams.sortOrder} rowHover \r\n                        paginatorTemplate=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\"\r\n                        currentPageReportTemplate=\"{first} - {last} of {totalRecords}\" \r\n                        emptyMessage={emptyMessage}\r\n                        loading={loading} paginatorPosition=\"bottom\"\r\n                    >\r\n                        <Column field=\"partyCode\" header={t('salesman.id')} sortable body={bodyIdTemplate} filter \r\n                            filterElement={textFilter(\"partyCode\", partyIdIdFilter)}></Column>\r\n                        <Column field=\"fullName\" header={t('salesman.fullName')} sortable filter body={bodyTemplate} \r\n                            filterElement={textFilter(\"fullName\", fullNameFilter)}></Column>\r\n                        <Column field=\"gender\" header={t('salesman.gender')} sortable filter body={bodyGenderTemplate} \r\n                            filterElement={multiSelectFilter( \"gender\", selectedGender.value)}></Column>\r\n                        \r\n                        <Column field=\"postalAddress\" header={t('salesman.postalAddress')} sortable filter body={bodyTemplate} \r\n                            filterElement={textFilter(\"postalAddress\", postalAddressFilter)}></Column>\r\n                        <Column field=\"emailAddress\" header={t('salesman.emailAddress')} sortable filter body={bodyTemplate} \r\n                            filterElement={textFilter(\"emailAddress\", emailAddressFilter)}></Column>\r\n                        <Column field=\"telecomNumber\" header={t('salesman.telecomNumber')} sortable filter body={bodyTemplate} \r\n                            filterElement={textFilter(\"telecomNumber\", telecomNumberFilter)}></Column>\r\n                        {/* <Column field=\"webAddress\" header={t('salesman.webAddress')} sortable filter body={bodyTemplate} \r\n                            filterElement={textFilter(\"webAddress\", webAddressFilter)}></Column> */}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}