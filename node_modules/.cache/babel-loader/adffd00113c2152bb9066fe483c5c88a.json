{"ast":null,"code":"import _toConsumableArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/eway/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\pages\\\\Product\\\\ProductCreateNew\\\\ProductCreateNew.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\eway\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useEffect, useState, useContext, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from \"react-router-dom\";\nimport { Divider } from 'primereact/divider';\nimport { Button } from 'primereact/button';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { Loading } from '../../../components/Loading';\nimport { ToastContext } from '../../../App';\nimport { ProductService } from '../../../service/ProductService';\nimport { PurchasingService } from '../../../service/PurchasingService';\nimport { CommonService } from '../../../service/CommonService';\nimport { UomService } from '../../../service/UomService';\nimport { ProductInfo, ProductVendorList, ProductVendorAdd } from '../../../components/Product/ProductNew';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var ProductCreateNew = function ProductCreateNew(props) {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var toast = useContext(ToastContext);\n  var history = useHistory();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      vendorProducts = _useState4[0],\n      setVendorProducts = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      vendorProductSelected = _useState6[0],\n      setVendorProductSelected = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      enumProductTypes = _useState8[0],\n      setEnumProductTypes = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      productCategories = _useState10[0],\n      setProductCategories = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      quantityUoms = _useState12[0],\n      setQuantityUoms = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      currencyUoms = _useState14[0],\n      setCurrencyUoms = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      vendorParties = _useState16[0],\n      setVendorParties = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      displayAddProductPriceSupplier = _useState18[0],\n      setDisplayAddProductPriceSupplier = _useState18[1];\n\n  var purchasingService = new PurchasingService();\n  var productService = new ProductService();\n  var defaultValues = {\n    productId: \"\",\n    productName: \"\",\n    productTypeEnum: null,\n    productCategory: null,\n    salesDiscontinuationDate: null,\n    listPrice: null,\n    currencyUom: null,\n    currentPrice: null,\n    quantityUom: null\n  };\n  var schema = yup.object().shape({\n    productName: yup.string().required(t('valid.validFieldRequire')),\n    productTypeEnum: yup.object().nullable().required(t('valid.validFieldRequire')),\n    quantityUom: yup.object().nullable().required(t('valid.validFieldRequire')),\n    listPrice: yup.number().nullable().required(t('valid.validFieldRequire')),\n    currentPrice: yup.number().nullable().required(t('valid.validFieldRequire')),\n    currencyUom: yup.object().nullable().required(t('valid.validFieldRequire'))\n  });\n\n  var _useForm = useForm({\n    defaultValues: defaultValues,\n    resolver: yupResolver(schema)\n  }),\n      control = _useForm.control,\n      _useForm$formState = _useForm.formState,\n      errors = _useForm$formState.errors,\n      isSubmitting = _useForm$formState.isSubmitting,\n      handleSubmit = _useForm.handleSubmit;\n\n  useEffect(function () {\n    init();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var init = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var commonService, uomService, enumProductType, productCategories, quantityUom, currencyUom, vendorParties;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            commonService = new CommonService();\n            uomService = new UomService();\n            _context.next = 4;\n            return commonService.getEnumeration({\n              enumTypeId: 'ProductType'\n            });\n\n          case 4:\n            enumProductType = _context.sent;\n            _context.next = 7;\n            return productService.getProductCategoryList({\n              'pageNoLimit': true\n            });\n\n          case 7:\n            productCategories = _context.sent;\n            _context.next = 10;\n            return uomService.getUoms({\n              'uomTypeEnumId': 'UT_CURRENCY_MEASURE',\n              'uomTypeEnumId_not': \"Y\",\n              'pageNoLimit': true\n            });\n\n          case 10:\n            quantityUom = _context.sent;\n            _context.next = 13;\n            return uomService.getCurrencyMeasure();\n\n          case 13:\n            currencyUom = _context.sent;\n            _context.next = 16;\n            return purchasingService.searchPartyList({\n              pageIndex: 0,\n              roleTypeId: \"Supplier,Vendor\"\n            });\n\n          case 16:\n            vendorParties = _context.sent;\n            setEnumProductTypes(enumProductType === null || enumProductType === void 0 ? void 0 : enumProductType.enums.map(function (item) {\n              return {\n                name: item.description,\n                code: item.enumId\n              };\n            }));\n            setProductCategories(productCategories.map(function (item) {\n              return {\n                name: item.categoryName,\n                code: item.productCategoryId\n              };\n            }));\n            setQuantityUoms(quantityUom === null || quantityUom === void 0 ? void 0 : quantityUom.uomList.map(function (item) {\n              return {\n                name: item.description,\n                code: item.uomId\n              };\n            }));\n            setCurrencyUoms(currencyUom === null || currencyUom === void 0 ? void 0 : currencyUom.uomList.map(function (item) {\n              return {\n                name: item.description,\n                code: item.uomId\n              };\n            }));\n            setVendorParties(vendorParties === null || vendorParties === void 0 ? void 0 : vendorParties.outList.map(function (item) {\n              return {\n                name: item.name,\n                code: item.value\n              };\n            }));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var _data$productTypeEnum, _data$productCategory, _data$currencyUom, _data$quantityUom, productParams, res;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setLoading(true);\n              productParams = {\n                productId: data.productId,\n                productName: data.productName,\n                productTypeEnumId: (_data$productTypeEnum = data.productTypeEnum) === null || _data$productTypeEnum === void 0 ? void 0 : _data$productTypeEnum.code,\n                productCategoryId: (_data$productCategory = data.productCategory) === null || _data$productCategory === void 0 ? void 0 : _data$productCategory.code,\n                salesDiscontinuationDate: data.salesDiscontinuationDate,\n                listPrice: data.listPrice,\n                currencyUomId: (_data$currencyUom = data.currencyUom) === null || _data$currencyUom === void 0 ? void 0 : _data$currencyUom.code,\n                currentPrice: data.currentPrice,\n                quantityUomId: (_data$quantityUom = data.quantityUom) === null || _data$quantityUom === void 0 ? void 0 : _data$quantityUom.code,\n                productVendorPriceList: vendorProducts\n              };\n              _context2.next = 5;\n              return productService.createProductAdvance(productParams);\n\n            case 5:\n              res = _context2.sent;\n              setLoading(false);\n\n              if (!res.productId) {\n                _context2.next = 11;\n                break;\n              }\n\n              history.push(\"/purchasing/product/detail/\" + res.productId);\n              _context2.next = 12;\n              break;\n\n            case 11:\n              return _context2.abrupt(\"return\");\n\n            case 12:\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: _context2.t0.response.data.errors,\n                life: 5000\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClickAdd = function handleClickAdd() {\n    setDisplayAddProductPriceSupplier(true);\n  };\n\n  var handleHideAdd = function handleHideAdd() {\n    setDisplayAddProductPriceSupplier(false);\n  };\n\n  var onSubmitAddVendorProductPrice = function onSubmitAddVendorProductPrice(data, reset) {\n    var vendorPartyId = data.vendorPartyId;\n    var vendorPartyName = vendorParties.find(function (item) {\n      return item.code === vendorPartyId;\n    }).name;\n\n    var _data = _objectSpread({}, data);\n\n    _data.vendorPartyName = vendorPartyName;\n    _data.id = new Date().getTime();\n\n    var _vendorProducts = [].concat(_toConsumableArray(vendorProducts), [_data]);\n\n    setVendorProducts(_vendorProducts);\n    setDisplayAddProductPriceSupplier(false);\n    reset();\n  };\n\n  var removeVendorProductPrice = function removeVendorProductPrice() {\n    var id = vendorProductSelected.id;\n    if (!id) return;\n\n    var _vendorProducts = vendorProducts.filter(function (item) {\n      return item.id !== id;\n    });\n\n    setVendorProducts(_vendorProducts);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-fluid\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: t('product.createNew')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-grid\",\n              children: /*#__PURE__*/_jsxDEV(ProductInfo, {\n                enumProductTypes: enumProductTypes,\n                productCategories: productCategories,\n                quantityUoms: quantityUoms,\n                currencyUoms: currencyUoms,\n                errors: errors,\n                control: control\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-8\",\n              children: [/*#__PURE__*/_jsxDEV(ProductVendorList, {\n                vendorProducts: vendorProducts,\n                vendorProductSelected: vendorProductSelected,\n                setVendorProductSelected: setVendorProductSelected\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                icon: \"pi pi-plus\",\n                className: \"p-button-rounded p-button-success p-button-text\",\n                onClick: handleClickAdd\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                icon: \"pi pi-minus\",\n                className: \"p-button-rounded p-button-danger p-button-text\",\n                onClick: removeVendorProductPrice\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(ProductVendorAdd, {\n                display: displayAddProductPriceSupplier,\n                currencyUoms: currencyUoms,\n                vendorParties: vendorParties,\n                handleHide: handleHideAdd,\n                onSubmit: onSubmitAddVendorProductPrice\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid p-mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-11\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-1\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                disabled: isSubmitting,\n                onClick: handleSubmit(onSubmit),\n                label: t(\"save\"),\n                icon: \"pi pi-check\",\n                type: \"submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Loading, {\n        visible: loading,\n        onHide: function onHide() {\n          return setLoading(false);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s(ProductCreateNew, \"igbXf9cFCtYkRjCuZOPC090euCc=\", false, function () {\n  return [useTranslation, useHistory, useForm];\n});\n\n_c = ProductCreateNew;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCreateNew\");","map":{"version":3,"sources":["D:/eway/src/pages/Product/ProductCreateNew/ProductCreateNew.js"],"names":["React","useEffect","useState","useContext","useCallback","useTranslation","useForm","useHistory","Divider","Button","yupResolver","yup","Loading","ToastContext","ProductService","PurchasingService","CommonService","UomService","ProductInfo","ProductVendorList","ProductVendorAdd","ProductCreateNew","props","t","toast","history","loading","setLoading","vendorProducts","setVendorProducts","vendorProductSelected","setVendorProductSelected","enumProductTypes","setEnumProductTypes","productCategories","setProductCategories","quantityUoms","setQuantityUoms","currencyUoms","setCurrencyUoms","vendorParties","setVendorParties","displayAddProductPriceSupplier","setDisplayAddProductPriceSupplier","purchasingService","productService","defaultValues","productId","productName","productTypeEnum","productCategory","salesDiscontinuationDate","listPrice","currencyUom","currentPrice","quantityUom","schema","object","shape","string","required","nullable","number","resolver","control","formState","errors","isSubmitting","handleSubmit","init","commonService","uomService","getEnumeration","enumTypeId","enumProductType","getProductCategoryList","getUoms","getCurrencyMeasure","searchPartyList","pageIndex","roleTypeId","enums","map","item","name","description","code","enumId","categoryName","productCategoryId","uomList","uomId","outList","value","onSubmit","data","productParams","productTypeEnumId","currencyUomId","quantityUomId","productVendorPriceList","createProductAdvance","res","push","current","show","severity","summary","detail","response","life","handleClickAdd","handleHideAdd","onSubmitAddVendorProductPrice","reset","vendorPartyId","vendorPartyName","find","_data","id","Date","getTime","_vendorProducts","removeVendorProductPrice","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Divider } from 'primereact/divider';\r\nimport { Button } from 'primereact/button';\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport { Loading } from '../../../components/Loading';\r\nimport { ToastContext } from '../../../App';\r\n\r\nimport { ProductService } from '../../../service/ProductService';\r\nimport { PurchasingService } from '../../../service/PurchasingService';\r\nimport { CommonService } from '../../../service/CommonService';\r\nimport { UomService } from '../../../service/UomService';\r\nimport { ProductInfo, ProductVendorList, ProductVendorAdd } from '../../../components/Product/ProductNew';\r\n\r\nexport const ProductCreateNew = (props) => {\r\n  const { t } = useTranslation('common');\r\n  const toast = useContext(ToastContext);\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n  const [vendorProducts, setVendorProducts] = useState([]);\r\n  const [vendorProductSelected, setVendorProductSelected] = useState({});\r\n  const [ enumProductTypes, setEnumProductTypes ] = useState([]);\r\n  const [ productCategories , setProductCategories ] = useState([]);\r\n  const [ quantityUoms , setQuantityUoms ] = useState([]);\r\n  const [ currencyUoms , setCurrencyUoms ] = useState([]);\r\n  const [vendorParties, setVendorParties] = useState([]);\r\n  const [displayAddProductPriceSupplier, setDisplayAddProductPriceSupplier] = useState(false);\r\n\r\n  const purchasingService = new PurchasingService();\r\n  const productService = new ProductService();\r\n\r\n  const defaultValues = {\r\n    productId: \"\",\r\n    productName: \"\",\r\n    productTypeEnum: null,\r\n    productCategory: null,\r\n    salesDiscontinuationDate: null,\r\n    listPrice: null,\r\n    currencyUom: null,\r\n    currentPrice: null,\r\n    quantityUom: null,\r\n\r\n  };\r\n  const schema = yup.object().shape({\r\n    productName: yup.string().required(t('valid.validFieldRequire')),\r\n    productTypeEnum: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n    quantityUom: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n    listPrice: yup.number().nullable().required(t('valid.validFieldRequire')),\r\n    currentPrice: yup.number().nullable().required(t('valid.validFieldRequire')),\r\n    currencyUom: yup.object().nullable().required(t('valid.validFieldRequire')),\r\n});\r\n\r\n  const { control, formState: { errors, isSubmitting }, handleSubmit } = useForm({ defaultValues, resolver: yupResolver(schema) });\r\n\r\n  useEffect(() => {\r\n    init();\r\n }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const init = useCallback(async () => {\r\n    const commonService = new CommonService();\r\n    const uomService = new UomService();\r\n    const enumProductType = await commonService.getEnumeration({ enumTypeId: 'ProductType' });\r\n    const productCategories = await productService.getProductCategoryList({ 'pageNoLimit': true });\r\n    //const weightUom = await uomService.getUom(\r\n      //{ 'uomTypeEnumId': 'UT_WEIGHT_MEASURE', 'pageNoLimit': true });\r\n    const quantityUom = await uomService.getUoms(\r\n      { 'uomTypeEnumId': 'UT_CURRENCY_MEASURE', 'uomTypeEnumId_not': \"Y\", 'pageNoLimit': true });\r\n    const currencyUom = await uomService.getCurrencyMeasure();\r\n    const vendorParties = await purchasingService.searchPartyList({ pageIndex: 0, roleTypeId: \"Supplier,Vendor\" });\r\n\r\n    setEnumProductTypes(enumProductType?.enums.map(item => ({ \r\n      name: item.description,\r\n      code: item.enumId \r\n    })));\r\n    setProductCategories(productCategories.map(item => ({\r\n      name: item.categoryName, \r\n      code: item.productCategoryId\r\n    })));\r\n    setQuantityUoms(quantityUom?.uomList.map(item => ({\r\n      name: item.description,\r\n      code: item.uomId\r\n    })));\r\n    setCurrencyUoms(currencyUom?.uomList.map(item => ({\r\n      name: item.description,\r\n      code: item.uomId\r\n    }))); \r\n    setVendorParties(vendorParties?.outList.map(item => ({\r\n      name: item.name,\r\n      code: item.value\r\n    })));\r\n  }, []);  // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      setLoading(true);\r\n      const productParams = {\r\n        productId: data.productId,\r\n        productName: data.productName,\r\n        productTypeEnumId: data.productTypeEnum?.code,\r\n        productCategoryId: data.productCategory?.code,\r\n        salesDiscontinuationDate: data.salesDiscontinuationDate,\r\n        listPrice: data.listPrice,\r\n        currencyUomId: data.currencyUom?.code,\r\n        currentPrice: data.currentPrice,\r\n        quantityUomId: data.quantityUom?.code,\r\n        productVendorPriceList: vendorProducts\r\n      };\r\n      \r\n      const res = await productService.createProductAdvance(productParams);\r\n      setLoading(false);\r\n      if (res.productId) {\r\n        history.push(\"/purchasing/product/detail/\" + res.productId)\r\n      } else {\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: error.response.data.errors, life: 5000 });\r\n    }\r\n  };\r\n\r\n  const handleClickAdd = () => {\r\n    setDisplayAddProductPriceSupplier(true);\r\n  }\r\n  \r\n  const handleHideAdd = () => {\r\n    setDisplayAddProductPriceSupplier(false);\r\n  }\r\n\r\n  const onSubmitAddVendorProductPrice = (data, reset) => {\r\n    const vendorPartyId = data.vendorPartyId;\r\n    const vendorPartyName = vendorParties.find(item => item.code === vendorPartyId).name;\r\n    const _data = {...data};\r\n    _data.vendorPartyName = vendorPartyName;\r\n    _data.id = new Date().getTime();\r\n    const _vendorProducts = [...vendorProducts, _data];\r\n    setVendorProducts(_vendorProducts);\r\n    setDisplayAddProductPriceSupplier(false);\r\n    reset();\r\n  }\r\n\r\n  const removeVendorProductPrice = () => {\r\n    const id = vendorProductSelected.id;\r\n    if(!id) return;\r\n    const _vendorProducts = vendorProducts.filter(item => item.id !== id);\r\n    setVendorProducts(_vendorProducts);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-grid\">\r\n        <div className=\"p-col-12\">\r\n          <div className=\"card p-fluid\">\r\n            <h5>{t('product.createNew')}</h5>\r\n              <form>\r\n                <div className=\"p-grid\">\r\n                  <ProductInfo \r\n                    enumProductTypes={enumProductTypes} \r\n                    productCategories={productCategories} \r\n                    quantityUoms={quantityUoms} \r\n                    currencyUoms={currencyUoms} \r\n                    errors={errors} \r\n                    control={control}\r\n                  />\r\n                </div>\r\n              </form>\r\n              <Divider/>\r\n              <div className=\"p-grid\">\r\n                <div className=\"p-col-12 p-md-4\"></div>\r\n                <div className=\"p-col-12 p-md-8\">\r\n                  <ProductVendorList \r\n                    vendorProducts={vendorProducts}\r\n                    vendorProductSelected={vendorProductSelected}\r\n                    setVendorProductSelected={setVendorProductSelected}\r\n                  />\r\n                  <Button \r\n                    icon=\"pi pi-plus\" \r\n                    className=\"p-button-rounded p-button-success p-button-text\"\r\n                    onClick={handleClickAdd}\r\n                  />\r\n                  <Button \r\n                    icon=\"pi pi-minus\" \r\n                    className=\"p-button-rounded p-button-danger p-button-text\" \r\n                    onClick={removeVendorProductPrice}\r\n                  />\r\n                  <ProductVendorAdd \r\n                    display={displayAddProductPriceSupplier} \r\n                    currencyUoms={currencyUoms}\r\n                    vendorParties={vendorParties}\r\n                    handleHide={handleHideAdd}  \r\n                    onSubmit={onSubmitAddVendorProductPrice}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"p-grid p-mt-3\">\r\n                <div className=\"p-col-12 p-md-11\"></div>\r\n                <div className=\"p-col-12 p-md-1\">\r\n                  <Button\r\n                    disabled={isSubmitting}\r\n                    onClick={handleSubmit(onSubmit)}\r\n                    label={t(\"save\")}\r\n                    icon=\"pi pi-check\"\r\n                    type=\"submit\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n        <Loading visible={loading} onHide={() => setLoading(false)} />\r\n      </div>\r\n    </>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}