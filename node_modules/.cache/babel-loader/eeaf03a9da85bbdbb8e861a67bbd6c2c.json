{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\pages\\\\Promotion\\\\PromotionList\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport Moment from \"react-moment\";\nimport { POSService } from '../../../service/POSService';\nimport { ToastContext } from \"../../../App\";\nimport { UserProfileContext } from \"../../../App\";\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { Calendar } from 'primereact/calendar';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Button } from 'primereact/button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var PromotionList = function PromotionList() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var posService = new POSService();\n  var toast = useContext(ToastContext);\n  var history = useHistory();\n  var userProfile = useContext(UserProfileContext);\n\n  var _useState = useState({\n    first: 0,\n    rows: 10,\n    page: 0,\n    sortField: \"fromDate\",\n    sortOrder: -1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      lazyParams = _useState2[0],\n      setLazyParams = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalRecords = _useState6[0],\n      setTotalRecords = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fromDateRange = _useState8[0],\n      setFromDateRange = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      thruDateRange = _useState10[0],\n      setThruDateRange = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      promoList = _useState12[0],\n      setPromoList = _useState12[1];\n\n  var dt = useRef(null);\n  useEffect(function () {\n    document.title = t(\"common:title.promotionList\");\n    return function () {\n      document.title = \"common:title.homepage\";\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    setLoading(true);\n    var params = getParams(lazyParams);\n    posService.getPromoList(params).then(function (data) {\n      setPromoList(data.promoList);\n      setTotalRecords(data.totalRows);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: 'Error Message',\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lazyParams]);\n\n  var getParams = function getParams(lazyParams) {\n    var params = {};\n    var filters = lazyParams.filters;\n    if (lazyParams.page && lazyParams.page >= 0) params.pageIndex = lazyParams.page;\n    if (lazyParams.rows) params.pageSize = lazyParams.rows;\n    if (lazyParams.sortField && lazyParams.sortOrder) params.orderByField = lazyParams.sortOrder === 1 ? lazyParams.sortField : \"-\" + lazyParams.sortField;\n\n    if (filters && Object.keys(filters).length !== 0) {\n      for (var key in filters) {\n        if (Object.hasOwnProperty.call(filters, key)) {\n          var filter = filters[key];\n          var matchMode = filter.matchMode;\n          var value = filter.value;\n          if (value == null || value === \"\") continue;\n\n          switch (matchMode) {\n            case \"timestamprange\":\n              params[key + \"From\"] = value[0].getTime(); //get beginning of the day\n\n              params[key + \"Thru\"] = value[1].getTime() + 86400000 - 1; //get end of the day\n\n              break;\n\n            case \"contains\":\n              params[key + \"Term\"] = value;\n              break;\n\n            case \"in\":\n              params[key + \"s\"] = value.join();\n              break;\n\n            case \"equals\":\n            case \"not-equals\":\n            case \"greater\":\n            case \"greater-equals\":\n            case \"less\":\n            case \"less-equals\":\n              params[key + \"Str\"] = value;\n              params[key + \"Op\"] = matchMode;\n              break;\n\n            case \"is-not-null\":\n            case \"is-null\":\n              params[key + \"Op\"] = matchMode;\n              break;\n\n            default:\n              break;\n          }\n        }\n      }\n    }\n\n    return params;\n  };\n\n  var filterDate = function filterDate(value, filter) {\n    if (filter === undefined || filter === null || typeof filter === 'string' && filter.trim() === '') {\n      return true;\n    }\n\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return value === formatDate(filter);\n  };\n\n  var formatDate = function formatDate(date) {\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n\n    if (month < 10) {\n      month = '0' + month;\n    }\n\n    if (day < 10) {\n      day = '0' + day;\n    }\n\n    return date.getFullYear() + '-' + month + '-' + day;\n  };\n\n  var promotionIdTemplate = function promotionIdTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData.storePromotionId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var promoNameTemplate = function promoNameTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData.itemDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var storeTemplate = function storeTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData.storeName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var fromDateTemplate = function fromDateTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: rowData.fromDate && /*#__PURE__*/_jsxDEV(Moment, {\n        format: \"DD/MM/YYYY\",\n        children: rowData.fromDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 30\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var thruDateTemplate = function thruDateTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: rowData.thruDate && /*#__PURE__*/_jsxDEV(Moment, {\n        format: \"DD/MM/YYYY\",\n        children: rowData.thruDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 30\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var onFilterDateChange = function onFilterDateChange(e) {\n    var obj = e.target;\n\n    if (obj.id === 'fromDate') {\n      setFromDateRange(obj.value);\n    }\n\n    if (obj.id === 'thruDate') {\n      setThruDateRange(obj.value);\n    }\n\n    if (obj.value == null || obj.value[0] != null && obj.value[1] != null) {\n      //obj.value.map((item) => moment(item).format(\"YYYY-MM-DD\")),\n      dt.current.filter(obj.value, obj.id, \"timestamprange\");\n    } //delete dt.current.props.filters[obj.id];\n\n  };\n\n  var monthNavigatorTemplate = function monthNavigatorTemplate(e) {\n    return /*#__PURE__*/_jsxDEV(Dropdown, {\n      value: e.value,\n      options: e.options,\n      onChange: function onChange(event) {\n        return e.onChange(event.originalEvent, event.value);\n      },\n      style: {\n        lineHeight: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var yearNavigatorTemplate = function yearNavigatorTemplate(e) {\n    return /*#__PURE__*/_jsxDEV(Dropdown, {\n      value: e.value,\n      options: e.options,\n      onChange: function onChange(event) {\n        return e.onChange(event.originalEvent, event.value);\n      },\n      className: \"p-ml-2\",\n      style: {\n        lineHeight: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var dateFilter = function dateFilter(id, value) {\n    return /*#__PURE__*/_jsxDEV(Calendar, {\n      id: id,\n      selectionMode: \"range\",\n      readOnlyInput: true,\n      value: value,\n      onChange: onFilterDateChange,\n      placeholder: \"\",\n      locale: i18n.language,\n      monthNavigator: true,\n      yearNavigator: true,\n      showButtonBar: true,\n      yearRange: \"2010:2030\",\n      monthNavigatorTemplate: monthNavigatorTemplate,\n      yearNavigatorTemplate: yearNavigatorTemplate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var onPage = function onPage(e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  };\n\n  var onFilter = function onFilter(e) {\n    setLazyParams(_objectSpread(_objectSpread(_objectSpread({}, lazyParams), e), {}, {\n      first: 0\n    }));\n  };\n\n  var onSort = function onSort(e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  };\n\n  var emptyMessage = /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: t('emptyData')\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 24\n  }, _this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"datatable-filter-demo\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-12 p-md-8\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: t('title.promotionList')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-12 p-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-12 p-md-4\",\n              children: userProfile.roles.includes('ADMIN') && /*#__PURE__*/_jsxDEV(Button, {\n                label: t('common:homepage.sales.Create'),\n                icon: \"pi pi-plus\",\n                className: \"p-button-text\",\n                onClick: function onClick(e) {\n                  return history.push(\"/sales/salesman/create\");\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 27\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(DataTable, {\n        ref: dt,\n        value: promoList,\n        filters: lazyParams.filters,\n        className: \"p-datatable-customers\",\n        dataKey: \"id\",\n        paginator: true,\n        lazy: true,\n        first: lazyParams.first,\n        rows: lazyParams.rows,\n        onPage: onPage,\n        onFilter: onFilter,\n        onSort: onSort,\n        selectionMode: \"single\",\n        sortField: lazyParams.sortField,\n        sortOrder: lazyParams.sortOrder,\n        rowHover: true,\n        totalRecords: totalRecords,\n        rowsPerPageOptions: [5, 10, 20, 50, 100],\n        paginatorTemplate: \"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\",\n        currentPageReportTemplate: \"{first} - {last} of {totalRecords}\",\n        emptyMessage: emptyMessage,\n        loading: loading,\n        paginatorPosition: \"bottom\",\n        onRowClick: function onRowClick(e) {\n          return history.push(\"/sales/promotion/detail/\" + e.data.storePromotionId);\n        },\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          field: \"storePromotionId\",\n          sortable: true,\n          header: t('pos.promoCode'),\n          body: promotionIdTemplate,\n          filter: true,\n          filterPlaceholder: t('search'),\n          filterMatchMode: \"contains\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"itemDescription\",\n          sortable: true,\n          header: t('pos.promoName'),\n          body: promoNameTemplate,\n          filter: true,\n          filterPlaceholder: t('search'),\n          filterMatchMode: \"contains\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"storeName\",\n          sortable: true,\n          header: t('productStore'),\n          body: storeTemplate,\n          filter: true,\n          filterPlaceholder: t('search'),\n          filterMatchMode: \"contains\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"fromDate\",\n          filterField: \"fromDate\",\n          header: t('pos.startTime'),\n          body: fromDateTemplate,\n          sortable: true,\n          filter: true,\n          filterElement: dateFilter(\"fromDate\", fromDateRange),\n          filterFunction: filterDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"thruDate\",\n          filterField: \"thruDate\",\n          header: t('pos.endTime'),\n          body: thruDateTemplate,\n          sortable: true,\n          filter: true,\n          filterElement: dateFilter(\"thruDate\", thruDateRange),\n          filterFunction: filterDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(PromotionList, \"GsbdQHJg/8G08mcD5xlw+YjfZZM=\", false, function () {\n  return [useTranslation, useHistory];\n});\n\n_c = PromotionList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PromotionList\");","map":{"version":3,"sources":["D:/eway/src/pages/Promotion/PromotionList/index.js"],"names":["React","useState","useEffect","useRef","useContext","useHistory","useTranslation","Moment","POSService","ToastContext","UserProfileContext","DataTable","Column","Calendar","Dropdown","Button","PromotionList","t","i18n","posService","toast","history","userProfile","first","rows","page","sortField","sortOrder","lazyParams","setLazyParams","loading","setLoading","totalRecords","setTotalRecords","fromDateRange","setFromDateRange","thruDateRange","setThruDateRange","promoList","setPromoList","dt","document","title","params","getParams","getPromoList","then","data","totalRows","catch","err","current","show","severity","summary","detail","response","errors","life","finally","filters","pageIndex","pageSize","orderByField","Object","keys","length","key","hasOwnProperty","call","filter","matchMode","value","getTime","join","filterDate","undefined","trim","formatDate","date","month","getMonth","day","getDate","getFullYear","promotionIdTemplate","rowData","storePromotionId","promoNameTemplate","itemDescription","storeTemplate","storeName","fromDateTemplate","fromDate","thruDateTemplate","thruDate","onFilterDateChange","e","obj","target","id","monthNavigatorTemplate","options","event","onChange","originalEvent","lineHeight","yearNavigatorTemplate","dateFilter","language","onPage","onFilter","onSort","emptyMessage","textAlign","roles","includes","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Moment from \"react-moment\";\r\n\r\nimport { POSService } from '../../../service/POSService';\r\n\r\nimport { ToastContext } from \"../../../App\";\r\nimport { UserProfileContext } from \"../../../App\";\r\n\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { Calendar } from 'primereact/calendar';\r\nimport { Dropdown } from 'primereact/dropdown';\r\nimport { Button } from 'primereact/button';\r\n\r\nexport const PromotionList = () => {\r\n  const { t, i18n } = useTranslation('common');\r\n  const posService = new POSService();\r\n  const toast = useContext(ToastContext);\r\n  const history = useHistory();\r\n  const userProfile = useContext(UserProfileContext);\r\n\r\n  const [lazyParams, setLazyParams] = useState({ first: 0, rows: 10, page: 0, sortField: \"fromDate\", sortOrder: -1 });\r\n  const [loading, setLoading] = useState(false);\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [fromDateRange, setFromDateRange] = useState(null);\r\n  const [thruDateRange, setThruDateRange] = useState(null);\r\n\r\n  const [promoList, setPromoList] = useState([]);\r\n\r\n  const dt = useRef(null);\r\n\r\n  useEffect(() => {\r\n    document.title = t(\"common:title.promotionList\");\r\n\r\n    return () => {\r\n      document.title = \"common:title.homepage\";\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let params = getParams(lazyParams);\r\n    posService.getPromoList(params).then((data) => {\r\n      setPromoList(data.promoList);\r\n      setTotalRecords(data.totalRows);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: 'Error Message', detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => { setLoading(false) })\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [lazyParams]);\r\n\r\n  const getParams = (lazyParams) => {\r\n    const params = {};\r\n    const filters = lazyParams.filters;\r\n\r\n    if (lazyParams.page && lazyParams.page >= 0) params.pageIndex = lazyParams.page;\r\n    if (lazyParams.rows) params.pageSize = lazyParams.rows;\r\n    if (lazyParams.sortField && lazyParams.sortOrder) params.orderByField = lazyParams.sortOrder === 1 ? lazyParams.sortField : \"-\" + lazyParams.sortField;\r\n\r\n    if (filters && Object.keys(filters).length !== 0) {\r\n      for (const key in filters) {\r\n        if (Object.hasOwnProperty.call(filters, key)) {\r\n          const filter = filters[key];\r\n          const matchMode = filter.matchMode;\r\n          const value = filter.value;\r\n          if (value == null || value === \"\") continue;\r\n          switch (matchMode) {\r\n            case \"timestamprange\":\r\n              params[key + \"From\"] = value[0].getTime(); //get beginning of the day\r\n              params[key + \"Thru\"] = value[1].getTime() + 86400000 - 1; //get end of the day\r\n              break;\r\n            case \"contains\":\r\n              params[key + \"Term\"] = value;\r\n              break;\r\n            case \"in\":\r\n              params[key + \"s\"] = value.join();\r\n              break;\r\n            case \"equals\":\r\n            case \"not-equals\":\r\n            case \"greater\":\r\n            case \"greater-equals\":\r\n            case \"less\":\r\n            case \"less-equals\":\r\n              params[key + \"Str\"] = value;\r\n              params[key + \"Op\"] = matchMode;\r\n              break;\r\n            case \"is-not-null\":\r\n            case \"is-null\":\r\n              params[key + \"Op\"] = matchMode;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return params;\r\n  };\r\n\r\n  const filterDate = (value, filter) => {\r\n    if (filter === undefined || filter === null || (typeof filter === 'string' && filter.trim() === '')) {\r\n      return true;\r\n    }\r\n\r\n    if (value === undefined || value === null) {\r\n      return false;\r\n    }\r\n\r\n    return value === formatDate(filter);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n\r\n    if (month < 10) {\r\n      month = '0' + month;\r\n    }\r\n\r\n    if (day < 10) {\r\n      day = '0' + day;\r\n    }\r\n\r\n    return date.getFullYear() + '-' + month + '-' + day;\r\n  };\r\n\r\n  const promotionIdTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>{rowData.storePromotionId}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const promoNameTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>{rowData.itemDescription}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const storeTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>{rowData.storeName}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const fromDateTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        {rowData.fromDate && <Moment format=\"DD/MM/YYYY\">{rowData.fromDate}</Moment>}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const thruDateTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        {rowData.thruDate && <Moment format=\"DD/MM/YYYY\">{rowData.thruDate}</Moment>}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const onFilterDateChange = (e) => {\r\n    let obj = e.target;\r\n\r\n    if (obj.id === 'fromDate') {\r\n      setFromDateRange(obj.value);\r\n    }\r\n\r\n    if (obj.id === 'thruDate') {\r\n      setThruDateRange(obj.value);\r\n    }\r\n\r\n    if (obj.value == null || (obj.value[0] != null && obj.value[1] != null)) {\r\n      //obj.value.map((item) => moment(item).format(\"YYYY-MM-DD\")),\r\n      dt.current.filter(obj.value, obj.id, \"timestamprange\");\r\n    }\r\n    //delete dt.current.props.filters[obj.id];\r\n  };\r\n\r\n  const monthNavigatorTemplate = (e) =>\r\n    <Dropdown value={e.value} options={e.options} onChange={(event) => e.onChange(event.originalEvent, event.value)} style={{ lineHeight: 1 }}></Dropdown>;\r\n\r\n  const yearNavigatorTemplate = (e) =>\r\n    <Dropdown value={e.value} options={e.options} onChange={(event) => e.onChange(event.originalEvent, event.value)} className=\"p-ml-2\" style={{ lineHeight: 1 }}></Dropdown>;\r\n\r\n\r\n  const dateFilter = (id, value) => (\r\n    <Calendar id={id} selectionMode=\"range\" readOnlyInput value={value} onChange={onFilterDateChange} placeholder=\"\" locale={i18n.language}\r\n      monthNavigator yearNavigator showButtonBar yearRange=\"2010:2030\" monthNavigatorTemplate={monthNavigatorTemplate} yearNavigatorTemplate={yearNavigatorTemplate} ></Calendar>\r\n  );\r\n\r\n  const onPage = (e) => {\r\n    setLazyParams({ ...lazyParams, ...e });\r\n  };\r\n\r\n  const onFilter = (e) => {\r\n    setLazyParams({ ...lazyParams, ...e, first: 0 });\r\n  }\r\n\r\n  const onSort = (e) => {\r\n    setLazyParams({ ...lazyParams, ...e});\r\n  }\r\n\r\n  const emptyMessage = <p style={{textAlign: 'center'}}>{t('emptyData')}</p>;\r\n\r\n  return (\r\n    <div className=\"datatable-filter-demo\">\r\n      <div className=\"card\">\r\n        <div className=\"p-grid\">\r\n          <div className=\"p-col-12 p-md-8\">\r\n              <h5>{t('title.promotionList')}</h5>\r\n          </div>\r\n          <div className=\"p-col-12 p-md-4\">\r\n              <div className=\"p-grid\">\r\n                  <div className=\"p-col-12 p-md-8\"></div>\r\n                  <div className=\"p-col-12 p-md-4\">\r\n                      {\r\n                          userProfile.roles.includes('ADMIN') && \r\n                          <Button label={t('common:homepage.sales.Create')} icon=\"pi pi-plus\" className=\"p-button-text\" onClick={(e) => history.push(\"/sales/salesman/create\")} />\r\n                      }\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n      \r\n        <DataTable \r\n          ref={dt} value={promoList} filters={lazyParams.filters} className=\"p-datatable-customers\" \r\n          dataKey=\"id\" paginator lazy first={lazyParams.first} rows={lazyParams.rows}\r\n          onPage={onPage} onFilter={onFilter} onSort={onSort} selectionMode=\"single\"\r\n          sortField={lazyParams.sortField} sortOrder={lazyParams.sortOrder} rowHover \r\n          totalRecords={totalRecords} rowsPerPageOptions={[5, 10, 20, 50, 100]}\r\n          paginatorTemplate=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\"\r\n          currentPageReportTemplate=\"{first} - {last} of {totalRecords}\" \r\n          emptyMessage={emptyMessage} loading={loading} paginatorPosition=\"bottom\" \r\n          onRowClick={(e) => history.push(\"/sales/promotion/detail/\" + e.data.storePromotionId)}\r\n        >\r\n\r\n          <Column field=\"storePromotionId\" sortable header={t('pos.promoCode')} body={promotionIdTemplate} filter filterPlaceholder={t('search')} filterMatchMode=\"contains\" />\r\n          \r\n          <Column field=\"itemDescription\" sortable header={t('pos.promoName')} body={promoNameTemplate} filter filterPlaceholder={t('search')} filterMatchMode=\"contains\" />\r\n\r\n          <Column field=\"storeName\" sortable header={t('productStore')} body={storeTemplate} filter filterPlaceholder={t('search')} filterMatchMode=\"contains\" />\r\n\r\n          <Column field=\"fromDate\" filterField=\"fromDate\" header={t('pos.startTime')} body={fromDateTemplate} sortable\r\n            filter filterElement={dateFilter(\"fromDate\", fromDateRange)} filterFunction={filterDate} />\r\n\r\n          <Column field=\"thruDate\" filterField=\"thruDate\" header={t('pos.endTime')} body={thruDateTemplate} sortable\r\n            filter filterElement={dateFilter(\"thruDate\", thruDateRange)} filterFunction={filterDate} />\r\n        </DataTable>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}