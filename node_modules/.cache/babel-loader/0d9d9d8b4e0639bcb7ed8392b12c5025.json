{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\components\\\\accounting\\\\ArInvoiceAging.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { Button } from 'primereact/button';\nimport Moment from \"react-moment\";\nimport { Calendar } from \"primereact/calendar\";\nimport { useTranslation } from \"react-i18next\";\nimport { ArInvoiceAgingService } from \"../../service/accounting/ArInvoiceAgingService\";\nimport { InputSwitch } from 'primereact/inputswitch'; // import { useHistory } from 'react-router-dom';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar date = new Date();\nvar firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\nvar lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0); // DataGrid Hóa đơn phải thu. Dialog thêm mới Hóa đơn phải thu.\n\nexport var ArInvoiceAging = function ArInvoiceAging() {\n  _s();\n\n  var dt = useRef(null); // const history = useHistory();\n  // const [selectedItem, setSelectedItem] = useState(null);  \n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t; // const [invoices, setInvoices] = useState(null);\n  // const [loading, setLoading] = useState(false);\n  // const [dialog, setDialog] = useState(false);\n  // const [submitted, setSubmitted] = useState(false);\n  // const [parties, setParties] = useState(null);\n  // const [invoiceTypes, setInvoiceTypes] = useState(null);\n\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      agingInvoices = _useState2[0],\n      setAgingInvoices = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      valueFromDate = _useState4[0],\n      setValueFromDate = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      valueToDate = _useState6[0],\n      setValueToDate = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      IsUnknownDueDate = _useState8[0],\n      setIsUnknownDueDate = _useState8[1];\n\n  var _useState9 = useState({\n    first: 0,\n    rows: 10,\n    page: 0,\n    sortField: \"deliveryClusterId\",\n    sortOrder: -1\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      lazyParams = _useState10[0],\n      setLazyParams = _useState10[1]; // let loadLazyTimeout = null;\n\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      totalRecords = _useState12[0],\n      setTotalRecords = _useState12[1]; // const enumService = new EnumService();\n\n\n  useEffect(function () {\n    var arInvoiceAgingService = new ArInvoiceAgingService();\n    arInvoiceAgingService.getArInvoiceAging().then(function (data) {\n      setAgingInvoices(data);\n      setTotalRecords(data.length); // !\n    }); // const invoiceReceivableService = new InvoiceReceivableService();\n    // const enumService = new EnumService();\n    // invoiceReceivableService.getInvoices().then(data => {\n    //   setInvoices(data);\n    // });\n    // enumService.getEnums({'enumTypeId': 'InvoiceType', \"pageNoLimit\": true}).then( data =>{\n    //   setInvoiceTypes(data.enumList);\n    // });\n    // invoiceReceivableService.getListPartyId().then(data => {\n    //   setParties(data.partyIdList);\n    // });\n\n    setValueFromDate(firstDay);\n    setValueToDate(lastDay);\n  }, [lazyParams]); // const invoicesReceivableTableHeader = (\n  //   <div className=\"table-header\">\n  //     {t('acc.invReceivable.dataGridHeader')}\n  //   </div>\n  // );\n\n  var onFilter = function onFilter(event) {\n    var _lazyParams = _objectSpread(_objectSpread({}, lazyParams), event);\n\n    _lazyParams['first'] = 0;\n    setLazyParams(_lazyParams);\n  };\n\n  var bodyTemplate = function bodyTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, _this), data[props.field]]\n    }, void 0, true);\n  }; // http://localhost:8080/#/accounting3/333\n  // const linkTemplate = (data, props) => {\n  //   let url = \"/#/editInvoice/\" + data[props.field];\n  //   return (\n  //     <>\n  //       <span className=\"p-column-title\">{props.header}</span>\n  //       <a href={url}>{data[props.field]}</a>\n  //     </>\n  //   );\n  // };\n\n\n  var onPage = function onPage(event) {\n    var _lazyParams = _objectSpread(_objectSpread({}, lazyParams), event);\n\n    setLazyParams(_lazyParams);\n  };\n\n  var onSort = function onSort(event) {\n    var _lazyParams = _objectSpread(_objectSpread({}, lazyParams), event);\n\n    setLazyParams(_lazyParams);\n  };\n\n  var timeTemplate = function timeTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Moment, {\n        format: \"DD/MM/YYYY\",\n        children: data[props.field] ? data[props.field] : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true);\n  }; // function search(){\n  //   ServiceHandle.get(Const.API.AgingInvoices2_Acc,\n  //     {\n  //       startDate: valueFromDate.toISOString(),\n  //       toDate: valueToDate.toISOString(),\n  //       isUndefinedDueDate: IsUnknownDueDate\n  //     },\n  //     {\n  //       headers: {\n  //         moquiSessionToken: getTokenCookie()\n  //       }\n  //     },\n  //   )\n  //     .then(data => {\n  //       setAgingInvoices(data.resultList);\n  //         // console.log(data);\n  //     })\n  //     .catch(function (error) {\n  //       // console.log(error);\n  //     });\n  // }\n\n\n  function currencyFormat(num) {\n    return num.toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.');\n  }\n\n  var moneyTemplate = function moneyTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"money\",\n        children: currencyFormat(data[props.field])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12 p-md-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name3\",\n            className: \"p-col-6 p-mb-6 p-md-6 p-mb-md-6\",\n            children: t('acc.ARinvoiceAging.startDate')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-6 p-md-6\",\n            children: /*#__PURE__*/_jsxDEV(Calendar, {\n              inputId: \"calendar\",\n              value: valueFromDate,\n              onChange: function onChange(e) {\n                return setValueFromDate(e.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email3\",\n            className: \"p-col-6 p-mb-6 p-md-6 p-mb-md-6\",\n            children: t('acc.ARinvoiceAging.toDate')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-6 p-md-6\",\n            children: /*#__PURE__*/_jsxDEV(Calendar, {\n              inputId: \"calendar\",\n              value: valueToDate,\n              onChange: function onChange(e) {\n                return setValueToDate(e.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email3\",\n            className: \"p-col-6 p-mb-6 p-md-6 p-mb-md-6\",\n            children: t('acc.ARinvoiceAging.dueDateIsUnknown')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-6 p-md-6\",\n            children: /*#__PURE__*/_jsxDEV(InputSwitch, {\n              checked: IsUnknownDueDate,\n              onChange: function onChange(e) {\n                return setIsUnknownDueDate(e.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flexgrid-demo\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-align-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              label: t('acc.ARinvoiceAging.search'),\n              icon: \"pi pi-save\",\n              onClick: null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 34\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid table-demo\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(DataTable, {\n            ref: dt,\n            value: agingInvoices,\n            paginator: true,\n            className: \"p-datatable-customers\",\n            dataKey: \"invoiceId\",\n            emptyMessage: t('acc.invReceivable.NoReceivableInvoiceFound'),\n            selectionMode: \"single\",\n            filters: true,\n            onFilter: onFilter,\n            first: lazyParams.first,\n            rows: lazyParams.rows,\n            totalRecords: totalRecords,\n            onPage: onPage,\n            rowsPerPageOptions: [10, 25, 50, 100],\n            paginatorTemplate: \"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\",\n            currentPageReportTemplate: \"Hi\\u1EC3n th\\u1ECB {first} - {last} trong t\\u1ED5ng s\\u1ED1 {totalRecords} b\\u1EA3n ghi\",\n            lazy: true,\n            onSort: onSort,\n            sortField: lazyParams.sortField,\n            sortOrder: lazyParams.sortOrder,\n            rowHover: true,\n            resizableColumns: true,\n            columnResizeMode: \"fit\",\n            reorderableColumns: true,\n            showGridlines: true,\n            children: [/*#__PURE__*/_jsxDEV(Column, {\n              field: \"invoiceId\",\n              header: t('acc.ARinvoiceAging.code'),\n              sortable: true,\n              body: bodyTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"toName\",\n              header: t('acc.ARinvoiceAging.toName'),\n              sortable: true,\n              body: bodyTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"invoiceDate\",\n              header: t('acc.ARinvoiceAging.invoiceDate'),\n              sortable: true,\n              body: timeTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"dueDate\",\n              header: t('acc.ARinvoiceAging.dueDate'),\n              sortable: true,\n              body: timeTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"statusId\",\n              header: t('acc.ARinvoiceAging.statusId'),\n              sortable: true,\n              body: bodyTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"unpaidTotal\",\n              header: t('acc.ARinvoiceAging.unpaidTotal'),\n              sortable: true,\n              body: moneyTemplate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 13\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(ArInvoiceAging, \"uyXolfEZrRk+DF9PSdnvbNX2UNE=\", false, function () {\n  return [useTranslation];\n});\n\n_c = ArInvoiceAging;\n\nvar _c;\n\n$RefreshReg$(_c, \"ArInvoiceAging\");","map":{"version":3,"sources":["D:/eway/src/components/accounting/ArInvoiceAging.js"],"names":["React","useState","useEffect","useRef","DataTable","Column","Button","Moment","Calendar","useTranslation","ArInvoiceAgingService","InputSwitch","date","Date","firstDay","getFullYear","getMonth","lastDay","ArInvoiceAging","dt","t","agingInvoices","setAgingInvoices","valueFromDate","setValueFromDate","valueToDate","setValueToDate","IsUnknownDueDate","setIsUnknownDueDate","first","rows","page","sortField","sortOrder","lazyParams","setLazyParams","totalRecords","setTotalRecords","arInvoiceAgingService","getArInvoiceAging","then","data","length","onFilter","event","_lazyParams","bodyTemplate","props","header","field","onPage","onSort","timeTemplate","currencyFormat","num","toFixed","replace","moneyTemplate","e","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { Button } from 'primereact/button';\r\nimport Moment from \"react-moment\";\r\nimport {Calendar} from \"primereact/calendar\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {ArInvoiceAgingService} from \"../../service/accounting/ArInvoiceAgingService\";\r\nimport { InputSwitch } from 'primereact/inputswitch';\r\n// import { useHistory } from 'react-router-dom';\r\n\r\nvar date = new Date();\r\nvar firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\r\nvar lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n\r\n// DataGrid Hóa đơn phải thu. Dialog thêm mới Hóa đơn phải thu.\r\nexport const ArInvoiceAging = () => {\r\n  const dt = useRef(null);\r\n  // const history = useHistory();\r\n  // const [selectedItem, setSelectedItem] = useState(null);  \r\n  const {t} = useTranslation('common');\r\n  // const [invoices, setInvoices] = useState(null);\r\n  // const [loading, setLoading] = useState(false);\r\n  // const [dialog, setDialog] = useState(false);\r\n  // const [submitted, setSubmitted] = useState(false);\r\n  // const [parties, setParties] = useState(null);\r\n  // const [invoiceTypes, setInvoiceTypes] = useState(null);\r\n  const [agingInvoices, setAgingInvoices] = useState(null);\r\n  const [valueFromDate, setValueFromDate] = useState('');\r\n  const [valueToDate, setValueToDate] = useState('');\r\n  const [IsUnknownDueDate, setIsUnknownDueDate] = useState(false);\r\n\r\n  const [lazyParams, setLazyParams] = useState({\r\n    first: 0,\r\n    rows: 10,\r\n    page: 0,\r\n    sortField: \"deliveryClusterId\",\r\n    sortOrder: -1\r\n  });\r\n  // let loadLazyTimeout = null;\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  // const enumService = new EnumService();\r\n\r\n  useEffect(() => {\r\n    const arInvoiceAgingService = new ArInvoiceAgingService();\r\n    arInvoiceAgingService.getArInvoiceAging().then(data => {\r\n      setAgingInvoices(data);\r\n      setTotalRecords(data.length); // !\r\n    });\r\n    // const invoiceReceivableService = new InvoiceReceivableService();\r\n    // const enumService = new EnumService();\r\n    // invoiceReceivableService.getInvoices().then(data => {\r\n    //   setInvoices(data);\r\n    // });\r\n    // enumService.getEnums({'enumTypeId': 'InvoiceType', \"pageNoLimit\": true}).then( data =>{\r\n    //   setInvoiceTypes(data.enumList);\r\n    // });\r\n    // invoiceReceivableService.getListPartyId().then(data => {\r\n    //   setParties(data.partyIdList);\r\n    // });\r\n\r\n    setValueFromDate(firstDay);\r\n    setValueToDate(lastDay);\r\n  }, [lazyParams]);\r\n\r\n  // const invoicesReceivableTableHeader = (\r\n  //   <div className=\"table-header\">\r\n  //     {t('acc.invReceivable.dataGridHeader')}\r\n  //   </div>\r\n  // );\r\n\r\n  const onFilter = (event) => {\r\n    let _lazyParams = { ...lazyParams, ...event };\r\n    _lazyParams['first'] = 0;\r\n    setLazyParams(_lazyParams);\r\n  }\r\n\r\n  const bodyTemplate = (data, props) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{props.header}</span>\r\n        {data[props.field]}\r\n      </>\r\n    );\r\n  };\r\n\r\n  // http://localhost:8080/#/accounting3/333\r\n  // const linkTemplate = (data, props) => {\r\n  //   let url = \"/#/editInvoice/\" + data[props.field];\r\n  //   return (\r\n  //     <>\r\n  //       <span className=\"p-column-title\">{props.header}</span>\r\n  //       <a href={url}>{data[props.field]}</a>\r\n  //     </>\r\n  //   );\r\n  // };\r\n\r\n  const onPage = (event) => {\r\n    let _lazyParams = { ...lazyParams, ...event };\r\n    setLazyParams(_lazyParams);\r\n  }\r\n\r\n  const onSort = (event) => {\r\n    let _lazyParams = { ...lazyParams, ...event };\r\n    setLazyParams(_lazyParams);\r\n  }\r\n\r\n  const timeTemplate = (data, props) => {\r\n    return (\r\n      <>\r\n        <span className=\"p-column-title\">{props.header}</span>\r\n        <Moment format=\"DD/MM/YYYY\">{data[props.field] ? data[props.field] : \"\"}</Moment>\r\n      </>\r\n    );\r\n  };\r\n\r\n  // function search(){\r\n  //   ServiceHandle.get(Const.API.AgingInvoices2_Acc,\r\n  //     {\r\n  //       startDate: valueFromDate.toISOString(),\r\n  //       toDate: valueToDate.toISOString(),\r\n  //       isUndefinedDueDate: IsUnknownDueDate\r\n  //     },\r\n  //     {\r\n  //       headers: {\r\n  //         moquiSessionToken: getTokenCookie()\r\n  //       }\r\n  //     },\r\n  //   )\r\n  //     .then(data => {\r\n  //       setAgingInvoices(data.resultList);\r\n  //         // console.log(data);\r\n  //     })\r\n  //     .catch(function (error) {\r\n  //       // console.log(error);\r\n  //     });\r\n  // }\r\n\r\n  function currencyFormat(num) {\r\n    return num.toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.')\r\n  }\r\n\r\n  const moneyTemplate = (data, props) => {\r\n    return (\r\n        <>\r\n          <span className=\"money\">{currencyFormat(data[props.field])}</span>\r\n        </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <div className=\"p-col-12 p-md-12\">\r\n      <div className=\"card p-fluid\">\r\n\r\n        <div className=\"p-field p-grid\">\r\n          <label htmlFor=\"name3\" className=\"p-col-6 p-mb-6 p-md-6 p-mb-md-6\">{t('acc.ARinvoiceAging.startDate')}</label>\r\n          <div className=\"p-col-6 p-md-6\">\r\n            <Calendar inputId=\"calendar\" value={valueFromDate} onChange={(e) => setValueFromDate(e.value)}></Calendar>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-field p-grid\">\r\n          <label htmlFor=\"email3\" className=\"p-col-6 p-mb-6 p-md-6 p-mb-md-6\">{t('acc.ARinvoiceAging.toDate')}</label>\r\n          <div className=\"p-col-6 p-md-6\">\r\n            <Calendar inputId=\"calendar\" value={valueToDate} onChange={(e) => setValueToDate(e.value)}></Calendar>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-field p-grid\">\r\n          <label htmlFor=\"email3\" className=\"p-col-6 p-mb-6 p-md-6 p-mb-md-6\">{t('acc.ARinvoiceAging.dueDateIsUnknown')}</label>\r\n          <div className=\"p-col-6 p-md-6\">\r\n            <InputSwitch checked={IsUnknownDueDate} onChange={(e) => setIsUnknownDueDate(e.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n      <div className=\"flexgrid-demo\">\r\n        <div className=\"p-grid p-align-center\">\r\n          <div className=\"p-col\">\r\n            <div className=\"box\"><Button type=\"button\" label={t('acc.ARinvoiceAging.search')} icon=\"pi pi-save\" onClick={null}></Button></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    <div className=\"p-grid table-demo\">\r\n      <div className=\"p-col-12\">\r\n        <div className=\"card\">\r\n            <DataTable ref={dt} value={agingInvoices} paginator className=\"p-datatable-customers\" dataKey=\"invoiceId\"\r\n                       emptyMessage={t('acc.invReceivable.NoReceivableInvoiceFound')}\r\n                       selectionMode=\"single\" \r\n                       filters onFilter={onFilter} first={lazyParams.first} rows={lazyParams.rows} totalRecords={totalRecords} onPage={onPage}\r\n                       rowsPerPageOptions={[10, 25, 50, 100]}\r\n                       paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n                       currentPageReportTemplate=\"Hiển thị {first} - {last} trong tổng số {totalRecords} bản ghi\" lazy onSort={onSort} sortField={lazyParams.sortField} sortOrder={lazyParams.sortOrder} rowHover resizableColumns columnResizeMode=\"fit\" reorderableColumns showGridlines>\r\n            <Column field=\"invoiceId\" header={t('acc.ARinvoiceAging.code')} sortable body={bodyTemplate}/>\r\n            <Column field=\"toName\" header={t('acc.ARinvoiceAging.toName')} sortable body={bodyTemplate}/>\r\n            <Column field=\"invoiceDate\" header={t('acc.ARinvoiceAging.invoiceDate')} sortable body={timeTemplate}/>\r\n            <Column field=\"dueDate\" header={t('acc.ARinvoiceAging.dueDate')} sortable body={timeTemplate}/>\r\n            <Column field=\"statusId\" header={t('acc.ARinvoiceAging.statusId')} sortable body={bodyTemplate}/>\r\n            <Column field=\"unpaidTotal\" header={t('acc.ARinvoiceAging.unpaidTotal')} sortable body={moneyTemplate}/>\r\n          </DataTable>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}