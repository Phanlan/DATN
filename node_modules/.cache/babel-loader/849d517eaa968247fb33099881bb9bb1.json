{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\components\\\\accounting\\\\NewARInvoice.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { InputText } from \"primereact/inputtext\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { InvoiceReceivableService } from \"../../service/accounting/InvoiceReceivableService\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { useTranslation } from \"react-i18next\";\nimport { Button } from \"primereact/button\";\nimport { NewARInvoiceService } from \"../../service/accounting/NewARInvoiceService\";\nimport { DataTable } from \"primereact/datatable\";\nimport { Column } from \"primereact/column\";\nimport { Dialog } from \"primereact/dialog\";\nimport { InputNumber } from \"primereact/inputnumber\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Toast } from \"primereact/toast\";\nimport { Calendar } from \"primereact/calendar\"; // import { useHistory } from 'react-router-dom';\n\nimport { EnumService } from \"../../service/EnumService\";\nimport { UomService } from \"../../service/UomService\";\nimport { useForm, Controller } from 'react-hook-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var NewARInvoice = function NewARInvoice() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      invoiceDescription = _useState2[0],\n      setInvoiceDescription = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      invoiceTypes = _useState4[0],\n      setInvoiceTypes = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      parties = _useState6[0],\n      setParties = _useState6[1]; // const [partiesWithDesc, setPartiesWithDesc] = useState(null);\n\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      toParty = _useState8[0],\n      setToParty = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      invoiceType = _useState10[0],\n      setInvoiceType = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      invoiceDate = _useState12[0],\n      setInvoiceDate = _useState12[1]; // const history = useHistory();\n\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dialog = _useState14[0],\n      setDialog = _useState14[1]; // const [submitted, setSubmitted] = useState(false);\n\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      itemTypeEnumId = _React$useState2[0],\n      setItemTypeEnumId = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      description = _React$useState4[0],\n      setDescription = _React$useState4[1];\n\n  var _React$useState5 = React.useState(''),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      productId = _React$useState6[0],\n      setProductId = _React$useState6[1];\n\n  var _React$useState7 = React.useState(0),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      quantity = _React$useState8[0],\n      setQuantity = _React$useState8[1];\n\n  var _React$useState9 = React.useState(0),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      price = _React$useState10[0],\n      setPrice = _React$useState10[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      invoiceItemTypes = _useState16[0],\n      setInvoiceItemTypes = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      products = _useState18[0],\n      setProducts = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      invoiceItemCode = _useState20[0],\n      setInvoiceItemCode = _useState20[1];\n\n  var _useState21 = useState(null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      currencyUomId = _useState22[0],\n      setCurrencyUomId = _useState22[1];\n\n  var _useState23 = useState(null),\n      _useState24 = _slicedToArray(_useState23, 2),\n      currencies = _useState24[0],\n      setCurrencies = _useState24[1];\n\n  var _useState25 = useState(null),\n      _useState26 = _slicedToArray(_useState25, 2),\n      dueDate = _useState26[0],\n      setDueDate = _useState26[1];\n\n  var toast = useRef(null); // const [showMessage, setShowMessage] = useState(false);\n  // const [formData, setFormData] = useState({});\n\n  var defaultValues = {\n    itemTypeEnumId: '',\n    productId: '',\n    quantity: 0,\n    price: 0,\n    description: ''\n  };\n\n  var _useForm = useForm({\n    defaultValues: defaultValues\n  }),\n      control = _useForm.control,\n      errors = _useForm.formState.errors,\n      handleSubmit = _useForm.handleSubmit,\n      reset = _useForm.reset; // const wizardItems = [\n  //     {label: t('acc.newArInvoice.wizardStep1')},\n  //     {label: t('acc.newArInvoice.wizardStep2')},\n  //     {label: t('acc.newArInvoice.wizardStep3')}\n  // ];\n\n\n  useEffect(function () {\n    var invoiceReceivableService = new InvoiceReceivableService();\n    var enumService = new EnumService();\n    var uomService = new UomService();\n    enumService.getInvoiceTypes().then(function (data) {\n      setInvoiceTypes(data.enumList);\n    });\n    invoiceReceivableService.getListPartyId().then(function (data) {\n      setParties(data.partyIdList);\n    }); // const newARInvoiceService = new NewARInvoiceService();\n    // newARInvoiceService.getPartyWithDesc().then(data => {\n    //    setPartiesWithDesc(data);\n    // });\n\n    enumService.getItemTypes().then(function (data) {\n      setInvoiceItemTypes(data.enumList);\n    });\n    invoiceReceivableService.getListProducts().then(function (data) {\n      setProducts(data);\n    });\n    uomService.getCurrencyMeasure().then(function (data) {\n      setCurrencies(data.uomList);\n    });\n  }, []); // var indexTab = 0;\n  // function onSelectFunction(){\n  //     // console.log(\"selected..\");\n  // }\n\n  function currencyFormat(num) {\n    return num.toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.');\n  }\n\n  function amountFormat(num) {\n    return num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.');\n  }\n\n  var moneyTemplate = function moneyTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"money\",\n        children: currencyFormat(data[props.field])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false);\n  };\n\n  var amountTemplate = function amountTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"amount\",\n        children: amountFormat(data[props.field])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false);\n  };\n\n  var listReducer = function listReducer(state, action) {\n    switch (action.type) {\n      case 'ADD_ITEM':\n        return _objectSpread(_objectSpread({}, state), {}, {\n          list: state.list.concat({\n            itemTypeEnumId: action.itemTypeEnumId['enumId'],\n            productId: action.productId['productId'],\n            quantity: action.quantity,\n            price: action.price,\n            description: action.description,\n            id: action.id\n          })\n        });\n\n      case 'RESET':\n        return _objectSpread(_objectSpread({}, state), {}, {\n          list: undefined\n        });\n\n      default:\n        throw new Error();\n    }\n  };\n\n  var openNew = function openNew() {\n    setDialog(true);\n  };\n\n  var tableHeader = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"table-header\",\n    children: [t('acc.newArInvoice.invoiceItemsList'), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"p-input-icon-left\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        label: t('acc.invReceivable.addNew'),\n        icon: \"pi pi-plus\",\n        className: \"p-button-success p-mr-2 p-mb-2\",\n        onClick: openNew\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, _this);\n\n  var initialList = [// {\n    //     itemTypeEnumId: 'ItemAdvancePay',\n    //     productId: 'DEMO_SA_2',\n    //     quantity: 1,\n    //     price: 10000,\n    //     description: \"Hàng bán\",\n    //     id: '682db637-0f31-4847-9cdf-25ba9613a75c',\n    // },\n    // {\n    //     itemTypeEnumId: 'ItemAdvancePay',\n    //     productId: 'DEMO_VAR',\n    //     quantity: 2,\n    //     price: 20000,\n    //     description: \"Hàng giới thiệu không bán\",\n    //     id: '97d19478-3ab2-4aa1-b8cc-a1c3540f54aa',\n    // }\n  ];\n\n  var _React$useReducer = React.useReducer(listReducer, {\n    list: initialList,\n    isShowList: true\n  }),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      listData = _React$useReducer2[0],\n      dispatchListData = _React$useReducer2[1];\n\n  var bodyTemplate = function bodyTemplate(data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, _this), data[props.field]]\n    }, void 0, true);\n  };\n\n  var saveItemInCache = function saveItemInCache() {\n    // setSubmitted(true);\n    dispatchListData({\n      type: 'ADD_ITEM',\n      itemTypeEnumId: itemTypeEnumId,\n      productId: productId,\n      quantity: quantity,\n      price: price,\n      description: description,\n      id: uuidv4()\n    });\n    setItemTypeEnumId('');\n    setDescription('');\n    setProductId('');\n    setQuantity(0);\n    setPrice(0);\n    setDialog(false);\n  };\n\n  var hideDialog = function hideDialog() {\n    // setShowMessage(false)\n    // setSubmitted(false);\n    setDialog(false);\n  };\n\n  var dialogFooter = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      label: t('acc.newArInvoice.btnSave'),\n      icon: \"pi pi-check\",\n      className: \"p-button-text\",\n      onClick: saveItemInCache\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Button, {\n      label: t('acc.newArInvoice.btnSaveAndContinue'),\n      icon: \"pi pi-check\",\n      className: \"p-button-text\",\n      onClick: saveItemInCache\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Button, {\n      label: t('acc.newArInvoice.btnCancel'),\n      icon: \"pi pi-times\",\n      className: \"p-button-text\",\n      onClick: hideDialog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n\n  var onSubmit = function onSubmit(data) {\n    saveTo2Tables(); // setFormData(data);\n    // setShowMessage(true);\n\n    reset();\n  };\n\n  var saveTo2Tables = function saveTo2Tables() {\n    var fromPartyId = \"ORG_ZIZI_CORP\";\n    var currencyUomId = 'VND';\n    var data = {\n      \"fromPartyId\": fromPartyId,\n      \"invoiceTypeEnumId\": invoiceType.enumId,\n      \"invoiceDescription\": invoiceDescription,\n      \"toPartyId\": toParty,\n      \"invoiceDate\": invoiceDate,\n      \"dueDate\": dueDate,\n      \"currencyUomId\": currencyUomId\n    };\n    toast.current.show({\n      severity: 'success',\n      summary: t('acc.newArInvoice.noticeHeader'),\n      detail: t('acc.newArInvoice.noticeSuccess'),\n      life: 3000\n    }); // Save data to 2 table: invoice and invoice_item.\n\n    var newARInvoiceService = new NewARInvoiceService();\n    newARInvoiceService.saveAll(data).then(function (res) {\n      // setShowMessage(true);\n      if (res.data.invoiceId) {\n        // history.push(\"/accounting/receivable/newARinvoice/\" + res.data.invoiceId);\n        // Reset form inputs after submit success.\n        setInvoiceDate(\"\");\n        setToParty(\"\");\n        setInvoiceDescription(\"\");\n        setInvoiceTypes(\"\");\n        setDueDate(\"\");\n        setCurrencyUomId(\"\");\n        var param2 = listData.list;\n\n        for (var i = 0; i < param2.length; i++) {\n          var param3 = param2[i];\n          param3['invoiceId'] = res.data.invoiceId;\n          newARInvoiceService.saveInvoiceItems(param3, res.data.invoiceId).then(function (r) {\n            return r;\n          });\n        }\n\n        dispatchListData({\n          type: 'RESET',\n          itemTypeEnumId: itemTypeEnumId,\n          productId: productId,\n          quantity: quantity,\n          price: price,\n          description: description,\n          id: uuidv4()\n        });\n      }\n    }).then(function (res) {});\n  };\n\n  var getFormErrorMessage = function getFormErrorMessage(name) {\n    return errors[name] && /*#__PURE__*/_jsxDEV(\"small\", {\n      className: \"p-error\",\n      children: errors[name].message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 32\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ref: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid table-demo\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12 p-md-12\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Th\\xEAm m\\u1EDBi H\\xF3a \\u0111\\u01A1n ph\\u1EA3i thu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid table-demo\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid p-formgrid p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"dropdown4\",\n                  children: [t('acc.invReceivable.invoiceTypeLabel'), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"asterisk-require\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 101\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"invoiceTypeEnumId\",\n                  control: control,\n                  rules: {\n                    required: 'Loại hóa đơn là trường bắt buộc nhập.'\n                  },\n                  render: function render(_ref) {\n                    var field = _ref.field,\n                        fieldState = _ref.fieldState;\n                    return /*#__PURE__*/_jsxDEV(Dropdown, _objectSpread({\n                      id: \"dropdown4\",\n                      options: invoiceTypes,\n                      value: invoiceType,\n                      onChange: function onChange(e) {\n                        return setInvoiceType(e.value);\n                      },\n                      optionValue: \"enumId\",\n                      optionLabel: \"description\",\n                      appendTo: document.body\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('invoiceTypeEnumId')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"invoiceDescription\",\n                  className: \"p-col-fixed\",\n                  children: \"M\\xF4 t\\u1EA3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"name\",\n                  control: control,\n                  rules: {\n                    maxLength: 'Mô tả quá dài.'\n                  },\n                  render: function render(_ref2) {\n                    var field = _ref2.field,\n                        fieldState = _ref2.fieldState;\n                    return /*#__PURE__*/_jsxDEV(InputText, _objectSpread({\n                      id: \"invoiceDescription\",\n                      value: invoiceDescription,\n                      onChange: function onChange(e) {\n                        return setInvoiceDescription(e.target.value);\n                      }\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('invoiceDescription')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"dropdown2\",\n                  children: [t('acc.newArInvoice.toParty'), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"asterisk-require\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 91\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"toPartyId\",\n                  control: control,\n                  rules: {\n                    required: 'Bên nhận hóa đơn không được để trống.'\n                  },\n                  render: function render(_ref3) {\n                    var field = _ref3.field,\n                        fieldState = _ref3.fieldState;\n                    return /*#__PURE__*/_jsxDEV(Dropdown, _objectSpread({\n                      id: \"dropdown2\",\n                      options: parties,\n                      value: toParty,\n                      onChange: function onChange(e) {\n                        return setToParty(e.value);\n                      },\n                      appendTo: document.body\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('toPartyId')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"invoiceDateInput\",\n                  children: [t('acc.newArInvoice.invoiceDate'), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"asterisk-require\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 102\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"invoiceDate\",\n                  control: control,\n                  rules: {\n                    required: 'Ngày hóa đơn bắt buộc nhập.'\n                  },\n                  render: function render(_ref4) {\n                    var field = _ref4.field,\n                        fieldState = _ref4.fieldState;\n                    return /*#__PURE__*/_jsxDEV(Calendar, _objectSpread({\n                      id: \"invoiceDateInput\",\n                      showIcon: true,\n                      value: invoiceDate,\n                      onChange: function onChange(e) {\n                        return setInvoiceDate(e.value);\n                      },\n                      appendTo: document.body\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('invoiceDate')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"dueDateInput\",\n                  children: [t('acc.newArInvoice.dueDate'), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"asterisk-require\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 94\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"dueDate\",\n                  control: control,\n                  rules: {\n                    required: 'Ngày đến hạn thanh toán của hóa đơn bắt buộc nhập.'\n                  },\n                  render: function render(_ref5) {\n                    var field = _ref5.field,\n                        fieldState = _ref5.fieldState;\n                    return /*#__PURE__*/_jsxDEV(Calendar, _objectSpread({\n                      id: \"dueDateInput\",\n                      showIcon: true,\n                      value: dueDate,\n                      onChange: function onChange(e) {\n                        return setDueDate(e.value);\n                      },\n                      appendTo: document.body\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('dueDate')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-field p-col-12 p-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"currencyInput\",\n                  children: t('acc.newArInvoice.currencyUOM')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"currencyUomId\",\n                  control: control,\n                  render: function render(_ref6) {\n                    var field = _ref6.field;\n                    return /*#__PURE__*/_jsxDEV(Dropdown, _objectSpread({\n                      id: \"currencyInput\",\n                      options: currencies,\n                      value: currencyUomId,\n                      onChange: function onChange(e) {\n                        return setCurrencyUomId(e.value);\n                      },\n                      optionLabel: \"description\",\n                      appendTo: document.body,\n                      filter: true,\n                      filterBy: \"description\",\n                      showClear: true\n                    }, field), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 37\n                    }, _this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 33\n                }, _this), getFormErrorMessage('currencyUomId')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(Dialog, {\n        visible: dialog,\n        style: {\n          width: '450px'\n        },\n        header: \"Th\\xEAm m\\u1EDBi\",\n        modal: true,\n        className: \"p-fluid\",\n        footer: dialogFooter,\n        onHide: hideDialog,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"ddCode\",\n            children: [t('acc.newArInvoice.detailGridCode'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 83\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(InputText, {\n            id: \"ddCode\",\n            disabled: true,\n            value: invoiceItemCode,\n            onChange: function onChange(e) {\n              return setInvoiceItemCode(e.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"ddInvoiceItemTypes\",\n            children: [t('acc.newArInvoice.detailGridInvoiceItemType'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 106\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            id: \"ddInvoiceItemTypes\",\n            options: invoiceItemTypes,\n            value: itemTypeEnumId,\n            onChange: function onChange(e) {\n              return setItemTypeEnumId(e.value);\n            },\n            appendTo: document.body,\n            optionLabel: \"description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"ddProduct\",\n            children: [t('acc.newArInvoice.detailGridProduct'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 89\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            id: \"ddProduct\",\n            options: products,\n            value: productId,\n            onChange: function onChange(e) {\n              return setProductId(e.value);\n            },\n            appendTo: document.body,\n            optionLabel: \"productName\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"nbQuantity\",\n            children: [t('acc.newArInvoice.detailGridQuantity'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 91\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(InputNumber, {\n            id: \"nbQuantity\",\n            value: quantity,\n            onChange: function onChange(e) {\n              return setQuantity(e.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"nbPrice\",\n            children: [t('acc.newArInvoice.detailGridPrice'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 85\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(InputNumber, {\n            id: \"nbPrice\",\n            value: price,\n            onChange: function onChange(e) {\n              return setPrice(e.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"txtDescription\",\n            children: [t('acc.newArInvoice.detailGridDescription'), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"asterisk-require\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 98\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(InputText, {\n            type: \"text\",\n            id: \"txtDescription\",\n            value: description,\n            onChange: function onChange(e) {\n              return setDescription(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid table-demo\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(DataTable, {\n              value: listData.list,\n              paginator: true,\n              className: \"p-datatable-customers\",\n              rows: 10,\n              dataKey: \"enumId\",\n              emptyMessage: t('acc.newArInvoice.noInvoiceItem'),\n              header: tableHeader,\n              rowHover: true,\n              resizableColumns: true,\n              columnResizeMode: \"fit\",\n              showGridlines: true,\n              children: [/*#__PURE__*/_jsxDEV(Column, {\n                header: t('acc.newArInvoice.detailGridCode'),\n                body: bodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"itemTypeEnumId\",\n                header: t('acc.newArInvoice.detailGridInvoiceItemType'),\n                body: bodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"productId\",\n                header: t('acc.newArInvoice.detailGridProduct'),\n                body: bodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"quantity\",\n                header: t('acc.newArInvoice.detailGridQuantity'),\n                body: amountTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"price\",\n                header: t('acc.newArInvoice.detailGridPrice'),\n                body: moneyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"description\",\n                header: t('acc.newArInvoice.detailGridDescription'),\n                body: bodyTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexgrid-demo\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid p-align-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  label: t('acc.newArInvoice.btnSave'),\n                  icon: \"pi pi-save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 50\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 29\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 17\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(NewARInvoice, \"XReSzVxiUMTIYJ4uAI6rI95laTI=\", false, function () {\n  return [useTranslation, useForm];\n});\n\n_c = NewARInvoice;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewARInvoice\");","map":{"version":3,"sources":["D:/eway/src/components/accounting/NewARInvoice.js"],"names":["InputText","React","useEffect","useRef","useState","InvoiceReceivableService","Dropdown","useTranslation","Button","NewARInvoiceService","DataTable","Column","Dialog","InputNumber","v4","uuidv4","Toast","Calendar","EnumService","UomService","useForm","Controller","NewARInvoice","t","invoiceDescription","setInvoiceDescription","invoiceTypes","setInvoiceTypes","parties","setParties","toParty","setToParty","invoiceType","setInvoiceType","invoiceDate","setInvoiceDate","dialog","setDialog","itemTypeEnumId","setItemTypeEnumId","description","setDescription","productId","setProductId","quantity","setQuantity","price","setPrice","invoiceItemTypes","setInvoiceItemTypes","products","setProducts","invoiceItemCode","setInvoiceItemCode","currencyUomId","setCurrencyUomId","currencies","setCurrencies","dueDate","setDueDate","toast","defaultValues","control","errors","formState","handleSubmit","reset","invoiceReceivableService","enumService","uomService","getInvoiceTypes","then","data","enumList","getListPartyId","partyIdList","getItemTypes","getListProducts","getCurrencyMeasure","uomList","currencyFormat","num","toFixed","replace","amountFormat","moneyTemplate","props","field","amountTemplate","listReducer","state","action","type","list","concat","id","undefined","Error","openNew","tableHeader","initialList","useReducer","isShowList","listData","dispatchListData","bodyTemplate","header","saveItemInCache","hideDialog","dialogFooter","onSubmit","saveTo2Tables","fromPartyId","enumId","current","show","severity","summary","detail","life","newARInvoiceService","saveAll","res","invoiceId","param2","i","length","param3","saveInvoiceItems","r","getFormErrorMessage","name","message","required","fieldState","e","value","document","body","maxLength","target","width"],"mappings":"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","sourcesContent":["import {InputText} from \"primereact/inputtext\";\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {InvoiceReceivableService} from \"../../service/accounting/InvoiceReceivableService\";\r\nimport {Dropdown} from \"primereact/dropdown\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {Button} from \"primereact/button\";\r\nimport {NewARInvoiceService} from \"../../service/accounting/NewARInvoiceService\";\r\nimport {DataTable} from \"primereact/datatable\";\r\nimport {Column} from \"primereact/column\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {InputNumber} from \"primereact/inputnumber\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\nimport {Toast} from \"primereact/toast\";\r\nimport {Calendar} from \"primereact/calendar\";\r\n// import { useHistory } from 'react-router-dom';\r\nimport {EnumService} from \"../../service/EnumService\";\r\nimport {UomService} from \"../../service/UomService\";\r\nimport { useForm, Controller } from 'react-hook-form';\r\n\r\nexport const NewARInvoice = () => {\r\n    const {t} = useTranslation('common');\r\n    const [invoiceDescription, setInvoiceDescription] = useState('');\r\n    const [invoiceTypes, setInvoiceTypes] = useState(null);\r\n    const [parties, setParties] = useState(null);\r\n    // const [partiesWithDesc, setPartiesWithDesc] = useState(null);\r\n    const [toParty, setToParty] = useState(null);\r\n    const [invoiceType, setInvoiceType] = useState('');\r\n    const [invoiceDate, setInvoiceDate] = useState('');\r\n    // const history = useHistory();\r\n    const [dialog, setDialog] = useState(false);\r\n    // const [submitted, setSubmitted] = useState(false);\r\n    const [itemTypeEnumId, setItemTypeEnumId] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const [productId, setProductId] = React.useState('');\r\n    const [quantity, setQuantity] = React.useState(0);\r\n    const [price, setPrice] = React.useState(0);\r\n    const [invoiceItemTypes, setInvoiceItemTypes] = useState(null);\r\n    const [products, setProducts] = useState(null);\r\n    const [invoiceItemCode, setInvoiceItemCode] = useState(null);\r\n    const [currencyUomId, setCurrencyUomId] = useState(null);\r\n    const [currencies, setCurrencies] = useState(null);\r\n    const [dueDate, setDueDate] = useState(null);\r\n    const toast = useRef(null);\r\n    // const [showMessage, setShowMessage] = useState(false);\r\n    // const [formData, setFormData] = useState({});\r\n\r\n    const defaultValues = {\r\n        itemTypeEnumId: '',\r\n        productId: '',\r\n        quantity: 0,\r\n        price: 0,\r\n        description: ''\r\n    }\r\n\r\n    const { control, formState: { errors }, handleSubmit, reset } = useForm({ defaultValues });\r\n\r\n    // const wizardItems = [\r\n    //     {label: t('acc.newArInvoice.wizardStep1')},\r\n    //     {label: t('acc.newArInvoice.wizardStep2')},\r\n    //     {label: t('acc.newArInvoice.wizardStep3')}\r\n    // ];\r\n\r\n    useEffect(() => {\r\n        const invoiceReceivableService = new InvoiceReceivableService();\r\n        const enumService = new EnumService();\r\n        const uomService = new UomService();\r\n        enumService.getInvoiceTypes().then( data =>{\r\n            setInvoiceTypes(data.enumList);\r\n        });\r\n        invoiceReceivableService.getListPartyId().then(data => {\r\n            setParties(data.partyIdList);\r\n        });\r\n        // const newARInvoiceService = new NewARInvoiceService();\r\n        // newARInvoiceService.getPartyWithDesc().then(data => {\r\n        //    setPartiesWithDesc(data);\r\n        // });\r\n        enumService.getItemTypes().then( data =>{\r\n            setInvoiceItemTypes(data.enumList);\r\n        });\r\n        invoiceReceivableService.getListProducts().then(data => {\r\n            setProducts(data);\r\n        });\r\n        uomService.getCurrencyMeasure().then(data => {setCurrencies(data.uomList)});\r\n    }, []);\r\n\r\n    // var indexTab = 0;\r\n\r\n    // function onSelectFunction(){\r\n    //     // console.log(\"selected..\");\r\n    // }\r\n\r\n    function currencyFormat(num) {\r\n        return num.toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.')\r\n    }\r\n\r\n    function amountFormat(num) {\r\n        return num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.')\r\n    }\r\n\r\n    const moneyTemplate = (data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"money\">{currencyFormat(data[props.field])}</span>\r\n            </>\r\n        );\r\n    };\r\n\r\n    const amountTemplate = (data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"amount\">{amountFormat(data[props.field])}</span>\r\n            </>\r\n        );\r\n    };\r\n\r\n    const listReducer = (state, action) => {\r\n        switch (action.type) {\r\n            case 'ADD_ITEM':\r\n                return {\r\n                    ...state,\r\n                    list: state.list.concat({\r\n                        itemTypeEnumId: action.itemTypeEnumId['enumId'],\r\n                        productId: action.productId['productId'],\r\n                        quantity: action.quantity,\r\n                        price: action.price,\r\n                        description: action.description,\r\n                        id: action.id\r\n                    })\r\n                };\r\n            case 'RESET':\r\n                return {\r\n                    ...state,\r\n                    list: undefined\r\n                }\r\n            default:\r\n                throw new Error();\r\n        }\r\n    };\r\n\r\n    const openNew = () => {\r\n        setDialog(true);\r\n    }\r\n\r\n    const tableHeader = (\r\n        <div className=\"table-header\">\r\n            {t('acc.newArInvoice.invoiceItemsList')}\r\n            <span className=\"p-input-icon-left\">\r\n                <Button label={t('acc.invReceivable.addNew')} icon=\"pi pi-plus\" className=\"p-button-success p-mr-2 p-mb-2\" onClick={openNew} />\r\n            </span>\r\n        </div>\r\n    );\r\n\r\n    const initialList = [\r\n            // {\r\n            //     itemTypeEnumId: 'ItemAdvancePay',\r\n            //     productId: 'DEMO_SA_2',\r\n            //     quantity: 1,\r\n            //     price: 10000,\r\n            //     description: \"Hàng bán\",\r\n            //     id: '682db637-0f31-4847-9cdf-25ba9613a75c',\r\n            // },\r\n            // {\r\n            //     itemTypeEnumId: 'ItemAdvancePay',\r\n            //     productId: 'DEMO_VAR',\r\n            //     quantity: 2,\r\n            //     price: 20000,\r\n            //     description: \"Hàng giới thiệu không bán\",\r\n            //     id: '97d19478-3ab2-4aa1-b8cc-a1c3540f54aa',\r\n            // }\r\n    ];\r\n\r\n    const [listData, dispatchListData] = React.useReducer(listReducer, {\r\n        list: initialList,\r\n        isShowList: true\r\n    });\r\n\r\n    const bodyTemplate = (data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                {data[props.field]}\r\n            </>\r\n        );\r\n    };\r\n\r\n    const saveItemInCache = () => {\r\n        // setSubmitted(true);\r\n        dispatchListData({ type: 'ADD_ITEM', itemTypeEnumId, productId, quantity, price, description, id: uuidv4() });\r\n        setItemTypeEnumId('');\r\n        setDescription('');\r\n        setProductId('');\r\n        setQuantity(0);\r\n        setPrice(0);\r\n        setDialog(false);\r\n    }\r\n\r\n    const hideDialog = () => {\r\n        // setShowMessage(false)\r\n        // setSubmitted(false);\r\n        setDialog(false);\r\n    }\r\n\r\n    const dialogFooter = (\r\n        <>\r\n            <Button label={t('acc.newArInvoice.btnSave')} icon=\"pi pi-check\" className=\"p-button-text\" onClick={saveItemInCache} />\r\n            <Button label={t('acc.newArInvoice.btnSaveAndContinue')} icon=\"pi pi-check\" className=\"p-button-text\" onClick={saveItemInCache} />\r\n            <Button label={t('acc.newArInvoice.btnCancel')} icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDialog} />\r\n        </>\r\n    );\r\n\r\n    const onSubmit = (data) => {\r\n        saveTo2Tables();\r\n        // setFormData(data);\r\n        // setShowMessage(true);\r\n        reset();\r\n    };\r\n\r\n    const saveTo2Tables = () => {\r\n        let fromPartyId = \"ORG_ZIZI_CORP\";\r\n        let currencyUomId = 'VND';\r\n        let data = {\r\n            \"fromPartyId\": fromPartyId,\r\n            \"invoiceTypeEnumId\": invoiceType.enumId,\r\n            \"invoiceDescription\": invoiceDescription,\r\n            \"toPartyId\": toParty,\r\n            \"invoiceDate\": invoiceDate,\r\n            \"dueDate\": dueDate,\r\n            \"currencyUomId\": currencyUomId\r\n        };\r\n        toast.current.show({severity: 'success', summary: t('acc.newArInvoice.noticeHeader'), detail: t('acc.newArInvoice.noticeSuccess'), life: 3000});\r\n        // Save data to 2 table: invoice and invoice_item.\r\n        const newARInvoiceService = new NewARInvoiceService();\r\n        newARInvoiceService.saveAll(data).then(res => {\r\n            // setShowMessage(true);\r\n            if(res.data.invoiceId){\r\n                // history.push(\"/accounting/receivable/newARinvoice/\" + res.data.invoiceId);\r\n                // Reset form inputs after submit success.\r\n                setInvoiceDate(\"\");\r\n                setToParty(\"\");\r\n                setInvoiceDescription(\"\");\r\n                setInvoiceTypes(\"\");\r\n                setDueDate(\"\");\r\n                setCurrencyUomId(\"\");\r\n                let param2 = listData.list;\r\n                for(let i = 0; i < param2.length; i++){\r\n                    let param3 = param2[i];\r\n                    param3['invoiceId'] = res.data.invoiceId;\r\n                    newARInvoiceService.saveInvoiceItems(param3, res.data.invoiceId).then(r => r);\r\n                }\r\n                dispatchListData({ type: 'RESET', itemTypeEnumId, productId, quantity, price, description, id: uuidv4() });\r\n            }\r\n        }).then(res =>{});\r\n    }\r\n\r\n    const getFormErrorMessage = (name) => {\r\n        return errors[name] && <small className=\"p-error\">{errors[name].message}</small>\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Toast ref={toast}/>\r\n            <div className=\"p-grid table-demo\">\r\n                <div className=\"p-col-12 p-md-12\">\r\n                    {/*<div className=\"card card-w-title\">*/}\r\n                        <h3>Thêm mới Hóa đơn phải thu</h3>\r\n                        {/*<Steps model={wizardItems} readonly={false} activeIndex={2}/>*/}\r\n                        {/*<Steps model={wizardItems} readOnly={false} onSelect={onSelectFunction}/>*/}\r\n                    {/*</div>*/}\r\n                </div>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"p-grid table-demo\">\r\n                <div className=\"p-col-12\">\r\n                    <div className=\"card\">\r\n                        <div className=\"p-fluid p-formgrid p-grid\">\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"dropdown4\">{t('acc.invReceivable.invoiceTypeLabel')}<span className=\"asterisk-require\">*</span></label>\r\n                                <Controller name=\"invoiceTypeEnumId\" control={control} rules={{ required: 'Loại hóa đơn là trường bắt buộc nhập.' }} render={({ field, fieldState }) => (\r\n                                    <Dropdown id=\"dropdown4\" options={invoiceTypes} value={invoiceType} onChange={(e) => setInvoiceType(e.value)} optionValue=\"enumId\" optionLabel=\"description\" appendTo={document.body} {...field}></Dropdown>\r\n                                )} />\r\n                                {getFormErrorMessage('invoiceTypeEnumId')}\r\n                            </div>\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"invoiceDescription\" className=\"p-col-fixed\">Mô tả</label>\r\n                                <Controller name=\"name\" control={control} rules={{ maxLength: 'Mô tả quá dài.' }} render={({ field, fieldState }) => (\r\n                                    <InputText id=\"invoiceDescription\" value={invoiceDescription} onChange={(e) => setInvoiceDescription(e.target.value)} {...field}></InputText>\r\n                                )} />\r\n                                {getFormErrorMessage('invoiceDescription')}\r\n                            </div>\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"dropdown2\">{t('acc.newArInvoice.toParty')}<span className=\"asterisk-require\">*</span></label>\r\n                                <Controller name=\"toPartyId\" control={control} rules={{ required: 'Bên nhận hóa đơn không được để trống.' }} render={({ field, fieldState }) => (\r\n                                    <Dropdown id=\"dropdown2\" options={parties} value={toParty} onChange={(e) => setToParty(e.value)} appendTo={document.body} {...field}></Dropdown>\r\n                                )} />\r\n                                {getFormErrorMessage('toPartyId')}\r\n                            </div>\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"invoiceDateInput\">{t('acc.newArInvoice.invoiceDate')}<span className=\"asterisk-require\">*</span></label>\r\n                                <Controller name=\"invoiceDate\" control={control} rules={{ required: 'Ngày hóa đơn bắt buộc nhập.' }} render={({ field, fieldState }) => (\r\n                                    <Calendar id=\"invoiceDateInput\" showIcon value={invoiceDate} onChange={(e) => setInvoiceDate(e.value)} appendTo={document.body} {...field}></Calendar>\r\n                                )} />\r\n                                {getFormErrorMessage('invoiceDate')}\r\n                            </div>\r\n\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"dueDateInput\">{t('acc.newArInvoice.dueDate')}<span className=\"asterisk-require\">*</span></label>\r\n                                <Controller name=\"dueDate\" control={control} rules={{ required: 'Ngày đến hạn thanh toán của hóa đơn bắt buộc nhập.' }} render={({ field, fieldState }) => (\r\n                                    <Calendar id=\"dueDateInput\" showIcon value={dueDate} onChange={(e) => setDueDate(e.value)} appendTo={document.body} {...field}></Calendar>\r\n                                )} />\r\n                                {getFormErrorMessage('dueDate')}\r\n                            </div>\r\n\r\n                            <div className=\"p-field p-col-12 p-md-6\">\r\n                                <label htmlFor=\"currencyInput\">{t('acc.newArInvoice.currencyUOM')}</label>\r\n                                <Controller name=\"currencyUomId\" control={control} render={({ field }) => (\r\n                                    <Dropdown id=\"currencyInput\" options={currencies} value={currencyUomId} onChange={(e) => setCurrencyUomId(e.value)} optionLabel=\"description\" appendTo={document.body} filter filterBy=\"description\" showClear {...field}></Dropdown>\r\n                                )} />\r\n                                {getFormErrorMessage('currencyUomId')}\r\n                            </div>\r\n                        </div>\r\n                        {/*<div className=\"p-formgrid p-grid\">*/}\r\n                        {/*    <div className=\"p-col-9 p-md-9\">*/}\r\n                        {/*    </div>*/}\r\n                        {/*    <div className=\"p-col-3 p-md-3\">*/}\r\n                        {/*        <Button type=\"button\" label={t('acc.newArInvoice.goBack')} icon=\"pi pi-chevron-left\"></Button> &nbsp; &nbsp;*/}\r\n                        {/*        <Button type=\"button\" label={t('acc.newArInvoice.goNext')} icon=\"pi pi-chevron-right\"></Button>*/}\r\n                        {/*    </div>*/}\r\n                        {/*</div>*/}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <Dialog visible={dialog} style={{ width: '450px'}} header=\"Thêm mới\"\r\n                    modal className=\"p-fluid\" footer={dialogFooter} onHide={hideDialog}>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"ddCode\">{t('acc.newArInvoice.detailGridCode')}<span className=\"asterisk-require\">*</span></label>\r\n                    <InputText id=\"ddCode\" disabled value={invoiceItemCode} onChange={(e) => setInvoiceItemCode(e.value)}/>\r\n                </div>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"ddInvoiceItemTypes\">{t('acc.newArInvoice.detailGridInvoiceItemType')}<span className=\"asterisk-require\">*</span></label>\r\n                    <Dropdown id=\"ddInvoiceItemTypes\" options={invoiceItemTypes} value={itemTypeEnumId} onChange={(e) => setItemTypeEnumId(e.value)} appendTo={document.body} optionLabel=\"description\"></Dropdown>\r\n                </div>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"ddProduct\">{t('acc.newArInvoice.detailGridProduct')}<span className=\"asterisk-require\">*</span></label>\r\n                    <Dropdown id=\"ddProduct\" options={products} value={productId} onChange={(e) => setProductId(e.value)} appendTo={document.body} optionLabel=\"productName\"></Dropdown>\r\n                </div>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"nbQuantity\">{t('acc.newArInvoice.detailGridQuantity')}<span className=\"asterisk-require\">*</span></label>\r\n                    <InputNumber id=\"nbQuantity\" value={quantity} onChange={(e) => setQuantity(e.value)}/>\r\n                </div>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"nbPrice\">{t('acc.newArInvoice.detailGridPrice')}<span className=\"asterisk-require\">*</span></label>\r\n                    <InputNumber id=\"nbPrice\" value={price} onChange={(e) => setPrice(e.value)}/>\r\n                </div>\r\n                <div className=\"p-field\">\r\n                    <label htmlFor=\"txtDescription\">{t('acc.newArInvoice.detailGridDescription')}<span className=\"asterisk-require\">*</span></label>\r\n                    <InputText type=\"text\" id=\"txtDescription\" value={description} onChange={(e) => setDescription(e.target.value)}/>\r\n                </div>\r\n            </Dialog>\r\n\r\n            <div className=\"p-grid table-demo\">\r\n                <div className=\"p-col-12\">\r\n                    <div className=\"card\">\r\n                        <DataTable value={listData.list} paginator className=\"p-datatable-customers\" rows={10} dataKey=\"enumId\"\r\n                                   emptyMessage={t('acc.newArInvoice.noInvoiceItem')} header={tableHeader} rowHover resizableColumns columnResizeMode=\"fit\" showGridlines>\r\n                            <Column header={t('acc.newArInvoice.detailGridCode')} body={bodyTemplate}/>\r\n                            <Column field=\"itemTypeEnumId\" header={t('acc.newArInvoice.detailGridInvoiceItemType')} body={bodyTemplate}/>\r\n                            <Column field=\"productId\" header={t('acc.newArInvoice.detailGridProduct')} body={bodyTemplate}/>\r\n                            <Column field=\"quantity\" header={t('acc.newArInvoice.detailGridQuantity')} body={amountTemplate}/>\r\n                            <Column field=\"price\" header={t('acc.newArInvoice.detailGridPrice')} body={moneyTemplate}/>\r\n                            <Column field=\"description\" header={t('acc.newArInvoice.detailGridDescription')} body={bodyTemplate}/>\r\n                        </DataTable>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div className=\"flexgrid-demo\">\r\n                    <div className=\"p-grid p-align-center\">\r\n                        <div className=\"p-col\">\r\n                            <div className=\"box\"><Button type=\"submit\" label={t('acc.newArInvoice.btnSave')} icon=\"pi pi-save\" ></Button></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </form>\r\n        </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}