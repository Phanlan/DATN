{"ast":null,"code":"import _objectSpread from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\Salesman\\\\Edit\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\\\u0110A\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useCallback, useContext, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router-dom';\nimport { useParams } from \"react-router-dom\";\nimport { Steps } from 'primereact/steps';\nimport { Button } from 'primereact/button';\nimport { GeneralInformation } from './GeneralInformation';\nimport { ContactInformation } from './ContactInformation';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { ToastContext } from '../../../App';\nimport { SalesmanService } from '../../../service/SalesmanService';\nimport { Loading } from '../../../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var SalesmanEdit = function SalesmanEdit() {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      _useTranslation2 = _slicedToArray(_useTranslation, 1),\n      t = _useTranslation2[0];\n\n  var toast = useContext(ToastContext);\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var history = useHistory();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var schema = yup.object().shape({\n    partyCode: yup.string().required(t('valid.validFieldRequire')),\n    fullName: yup.string().required(t('valid.validFieldRequire')),\n    username: yup.string().required(t('valid.validFieldRequire')),\n    telecomNumber: yup.string().required(t('valid.validFieldRequire')),\n    emailAddress: yup.string().required(t('valid.validFieldRequire'))\n  });\n  var defaultValues = {\n    partyCode: '',\n    fullName: '',\n    gender: null,\n    birthDate: null,\n    userGroupId: null,\n    productStoreId: null,\n    username: '',\n    newPassword: '',\n    newPasswordVerify: '',\n    residentCountryGeoId: null,\n    residentStateProvinceGeoId: null,\n    residentDistrictId: null,\n    residentWardId: null,\n    residentTarAddress: '',\n    currentCountryGeoId: null,\n    currentStateProvinceGeoId: null,\n    currentDistrictId: null,\n    currentWardId: null,\n    currentTarAddress: '',\n    telecomNumber: '',\n    emailAddress: ''\n  };\n\n  var _useForm = useForm({\n    defaultValues: defaultValues,\n    resolver: yupResolver(schema)\n  }),\n      control = _useForm.control,\n      _useForm$formState = _useForm.formState,\n      errors = _useForm$formState.errors,\n      isSubmitting = _useForm$formState.isSubmitting,\n      handleSubmit = _useForm.handleSubmit,\n      setError = _useForm.setError,\n      clearErrors = _useForm.clearErrors,\n      setValue = _useForm.setValue,\n      getValues = _useForm.getValues;\n\n  var onSubmit = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var newPassword, newPasswordVerify, _data$gender, _data$productStoreId, _data$userGroupId, _data$residentCountry, _data$residentStatePr, _data$residentDistric, _data$residentWardId, _data$currentCountryG, _data$currentStatePro, _data$currentDistrict, _data$currentWardId, salesmanService, params, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              newPassword = getValues('newPassword');\n              newPasswordVerify = getValues('newPasswordVerify');\n\n              if (!(newPassword !== newPasswordVerify)) {\n                _context.next = 6;\n                break;\n              }\n\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: t('valid.passwordMustMatch'),\n                life: 5000\n              });\n              return _context.abrupt(\"return\");\n\n            case 6:\n              _context.prev = 6;\n              salesmanService = new SalesmanService(); // {moment().format('DD/MM/YYYY')}\n\n              params = _objectSpread(_objectSpread({}, data), {}, {\n                partyId: id,\n                gender: (_data$gender = data.gender) === null || _data$gender === void 0 ? void 0 : _data$gender.code,\n                productStoreId: (_data$productStoreId = data.productStoreId) === null || _data$productStoreId === void 0 ? void 0 : _data$productStoreId.code,\n                userGroupId: (_data$userGroupId = data.userGroupId) === null || _data$userGroupId === void 0 ? void 0 : _data$userGroupId.code,\n                // birthDate: moment(data.birthDate).format('DD/MM/YYYY'),\n                residentCountryGeoId: (_data$residentCountry = data.residentCountryGeoId) === null || _data$residentCountry === void 0 ? void 0 : _data$residentCountry.code,\n                residentStateProvinceGeoId: (_data$residentStatePr = data.residentStateProvinceGeoId) === null || _data$residentStatePr === void 0 ? void 0 : _data$residentStatePr.code,\n                residentDistrictId: (_data$residentDistric = data.residentDistrictId) === null || _data$residentDistric === void 0 ? void 0 : _data$residentDistric.code,\n                residentWardId: (_data$residentWardId = data.residentWardId) === null || _data$residentWardId === void 0 ? void 0 : _data$residentWardId.code,\n                currentCountryGeoId: (_data$currentCountryG = data.currentCountryGeoId) === null || _data$currentCountryG === void 0 ? void 0 : _data$currentCountryG.code,\n                currentStateProvinceGeoId: (_data$currentStatePro = data.currentStateProvinceGeoId) === null || _data$currentStatePro === void 0 ? void 0 : _data$currentStatePro.code,\n                currentDistrictId: (_data$currentDistrict = data.currentDistrictId) === null || _data$currentDistrict === void 0 ? void 0 : _data$currentDistrict.code,\n                currentWardId: (_data$currentWardId = data.currentWardId) === null || _data$currentWardId === void 0 ? void 0 : _data$currentWardId.code\n              });\n              console.log(params);\n              _context.next = 12;\n              return salesmanService.editSaleEmployee(params);\n\n            case 12:\n              res = _context.sent;\n\n              if (res.partyId) {\n                history.push(\"/sales/salesman/detail/\" + res.partyId);\n              }\n\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](6);\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: _context.t0.response.data.errors,\n                life: 5000\n              });\n\n            case 19:\n              _context.prev = 19;\n              setLoading(false);\n              return _context.finish(19);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[6, 16, 19, 22]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), []);\n\n  var validate = function validate(name) {\n    var flag = true;\n\n    try {\n      yup.reach(schema, name).validateSync(control._formValues[name]);\n      clearErrors(name);\n    } catch (error) {\n      setError(name, {\n        type: \"manual\",\n        message: error.message\n      });\n      flag = false;\n    }\n\n    return flag;\n  };\n\n  var next = function next(e) {\n    var flag = true;\n    flag = validate('partyCode') ? flag : false;\n    flag = validate('fullName') ? flag : false;\n\n    if (activeIndex < 2 && flag) {\n      setActiveIndex(activeIndex + 1);\n    }\n  };\n\n  var previous = function previous(e) {\n    if (activeIndex > 0) {\n      setActiveIndex(activeIndex - 1);\n    }\n  };\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeIndex = _useState4[0],\n      setActiveIndex = _useState4[1];\n\n  var items = [{\n    label: t('customer.generallInformation')\n  }, {\n    label: t('customer.contactInfomation')\n  }, {\n    label: t('customer.confirmation')\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-grid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: t('salesman.edit')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Steps, {\n          model: items,\n          activeIndex: activeIndex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, _this), activeIndex === 0 && /*#__PURE__*/_jsxDEV(GeneralInformation, {\n          control: control,\n          errors: errors,\n          setValue: setValue,\n          partyId: id,\n          setLoading: setLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }, _this), activeIndex === 1 && /*#__PURE__*/_jsxDEV(ContactInformation, {\n          control: control,\n          errors: errors,\n          setValue: setValue,\n          partyId: id,\n          setLoading: setLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-field p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-3\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: activeIndex === 0,\n                  label: t('previous'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: function onClick(e) {\n                    return previous(e);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 37\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-12 p-md-3\",\n                children: [activeIndex === 0 && /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: activeIndex === 2,\n                  label: t('next'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: function onClick(e) {\n                    return next(e);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 59\n                }, _this), activeIndex === 1 && /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: isSubmitting,\n                  label: t('save'),\n                  className: \"p-button-primary p-mr-2 p-mb-2\",\n                  onClick: handleSubmit(onSubmit)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 59\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Loading, {\n      visible: loading,\n      onHide: function onHide() {\n        return setLoading(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(SalesmanEdit, \"dLcexCANKfXMIW3OR5z8ZJsu9t8=\", false, function () {\n  return [useTranslation, useParams, useHistory, useForm];\n});\n\n_c = SalesmanEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalesmanEdit\");","map":{"version":3,"sources":["D:/ÄA/src/pages/Salesman/Edit/index.js"],"names":["React","useCallback","useContext","useState","useTranslation","useHistory","useParams","Steps","Button","GeneralInformation","ContactInformation","useForm","yupResolver","yup","ToastContext","SalesmanService","Loading","SalesmanEdit","t","toast","id","history","loading","setLoading","schema","object","shape","partyCode","string","required","fullName","username","telecomNumber","emailAddress","defaultValues","gender","birthDate","userGroupId","productStoreId","newPassword","newPasswordVerify","residentCountryGeoId","residentStateProvinceGeoId","residentDistrictId","residentWardId","residentTarAddress","currentCountryGeoId","currentStateProvinceGeoId","currentDistrictId","currentWardId","currentTarAddress","resolver","control","formState","errors","isSubmitting","handleSubmit","setError","clearErrors","setValue","getValues","onSubmit","data","current","show","severity","summary","detail","life","salesmanService","params","partyId","code","console","log","editSaleEmployee","res","push","response","validate","name","flag","reach","validateSync","_formValues","error","type","message","next","e","activeIndex","setActiveIndex","previous","items","label"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { Steps } from 'primereact/steps';\r\nimport { Button } from 'primereact/button';\r\n\r\nimport { GeneralInformation } from './GeneralInformation';\r\nimport { ContactInformation } from './ContactInformation';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport { ToastContext } from '../../../App';\r\n\r\nimport { SalesmanService } from '../../../service/SalesmanService';\r\n\r\nimport { Loading } from '../../../components/Loading';\r\n\r\nexport const SalesmanEdit = () => {\r\n    const [t] = useTranslation('common');\r\n    const toast = useContext(ToastContext);\r\n    const { id } = useParams();\r\n    const history = useHistory();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const schema = yup.object().shape({\r\n        partyCode: yup.string().required(t('valid.validFieldRequire')),\r\n        fullName: yup.string().required(t('valid.validFieldRequire')),\r\n        username: yup.string().required(t('valid.validFieldRequire')),\r\n        telecomNumber: yup.string().required(t('valid.validFieldRequire')),\r\n        emailAddress: yup.string().required(t('valid.validFieldRequire'))\r\n    });\r\n\r\n    const defaultValues = {\r\n        partyCode: '',\r\n        fullName: '',\r\n        gender: null, \r\n        birthDate: null,\r\n        userGroupId: null, \r\n        productStoreId: null, \r\n\r\n        username: '',\r\n        newPassword: '',\r\n        newPasswordVerify: '',\r\n\r\n        residentCountryGeoId: null, \r\n        residentStateProvinceGeoId: null, \r\n        residentDistrictId: null, \r\n        residentWardId: null, \r\n        residentTarAddress: '',\r\n\r\n        currentCountryGeoId: null, \r\n        currentStateProvinceGeoId: null, \r\n        currentDistrictId: null, \r\n        currentWardId: null, \r\n        currentTarAddress: '',\r\n\r\n        telecomNumber: '',\r\n        emailAddress: '',\r\n    }\r\n    const { control, formState: { errors, isSubmitting }, handleSubmit, setError, clearErrors, setValue, getValues } = useForm({ defaultValues, resolver: yupResolver(schema) });\r\n    \r\n    const onSubmit = useCallback(async (data) => {\r\n        setLoading(true);\r\n        let newPassword = getValues('newPassword');\r\n        let newPasswordVerify = getValues('newPasswordVerify');\r\n\r\n        if (newPassword !== newPasswordVerify) {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: t('valid.passwordMustMatch'), life: 5000 });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const salesmanService = new SalesmanService();\r\n\r\n            // {moment().format('DD/MM/YYYY')}\r\n            let params = {\r\n                ...data,\r\n                partyId: id,\r\n                gender: data.gender?.code, \r\n                productStoreId: data.productStoreId?.code,\r\n                userGroupId: data.userGroupId?.code,\r\n                // birthDate: moment(data.birthDate).format('DD/MM/YYYY'),\r\n\r\n                residentCountryGeoId: data.residentCountryGeoId?.code,\r\n                residentStateProvinceGeoId: data.residentStateProvinceGeoId?.code,\r\n                residentDistrictId: data.residentDistrictId?.code,\r\n                residentWardId: data.residentWardId?.code,\r\n\r\n                currentCountryGeoId: data.currentCountryGeoId?.code,\r\n                currentStateProvinceGeoId: data.currentStateProvinceGeoId?.code,\r\n                currentDistrictId: data.currentDistrictId?.code,\r\n                currentWardId: data.currentWardId?.code\r\n                \r\n            };\r\n\r\n            console.log(params);\r\n            let res = await salesmanService.editSaleEmployee(params);\r\n            if (res.partyId) {\r\n                history.push(\"/sales/salesman/detail/\" + res.partyId)\r\n            }\r\n        } catch (error) {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: error.response.data.errors, life: 5000 });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const validate = (name) => {\r\n        let flag = true;\r\n        try {\r\n          yup.reach(schema, name).validateSync(control._formValues[name]);\r\n          clearErrors(name);\r\n        } catch (error) {\r\n          setError(name, {\r\n            type: \"manual\",\r\n            message: error.message,\r\n          });\r\n          flag = false;\r\n        }\r\n    \r\n        return flag;\r\n    }\r\n\r\n    const next = (e) => {\r\n        let flag = true;\r\n\r\n        flag = validate('partyCode') ? flag : false;\r\n        flag = validate('fullName') ? flag : false;\r\n\r\n        if (activeIndex < 2 && flag) {\r\n          setActiveIndex(activeIndex + 1);\r\n        } \r\n    }\r\n    \r\n    const previous = (e) => {\r\n        if (activeIndex > 0) {\r\n            setActiveIndex(activeIndex - 1);\r\n        }\r\n    }\r\n\r\n    const [activeIndex, setActiveIndex] = useState(0);\r\n    const items = [\r\n        { label: t('customer.generallInformation') },\r\n        { label: t('customer.contactInfomation') },\r\n        { label: t('customer.confirmation') }\r\n    ];\r\n    return (\r\n        <div className=\"p-grid\">\r\n            <div className=\"p-col-12\">\r\n                <div className=\"card p-fluid\">\r\n                    <h5>{t('salesman.edit')}</h5>\r\n                    <Steps model={items} activeIndex={activeIndex} />\r\n\r\n                    {\r\n                        activeIndex === 0 && \r\n                        <GeneralInformation control={control} errors={errors} setValue={setValue} \r\n                            partyId={id} setLoading={setLoading} />\r\n                    }\r\n                    {\r\n                        activeIndex === 1 && \r\n                        <ContactInformation control={control} errors={errors} setValue={setValue} \r\n                            partyId={id} setLoading={setLoading} />\r\n                    }\r\n\r\n                    <div className=\"p-grid\">\r\n                        <div className=\"p-col-12 p-md-6\"></div>\r\n                        <div className=\"p-col-12 p-md-6\">\r\n                            <div className=\"p-field p-grid\">\r\n                                <div className=\"p-col-12 p-md-6\"></div>\r\n                                <div className=\"p-col-12 p-md-3\">\r\n                                    <Button disabled={activeIndex === 0} label={t('previous')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={(e) => previous(e)} />\r\n                                </div>\r\n                                <div className=\"p-col-12 p-md-3\">\r\n                                    {activeIndex === 0 && <Button disabled={activeIndex === 2} label={t('next')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={(e) => next(e)} />}\r\n\r\n                                    {activeIndex === 1 && <Button disabled={isSubmitting} label={t('save')} className=\"p-button-primary p-mr-2 p-mb-2\" onClick={handleSubmit(onSubmit)} />}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Loading visible={loading} onHide={() => setLoading(false)} />\r\n        </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}