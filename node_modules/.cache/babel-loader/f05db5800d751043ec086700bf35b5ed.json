{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/eway/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\components\\\\POSComponent\\\\SalesOrderHistory.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\eway\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { Splitter, SplitterPanel } from 'primereact/splitter';\nimport { useTranslation } from 'react-i18next';\nimport { TableProduct } from './TableProduct';\nimport { ToastContext } from '../../App';\nimport { TableListOrder } from './TableListOrder';\nimport moment from 'moment';\nimport { Loading } from '../Loading';\nimport { POSService } from '../../service/POSService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var SalesOrderHistory = function SalesOrderHistory(props) {\n  _s();\n\n  var posService = new POSService();\n  var onHide = props.onHide;\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var toast = useContext(ToastContext);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedOrder = _useState2[0],\n      setSelectedOrder = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orderItemList = _useState4[0],\n      setOrderItemList = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      customer = _useState6[0],\n      setCustomer = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(function () {\n    var getOderItem = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var data, _customer, fullName;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                setLoading(true);\n                _context.next = 4;\n                return posService.getOrderDetail({\n                  orderId: selectedOrder.orderId\n                });\n\n              case 4:\n                data = _context.sent;\n                setOrderItemList(data.orderDetail.orderItems);\n                _customer = data.orderDetail.customer;\n                fullName = '';\n\n                if (_customer.partyId !== '_NA_') {\n                  fullName = (_customer === null || _customer === void 0 ? void 0 : _customer.lastName) + ' ' + (_customer === null || _customer === void 0 ? void 0 : _customer.middleName) + ' ' + _customer.firstName;\n                  fullName = fullName.replace(new RegExp('\\\\s+', 'gm'), ' ');\n                }\n\n                _customer.fullName = fullName;\n                setCustomer(_customer);\n                _context.next = 17;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                setLoading(false);\n                toast.current.show({\n                  severity: 'error',\n                  summary: 'Error Message',\n                  detail: _context.t0.response.data.errors,\n                  life: 5000\n                });\n\n              case 17:\n                _context.prev = 17;\n                setLoading(false);\n                return _context.finish(17);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 13, 17, 20]]);\n      }));\n\n      return function getOderItem() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    selectedOrder && getOderItem(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedOrder, toast]);\n\n  var basicDialogFooter = /*#__PURE__*/_jsxDEV(Button, {\n    type: \"button\",\n    label: t('close'),\n    onClick: onHide,\n    icon: \"pi pi-check\",\n    className: \"p-button-danger\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, _this);\n\n  return /*#__PURE__*/_jsxDEV(Dialog, _objectSpread(_objectSpread({}, props), {}, {\n    header: t('pos.salesOrderHistory'),\n    style: {\n      width: '80vw',\n      height: '80vw'\n    },\n    modal: true,\n    footer: basicDialogFooter,\n    onHide: onHide,\n    children: [/*#__PURE__*/_jsxDEV(Splitter, {\n      style: {\n        height: '100%'\n      },\n      className: \"p-mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(SplitterPanel, {\n        size: 80,\n        minSize: 10,\n        style: {\n          overflow: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(TableListOrder, {\n          selectedOrder: selectedOrder,\n          setSelectedOrder: setSelectedOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(SplitterPanel, {\n        size: 80,\n        children: /*#__PURE__*/_jsxDEV(Splitter, {\n          layout: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(SplitterPanel, {\n            size: 40,\n            style: {\n              overflow: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col p-pt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-grid\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-col-12 p-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.idOrder'), \": \", selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.orderId]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 88,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.customer'), \": \", customer === null || customer === void 0 ? void 0 : customer.fullName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.discount'), \": 0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-col-12 p-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.time'), \":\", ' ', selectedOrder !== null && selectedOrder !== void 0 && selectedOrder.entryDate ? moment(selectedOrder.entryDate).format('DD/MM/YYYY HH:mm:ss') : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.totalBill'), \": \", selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.grandTotal]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.totalTax'), \": 0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.totalOrderVAT'), \": \", selectedOrder === null || selectedOrder === void 0 ? void 0 : selectedOrder.grandTotal]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(SplitterPanel, {\n            size: 80,\n            style: {\n              overflow: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(TableProduct, {\n              value: orderItemList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Loading, {\n      visible: loading,\n      onHide: function onHide() {\n        return setLoading(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, _this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SalesOrderHistory, \"VZPts/jlXGd6CXP42mGmm9tyNg0=\", false, function () {\n  return [useTranslation];\n});\n\n_c = SalesOrderHistory;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalesOrderHistory\");","map":{"version":3,"sources":["D:/eway/src/components/POSComponent/SalesOrderHistory.js"],"names":["React","useContext","useEffect","useState","Button","Dialog","Splitter","SplitterPanel","useTranslation","TableProduct","ToastContext","TableListOrder","moment","Loading","POSService","SalesOrderHistory","props","posService","onHide","t","toast","selectedOrder","setSelectedOrder","orderItemList","setOrderItemList","customer","setCustomer","loading","setLoading","getOderItem","getOrderDetail","orderId","data","orderDetail","orderItems","fullName","partyId","lastName","middleName","firstName","replace","RegExp","current","show","severity","summary","detail","response","errors","life","basicDialogFooter","width","height","overflow","entryDate","format","grandTotal"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { Splitter, SplitterPanel } from 'primereact/splitter';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { TableProduct } from './TableProduct';\r\nimport { ToastContext } from '../../App';\r\nimport { TableListOrder } from './TableListOrder';\r\nimport moment from 'moment';\r\nimport { Loading } from '../Loading';\r\n\r\nimport { POSService } from '../../service/POSService';\r\n\r\nexport const SalesOrderHistory = (props) => {\r\n\r\n  const posService = new POSService();\r\n\r\n  const { onHide } = props;\r\n\r\n  const { t } = useTranslation('common');\r\n\r\n  const toast = useContext(ToastContext);\r\n\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [orderItemList, setOrderItemList] = useState([]);\r\n  const [customer, setCustomer] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getOderItem = async () => {\r\n      try {\r\n        setLoading(true);\r\n        let data = await posService.getOrderDetail({ orderId: selectedOrder.orderId });\r\n\r\n        setOrderItemList(data.orderDetail.orderItems);\r\n\r\n        let customer = data.orderDetail.customer;\r\n        let fullName = '';\r\n        if (customer.partyId !== '_NA_') {\r\n          fullName = customer?.lastName + ' ' + customer?.middleName + ' ' + customer.firstName;\r\n          fullName = fullName.replace(new RegExp('\\\\s+', 'gm'), ' ');\r\n        }\r\n        customer.fullName = fullName;\r\n\r\n        setCustomer(customer);\r\n      } catch (err) {\r\n        setLoading(false);\r\n          toast.current.show({\r\n            severity: 'error',\r\n            summary: 'Error Message',\r\n            detail: err.response.data.errors,\r\n            life: 5000,\r\n          });\r\n      } finally {\r\n        setLoading(false);\r\n      } \r\n    };\r\n    selectedOrder && getOderItem();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedOrder, toast]);\r\n\r\n  const basicDialogFooter = (\r\n    <Button type=\"button\" label={t('close')} onClick={onHide} icon=\"pi pi-check\" className=\"p-button-danger\" />\r\n  );\r\n\r\n  return (\r\n    <Dialog\r\n      {...props}\r\n      header={t('pos.salesOrderHistory')}\r\n      style={{ width: '80vw', height: '80vw' }}\r\n      modal\r\n      footer={basicDialogFooter}\r\n      onHide={onHide}\r\n    >\r\n      <Splitter style={{ height: '100%' }} className=\"p-mb-5\">\r\n        <SplitterPanel size={80} minSize={10} style={{ overflow: 'auto' }}>\r\n          <TableListOrder\r\n            selectedOrder={selectedOrder}\r\n            setSelectedOrder={setSelectedOrder}\r\n          />\r\n        </SplitterPanel>\r\n        <SplitterPanel size={80}>\r\n          <Splitter layout=\"vertical\">\r\n            <SplitterPanel size={40} style={{ overflow: 'auto' }}>\r\n              <div className=\"p-col p-pt-3\">\r\n                <div className=\"p-grid\">\r\n                  <div className=\"p-col-12 p-md-6\">\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.idOrder')}: {selectedOrder?.orderId}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">{t('pos.customer')}: {customer?.fullName}</div>\r\n                    {/* <div className=\"p-mb-3 p-text-bold\">{t('pos.phoneNumber')}: </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">{t('pos.address')}: </div> */}\r\n                    <div className=\"p-mb-3 p-text-bold\">{t('pos.discount')}: 0</div>\r\n                  </div>\r\n                  <div className=\"p-col-12 p-md-6\">\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.time')}:{' '}\r\n                      {selectedOrder?.entryDate ? moment(selectedOrder.entryDate).format('DD/MM/YYYY HH:mm:ss') : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.totalBill')}: {selectedOrder?.grandTotal}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">{t('pos.totalTax')}: 0</div>\r\n                    <div className=\"p-mb-3 p-text-bold\">{t('pos.totalOrderVAT')}: {selectedOrder?.grandTotal}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </SplitterPanel>\r\n            <SplitterPanel size={80} style={{ overflow: 'auto' }}>\r\n              <TableProduct value={orderItemList} />\r\n            </SplitterPanel>\r\n          </Splitter>\r\n        </SplitterPanel>\r\n      </Splitter>\r\n      <Loading visible={loading} onHide={() => setLoading(false)} />\r\n    </Dialog>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}