{"ast":null,"code":"import _objectSpread from \"D:/eway/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/eway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\eway\\\\src\\\\components\\\\POSComponent\\\\ListPromotion.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { Splitter, SplitterPanel } from 'primereact/splitter';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { useTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport { TableListPromotion } from './TableListPromotion';\nimport { ToastContext } from \"../../App\";\nimport { POSService } from '../../service/POSService';\nimport { Loading } from '../Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var ListPromotion = function ListPromotion(props) {\n  _s();\n\n  var onHide = props.onHide;\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var toast = useContext(ToastContext);\n  var posService = new POSService();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedPromo = _useState2[0],\n      setSelectedPromo = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      promoDetail = _useState4[0],\n      setPromoDetail = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      promoRules = _useState6[0],\n      setPromoRules = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var basicDialogFooter = /*#__PURE__*/_jsxDEV(Button, {\n    type: \"button\",\n    label: t('close'),\n    onClick: onHide,\n    icon: \"pi pi-check\",\n    className: \"p-button-danger\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, _this);\n\n  useEffect(function () {\n    setLoading(true);\n    var params = {\n      storePromotionId: selectedPromo === null || selectedPromo === void 0 ? void 0 : selectedPromo.storePromotionId\n    };\n    posService.getPromoDetail(params).then(function (data) {\n      setPromoDetail(data.promoDetail);\n      setPromoRules(data.promoRules);\n    }).catch(function (err) {\n      toast.current.show({\n        severity: 'error',\n        summary: 'Error Message',\n        detail: err.response.data.errors,\n        life: 5000\n      });\n    }).finally(function () {\n      setLoading(false);\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedPromo]);\n\n  var ruleNameTemplate = function ruleNameTemplate(rowData) {\n    var parameterName = rowData.parameterName;\n    var temp = parameterName.replace(new RegExp('^.*\\\\.', 'g'), '');\n    temp = temp.replace(new RegExp('_\\\\d+$', 'g'), '');\n    var ruleName = t('promotion.' + temp);\n    var index = parameterName.indexOf('_');\n\n    if (index > -1) {\n      var num = parseInt(parameterName.substring(index + 1)) + 1;\n      ruleName += ' ' + num;\n    }\n\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: ruleName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var ruleValueTemplate = function ruleValueTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData.parameterValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Dialog, _objectSpread(_objectSpread({}, props), {}, {\n    header: t('pos.promoList'),\n    style: {\n      width: '80vw',\n      height: '80vw'\n    },\n    modal: true,\n    footer: basicDialogFooter,\n    onHide: onHide,\n    children: [/*#__PURE__*/_jsxDEV(Splitter, {\n      style: {\n        height: '100%'\n      },\n      className: \"p-mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(SplitterPanel, {\n        size: 80,\n        minSize: 10,\n        style: {\n          overflow: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(TableListPromotion, {\n          setSelectedPromo: setSelectedPromo,\n          selectedPromo: selectedPromo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(SplitterPanel, {\n        size: 80,\n        children: /*#__PURE__*/_jsxDEV(Splitter, {\n          layout: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(SplitterPanel, {\n            size: 40,\n            style: {\n              overflow: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col p-pt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-grid\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-col-12 p-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('promotion.serviceRegister'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.description ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.description : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.promoCode'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.storePromotionId ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.storePromotionId : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.promoName'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.itemDescription ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.itemDescription : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.startDate'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.fromDate ? moment(promoDetail.fromDate).format('DD/MM/YYYY HH:mm:ss') : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.endDate'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.thruDate ? moment(promoDetail.thruDate).format('DD/MM/YYYY HH:mm:ss') : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-col-12 p-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('promotion.sequenceNum'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.sequenceNum ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.sequenceNum : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.requestVoucher'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.requireCode ? (promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.requireCode) === 1 ? t('yes') : t('no') : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.limitOnOrder'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.useLimitPerOrder ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.useLimitPerOrder : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.limitOnCustomer'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.useLimitPerCustomer ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.useLimitPerCustomer : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-mb-3 p-text-bold\",\n                    children: [t('pos.limitOnPromo'), \":\\xA0\", promoDetail !== null && promoDetail !== void 0 && promoDetail.useLimitPerPromotion ? promoDetail === null || promoDetail === void 0 ? void 0 : promoDetail.useLimitPerPromotion : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(SplitterPanel, {\n            size: 80,\n            style: {\n              overflow: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(DataTable, {\n              selectionMode: \"single\",\n              dataKey: \"id\",\n              showGridlines: true,\n              value: promoRules,\n              children: [/*#__PURE__*/_jsxDEV(Column, {\n                field: \"code\",\n                header: t('pos.lawName'),\n                body: ruleNameTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Column, {\n                field: \"name\",\n                header: t('pos.value'),\n                body: ruleValueTemplate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Loading, {\n      visible: loading,\n      onHide: function onHide() {\n        return setLoading(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, _this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ListPromotion, \"WwNQ9jptHtf1pSTBWnZIgBObJik=\", false, function () {\n  return [useTranslation];\n});\n\n_c = ListPromotion;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListPromotion\");","map":{"version":3,"sources":["D:/eway/src/components/POSComponent/ListPromotion.js"],"names":["React","useEffect","useContext","useState","Button","Dialog","Splitter","SplitterPanel","DataTable","Column","useTranslation","moment","TableListPromotion","ToastContext","POSService","Loading","ListPromotion","props","onHide","t","toast","posService","selectedPromo","setSelectedPromo","promoDetail","setPromoDetail","promoRules","setPromoRules","loading","setLoading","basicDialogFooter","params","storePromotionId","getPromoDetail","then","data","catch","err","current","show","severity","summary","detail","response","errors","life","finally","ruleNameTemplate","rowData","parameterName","temp","replace","RegExp","ruleName","index","indexOf","num","parseInt","substring","ruleValueTemplate","parameterValue","width","height","overflow","description","itemDescription","fromDate","format","thruDate","sequenceNum","requireCode","useLimitPerOrder","useLimitPerCustomer","useLimitPerPromotion"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { Splitter, SplitterPanel } from 'primereact/splitter';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { useTranslation } from 'react-i18next';\r\nimport moment from 'moment';\r\n\r\nimport { TableListPromotion } from './TableListPromotion';\r\nimport { ToastContext } from \"../../App\";\r\n\r\nimport { POSService } from '../../service/POSService';\r\nimport { Loading } from '../Loading';\r\n\r\nexport const ListPromotion = (props) => {\r\n  const { onHide } = props;\r\n  const { t } = useTranslation('common');\r\n  const toast = useContext(ToastContext);\r\n\r\n  const posService = new POSService();\r\n\r\n  const [selectedPromo, setSelectedPromo] = useState(null);\r\n  const [promoDetail, setPromoDetail] = useState(null);\r\n  const [promoRules, setPromoRules] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const basicDialogFooter = (\r\n    <Button type=\"button\" label={t('close')} onClick={onHide} icon=\"pi pi-check\" className=\"p-button-danger\" />\r\n  );\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let params = {\r\n      storePromotionId: selectedPromo?.storePromotionId\r\n    };\r\n\r\n    posService.getPromoDetail(params).then((data) => {\r\n      setPromoDetail(data.promoDetail);\r\n      setPromoRules(data.promoRules);\r\n    })\r\n      .catch(err => {\r\n        toast.current.show({ severity: 'error', summary: 'Error Message', detail: err.response.data.errors, life: 5000 });\r\n      }).finally(() => {\r\n        setLoading(false);\r\n      });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedPromo]);\r\n\r\n  const ruleNameTemplate = (rowData) => {\r\n    let parameterName = rowData.parameterName;\r\n    let temp = parameterName.replace(new RegExp('^.*\\\\.', 'g'), '');\r\n    temp = temp.replace(new RegExp('_\\\\d+$', 'g'), '');\r\n    let ruleName = t('promotion.' + temp);\r\n\r\n    let index = parameterName.indexOf('_');\r\n    if (index > -1) {\r\n        let num = parseInt(parameterName.substring(index + 1)) + 1;\r\n        ruleName += ' ' + num;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <span>{ruleName}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const ruleValueTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>{rowData.parameterValue}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      {...props}\r\n      header={t('pos.promoList')}\r\n      style={{ width: '80vw', height: '80vw' }}\r\n      modal\r\n      footer={basicDialogFooter}\r\n      onHide={onHide}\r\n    >\r\n      <Splitter style={{ height: '100%' }} className=\"p-mb-5\">\r\n        <SplitterPanel size={80} minSize={10} style={{ overflow: 'auto' }}>\r\n          <TableListPromotion setSelectedPromo={setSelectedPromo} selectedPromo={selectedPromo} />\r\n        </SplitterPanel>\r\n        <SplitterPanel size={80}>\r\n          <Splitter layout=\"vertical\">\r\n            <SplitterPanel size={40} style={{ overflow: 'auto' }}>\r\n              <div className=\"p-col p-pt-3\">\r\n                <div className=\"p-grid\">\r\n                  <div className=\"p-col-12 p-md-6\">\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('promotion.serviceRegister')}:&nbsp;\r\n                      {promoDetail?.description ? promoDetail?.description : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.promoCode')}:&nbsp;\r\n                      {promoDetail?.storePromotionId ? promoDetail?.storePromotionId : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.promoName')}:&nbsp;\r\n                      {promoDetail?.itemDescription ? promoDetail?.itemDescription : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.startDate')}:&nbsp;\r\n                      {promoDetail?.fromDate ? moment(promoDetail.fromDate).format('DD/MM/YYYY HH:mm:ss') : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.endDate')}:&nbsp;\r\n                      {promoDetail?.thruDate ? moment(promoDetail.thruDate).format('DD/MM/YYYY HH:mm:ss') : ''}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"p-col-12 p-md-6\">\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('promotion.sequenceNum')}:&nbsp;\r\n                      {promoDetail?.sequenceNum ? promoDetail?.sequenceNum : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.requestVoucher')}:&nbsp;\r\n                      {promoDetail?.requireCode ? (promoDetail?.requireCode === 1 ? t('yes') : t('no')) : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.limitOnOrder')}:&nbsp;\r\n                      {promoDetail?.useLimitPerOrder ? promoDetail?.useLimitPerOrder : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.limitOnCustomer')}:&nbsp;\r\n                      {promoDetail?.useLimitPerCustomer ? promoDetail?.useLimitPerCustomer : ''}\r\n                    </div>\r\n                    <div className=\"p-mb-3 p-text-bold\">\r\n                      {t('pos.limitOnPromo')}:&nbsp;\r\n                      {promoDetail?.useLimitPerPromotion ? promoDetail?.useLimitPerPromotion : ''}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </SplitterPanel>\r\n            <SplitterPanel size={80} style={{ overflow: 'auto' }}>\r\n              <DataTable selectionMode=\"single\" dataKey=\"id\" showGridlines value={promoRules}>\r\n                <Column field=\"code\" header={t('pos.lawName')} body={ruleNameTemplate}></Column>\r\n                <Column field=\"name\" header={t('pos.value')} body={ruleValueTemplate}></Column>\r\n              </DataTable>\r\n            </SplitterPanel>\r\n          </Splitter>\r\n        </SplitterPanel>\r\n      </Splitter>\r\n      <Loading visible={loading} onHide={() => setLoading(false)} />\r\n    </Dialog>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}