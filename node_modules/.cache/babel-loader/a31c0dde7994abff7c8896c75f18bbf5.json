{"ast":null,"code":"import _createForOfIteratorHelper from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\Category\\\\CategoryDetail\\\\CategoryTree.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\\\u0110A\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useEffect, useCallback, useState } from 'react'; // import { useTranslation } from 'react-i18next';\n\nimport { Tree } from 'primereact/tree';\nimport { Button } from \"primereact/button\"; // import { ToastContext } from \"../../../App\";\n\nimport { ProductService } from '../../../service/ProductService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var CategoryTree = function CategoryTree(props) {\n  _s();\n\n  // const { t } = useTranslation('common');\n  // const toast = useContext(ToastContext);\n  var productCategoryId = props.productCategoryId;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      categories = _useState2[0],\n      setCategories = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      expandedKeys = _useState4[0],\n      setExpandedKeys = _useState4[1];\n\n  useEffect(function () {\n    init(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var init = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var productService, params, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            productService = new ProductService();\n            params = {\n              productCategoryId: productCategoryId\n            };\n            _context.next = 4;\n            return productService.getCategoryListRollup(params);\n\n          case 4:\n            data = _context.sent;\n            setCategories(data.categoryList);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [productCategoryId]);\n\n  var expandAll = function expandAll() {\n    var _expandedKeys = {};\n\n    var _iterator = _createForOfIteratorHelper(categories),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var cate = _step.value;\n        expandNode(cate, _expandedKeys);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    setExpandedKeys(_expandedKeys);\n  };\n\n  var collapseAll = function collapseAll() {\n    setExpandedKeys({});\n  };\n\n  var expandNode = function expandNode(cate, _expandedKeys) {\n    if (cate.children && cate.children.length) {\n      _expandedKeys[cate.key] = true;\n\n      var _iterator2 = _createForOfIteratorHelper(cate.children),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var child = _step2.value;\n          expandNode(child, _expandedKeys);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        icon: \"pi pi-plus\",\n        onClick: expandAll,\n        className: \"p-mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        icon: \"pi pi-minus\",\n        onClick: collapseAll\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Tree, {\n      style: {\n        height: \"30rem\"\n      },\n      value: categories,\n      expandedKeys: expandedKeys,\n      onToggle: function onToggle(e) {\n        return setExpandedKeys(e.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(CategoryTree, \"zazlO4AhQ4+K70f8UpGQXUQZ9nY=\");\n\n_c = CategoryTree;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryTree\");","map":{"version":3,"sources":["D:/ĐA/src/pages/Category/CategoryDetail/CategoryTree.js"],"names":["React","useEffect","useCallback","useState","Tree","Button","ProductService","CategoryTree","props","productCategoryId","categories","setCategories","expandedKeys","setExpandedKeys","init","productService","params","getCategoryListRollup","data","categoryList","expandAll","_expandedKeys","cate","expandNode","collapseAll","children","length","key","child","height","e","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from 'react';\r\n\r\n// import { useTranslation } from 'react-i18next';\r\nimport { Tree } from 'primereact/tree';\r\nimport { Button } from \"primereact/button\";\r\n\r\n// import { ToastContext } from \"../../../App\";\r\n\r\nimport { ProductService } from '../../../service/ProductService';\r\n\r\nexport const CategoryTree = (props) => {\r\n    // const { t } = useTranslation('common');\r\n    // const toast = useContext(ToastContext);\r\n\r\n    const { productCategoryId } = props;\r\n\r\n    const [ categories, setCategories ] = useState(null);\r\n    const [expandedKeys, setExpandedKeys] = useState({});\r\n\r\n    useEffect(() => {\r\n        init();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const init = useCallback(async () => {\r\n        const productService = new ProductService();\r\n        let params = {\r\n            productCategoryId: productCategoryId\r\n        }\r\n\r\n        let data = await productService.getCategoryListRollup(params);\r\n\r\n        setCategories(data.categoryList);\r\n    }, [productCategoryId]);\r\n\r\n    const expandAll = () => {\r\n        let _expandedKeys = {};\r\n        for (let cate of categories) {\r\n          expandNode(cate, _expandedKeys);\r\n        }\r\n    \r\n        setExpandedKeys(_expandedKeys);\r\n      };\r\n    \r\n      const collapseAll = () => {\r\n        setExpandedKeys({});\r\n      };\r\n    \r\n      const expandNode = (cate, _expandedKeys) => {\r\n        if (cate.children && cate.children.length) {\r\n          _expandedKeys[cate.key] = true;\r\n    \r\n          for (let child of cate.children) {\r\n            expandNode(child, _expandedKeys);\r\n          }\r\n        }\r\n      };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"p-mb-4\">\r\n                <Button type=\"button\" icon=\"pi pi-plus\" onClick={expandAll} className=\"p-mr-2\" />\r\n                <Button type=\"button\" icon=\"pi pi-minus\" onClick={collapseAll} />\r\n            </div>\r\n            <Tree style={{height: \"30rem\"}} value={categories} expandedKeys={expandedKeys} onToggle={(e) => setExpandedKeys(e.value)}/>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}