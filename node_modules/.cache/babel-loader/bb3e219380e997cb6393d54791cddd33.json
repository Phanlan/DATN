{"ast":null,"code":"import _objectSpread from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\Category\\\\CategoryDetail\\\\ProductList.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"D:\\\\\\u0110A\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useState, useEffect, useRef, useCallback, useContext } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { InputText } from \"primereact/inputtext\";\nimport { ProductService } from '../../../service/ProductService';\nimport { useTranslation } from 'react-i18next';\nimport { ToastContext } from \"../../../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var ProductList = function ProductList(props) {\n  _s();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var toast = useContext(ToastContext);\n  var productCategoryId = props.productCategoryId;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      products = _useState4[0],\n      setProducts = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      productIdFilter = _useState6[0],\n      setProductIdFilter = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      productNameFilter = _useState8[0],\n      setProductNameFilter = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      productCategoryFilter = _useState10[0],\n      setProductCategoryFilter = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      statusIdFilter = _useState12[0],\n      setStatusIdFilter = _useState12[1];\n\n  var _useState13 = useState({\n    first: 0,\n    rows: 10,\n    page: 0,\n    sortField: \"productId\",\n    sortOrder: -1\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      lazyParams = _useState14[0],\n      setLazyParams = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      totalRecords = _useState16[0],\n      setTotalRecords = _useState16[1];\n\n  var dt = useRef(null);\n  var typingTimeoutRef = useRef(null);\n\n  var emptyMessage = /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: t('common:noDataFound')\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 26\n  }, _this);\n\n  useEffect(function () {\n    initData(lazyParams); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lazyParams]);\n  var getParams = useCallback(function (lazyParams) {\n    var params = {\n      productCategoryId: productCategoryId\n    };\n    var filters = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.filters;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.page && (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.page) >= 0) params.pageIndex = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.page;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.rows) params.pageSize = lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.rows;\n    if (lazyParams !== null && lazyParams !== void 0 && lazyParams.sortField && lazyParams !== null && lazyParams !== void 0 && lazyParams.sortOrder) params.orderByField = (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortOrder) === 1 ? lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortField : \"-\" + (lazyParams === null || lazyParams === void 0 ? void 0 : lazyParams.sortField);\n\n    if (filters && Object.keys(filters).length !== 0) {\n      for (var key in filters) {\n        if (Object.hasOwnProperty.call(filters, key)) {\n          var filter = filters[key];\n          var matchMode = filter.matchMode;\n          var value = filter.value;\n          if (value == null || value === \"\") continue;\n\n          switch (matchMode) {\n            case \"timestamprange\":\n              params[key + \"From\"] = value[0].getTime(); //get beginning of the day\n\n              params[key + \"Thru\"] = value[1].getTime() + 86400000 - 1; //get end of the day\n\n              break;\n\n            case \"contains\":\n              params[key + \"Term\"] = value;\n              break;\n\n            case \"in\":\n              params[key + \"s\"] = value.join();\n              break;\n\n            case \"equals\":\n            case \"not-equals\":\n            case \"greater\":\n            case \"greater-equals\":\n            case \"less\":\n            case \"less-equals\":\n              params[key + \"Str\"] = value;\n              params[key + \"Op\"] = matchMode;\n              break;\n\n            case \"is-not-null\":\n            case \"is-null\":\n              params[key + \"Op\"] = matchMode;\n              break;\n\n            default:\n              break;\n          }\n        }\n      }\n    }\n\n    return params; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var initData = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(lazyParams) {\n      var productService, params, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              productService = new ProductService();\n              setLoading(true);\n              _context.prev = 2;\n              params = getParams(lazyParams);\n              _context.next = 6;\n              return productService.getAllProducts(params);\n\n            case 6:\n              data = _context.sent;\n              setProducts(data.products);\n              setTotalRecords(data.totalRecords);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              toast.current.show({\n                severity: 'error',\n                summary: t('errorMessage'),\n                detail: _context.t0.response.data.errors,\n                life: 5000\n              });\n\n            case 14:\n              _context.prev = 14;\n              setLoading(false);\n              return _context.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11, 14, 17]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [getParams, toast, t]);\n  var bodyTemplate = useCallback(function (data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, _this), data[props.field]]\n    }, void 0, true);\n  }, []);\n  var bodyIdTemplate = useCallback(function (data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#/sales/product/detail/\".concat(data[props.field]),\n        style: {\n          color: '#2196f3'\n        },\n        children: data[props.field]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true);\n  }, []);\n  var productStatusBodyTemplate = useCallback(function (data, props) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"p-column-title\",\n        children: props.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"product-badge status-\".concat(data.inventoryStatus),\n        children: data.inventoryStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true);\n  }, []);\n  var onFilterTextChange = useCallback(function (e) {\n    var obj = e.target;\n\n    switch (obj.id) {\n      case 'productId':\n        setProductIdFilter(obj.value);\n        break;\n\n      case 'productName':\n        setProductNameFilter(obj.value);\n        break;\n\n      case 'categoryName':\n        setProductCategoryFilter(obj.value);\n        break;\n\n      case 'statusId':\n        setStatusIdFilter(obj.value);\n        break;\n\n      default:\n        break;\n    }\n\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    typingTimeoutRef.current = setTimeout(function () {\n      dt.current.filter(obj.value, obj.id, 'contains');\n    }, 400);\n  }, []);\n  var textFilter = useCallback(function (id, value) {\n    return /*#__PURE__*/_jsxDEV(InputText, {\n      type: \"text\",\n      id: id,\n      value: value || '',\n      onChange: onFilterTextChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, _this);\n  } // eslint-disable-next-line react-hooks/exhaustive-deps\n  , []);\n  var onPage = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  }, [lazyParams]);\n  var onFilter = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread(_objectSpread({}, lazyParams), e), {}, {\n      first: 0\n    }));\n  }, [lazyParams]);\n  var onSort = useCallback(function (e) {\n    setLazyParams(_objectSpread(_objectSpread({}, lazyParams), e));\n  }, [lazyParams]);\n  return /*#__PURE__*/_jsxDEV(DataTable, {\n    value: products,\n    paginator: true,\n    className: \"p-datatable-customers\",\n    dataKey: \"productId\",\n    ref: dt,\n    filters: lazyParams.filters,\n    lazy: true,\n    first: lazyParams.first,\n    rows: lazyParams.rows,\n    totalRecords: totalRecords,\n    rowsPerPageOptions: [5, 10, 20, 50, 100],\n    onPage: onPage,\n    onFilter: onFilter,\n    onSort: onSort,\n    sortField: lazyParams.sortField,\n    sortOrder: lazyParams.sortOrder,\n    rowHover: true,\n    paginatorTemplate: \"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\",\n    currentPageReportTemplate: \"{first} - {last} of {totalRecords}\",\n    emptyMessage: emptyMessage,\n    loading: loading,\n    paginatorPosition: \"bottom\",\n    children: [/*#__PURE__*/_jsxDEV(Column, {\n      field: \"productId\",\n      header: t('product.id'),\n      sortable: true,\n      body: bodyIdTemplate,\n      filter: true,\n      filterElement: textFilter(\"productId\", productIdFilter)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Column, {\n      field: \"productName\",\n      header: t('product.name'),\n      sortable: true,\n      filter: true,\n      body: bodyTemplate,\n      filterElement: textFilter(\"productName\", productNameFilter)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Column, {\n      field: \"categoryName\",\n      header: t('product.productCategory'),\n      sortable: true,\n      filter: true,\n      body: bodyTemplate,\n      filterElement: textFilter(\"categoryName\", productCategoryFilter)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Column, {\n      field: \"statusId\",\n      header: t('product.status'),\n      sortable: true,\n      filter: true,\n      body: productStatusBodyTemplate,\n      filterElement: textFilter(\"statusId\", statusIdFilter)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(ProductList, \"i558Wznw208ekoUeMuONRdXY8hA=\", false, function () {\n  return [useTranslation];\n});\n\n_c = ProductList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"sources":["D:/ĐA/src/pages/Category/CategoryDetail/ProductList.js"],"names":["React","useState","useEffect","useRef","useCallback","useContext","DataTable","Column","InputText","ProductService","useTranslation","ToastContext","ProductList","props","t","toast","productCategoryId","loading","setLoading","products","setProducts","productIdFilter","setProductIdFilter","productNameFilter","setProductNameFilter","productCategoryFilter","setProductCategoryFilter","statusIdFilter","setStatusIdFilter","first","rows","page","sortField","sortOrder","lazyParams","setLazyParams","totalRecords","setTotalRecords","dt","typingTimeoutRef","emptyMessage","textAlign","initData","getParams","params","filters","pageIndex","pageSize","orderByField","Object","keys","length","key","hasOwnProperty","call","filter","matchMode","value","getTime","join","productService","getAllProducts","data","current","show","severity","summary","detail","response","errors","life","bodyTemplate","header","field","bodyIdTemplate","color","productStatusBodyTemplate","inventoryStatus","onFilterTextChange","e","obj","target","id","clearTimeout","setTimeout","textFilter","onPage","onFilter","onSort"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useContext } from 'react';\r\n\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { InputText } from \"primereact/inputtext\";\r\n\r\nimport { ProductService } from '../../../service/ProductService';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { ToastContext } from \"../../../App\";\r\n\r\nexport const ProductList = (props) => {\r\n    const { t } = useTranslation('common');\r\n    const toast = useContext(ToastContext);\r\n    const { productCategoryId } = props;\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [products, setProducts] = useState(null);\r\n    const [productIdFilter, setProductIdFilter] = useState(null);\r\n    const [productNameFilter, setProductNameFilter] = useState(null);\r\n    const [productCategoryFilter, setProductCategoryFilter] = useState(null);\r\n    const [statusIdFilter, setStatusIdFilter] = useState(null);\r\n\r\n    const [lazyParams, setLazyParams] = useState({ first: 0, rows: 10, page: 0, sortField: \"productId\", sortOrder: -1 });\r\n    const [totalRecords, setTotalRecords] = useState(0);\r\n    \r\n    const dt = useRef(null);\r\n    const typingTimeoutRef = useRef(null);\r\n\r\n    const emptyMessage = <p style={{textAlign: 'center'}}>{t('common:noDataFound')}</p>;\r\n\r\n    useEffect(() => {\r\n        initData(lazyParams);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [lazyParams]);\r\n\r\n    const getParams = useCallback((lazyParams) => {\r\n        const params = {\r\n            productCategoryId: productCategoryId\r\n        };\r\n        const filters = lazyParams?.filters;\r\n\r\n        if (lazyParams?.page && lazyParams?.page >= 0) params.pageIndex = lazyParams?.page;\r\n        if (lazyParams?.rows) params.pageSize = lazyParams?.rows;\r\n        if (lazyParams?.sortField && lazyParams?.sortOrder) params.orderByField = lazyParams?.sortOrder === 1 ? lazyParams?.sortField : \"-\" + lazyParams?.sortField;\r\n        if (filters && Object.keys(filters).length !== 0) {\r\n            for (const key in filters) {\r\n                if (Object.hasOwnProperty.call(filters, key)) {\r\n                    const filter = filters[key];\r\n                    const matchMode = filter.matchMode;\r\n                    const value = filter.value;\r\n                    if (value == null || value === \"\") continue;\r\n                    switch (matchMode) {\r\n                        case \"timestamprange\":\r\n                            params[key + \"From\"] = value[0].getTime(); //get beginning of the day\r\n                            params[key + \"Thru\"] = value[1].getTime() + 86400000 - 1; //get end of the day\r\n                            break;\r\n                        case \"contains\":\r\n                            params[key + \"Term\"] = value;\r\n                            break;\r\n                        case \"in\":\r\n                            params[key + \"s\"] = value.join();\r\n                            break;\r\n                        case \"equals\":\r\n                        case \"not-equals\":\r\n                        case \"greater\":\r\n                        case \"greater-equals\":\r\n                        case \"less\":\r\n                        case \"less-equals\":\r\n                            params[key + \"Str\"] = value;\r\n                            params[key + \"Op\"] = matchMode;\r\n                            break;\r\n                        case \"is-not-null\":\r\n                        case \"is-null\":\r\n                            params[key + \"Op\"] = matchMode;\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return params;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const initData = useCallback(async (lazyParams) => {\r\n        const productService = new ProductService();\r\n        setLoading(true);\r\n\r\n        try {\r\n            let params = getParams(lazyParams);\r\n            const data = await productService.getAllProducts(params);\r\n\r\n            setProducts(data.products);\r\n            setTotalRecords(data.totalRecords);\r\n        } catch (error) {\r\n            toast.current.show({ severity: 'error', summary: t('errorMessage'), detail: error.response.data.errors, life: 5000 });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [getParams, toast, t]);\r\n\r\n    const bodyTemplate = useCallback((data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                {data[props.field]}\r\n            </>\r\n        );\r\n    }, []);\r\n\r\n    const bodyIdTemplate = useCallback((data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                <a href={`#/sales/product/detail/${data[props.field]}`} style={{color: '#2196f3'}}>\r\n                    {data[props.field]}\r\n                </a>\r\n            </>\r\n        );\r\n    }, []);\r\n\r\n    const productStatusBodyTemplate = useCallback((data, props) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">{props.header}</span>\r\n                <span className={`product-badge status-${data.inventoryStatus}`}>{data.inventoryStatus}</span>\r\n            </>\r\n        );\r\n    }, []);\r\n\r\n    const onFilterTextChange = useCallback((e) => {\r\n        let obj = e.target;\r\n        switch (obj.id) {\r\n            case 'productId':\r\n                setProductIdFilter(obj.value);\r\n                break;\r\n            case 'productName':\r\n                setProductNameFilter(obj.value);\r\n                break;\r\n            case 'categoryName':\r\n                setProductCategoryFilter(obj.value);\r\n                break;\r\n            case 'statusId':\r\n                setStatusIdFilter(obj.value);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (typingTimeoutRef.current) {\r\n            clearTimeout(typingTimeoutRef.current);\r\n        }\r\n        typingTimeoutRef.current = setTimeout(() => {\r\n            dt.current.filter(obj.value, obj.id, 'contains');\r\n        }, 400);\r\n    }, []);\r\n\r\n    const textFilter = useCallback((id, value) => \r\n        <InputText type='text' id={id} value={value || ''} onChange={onFilterTextChange}></InputText>\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    , []);\r\n\r\n    const onPage = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e });\r\n    }, [lazyParams]);\r\n\r\n    const onFilter = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e, first: 0 });\r\n    }, [lazyParams]);\r\n    \r\n    const onSort = useCallback((e) => {\r\n        setLazyParams({ ...lazyParams, ...e});\r\n    }, [lazyParams]);\r\n\r\n    return (\r\n        <DataTable \r\n            value={products} paginator className=\"p-datatable-customers\" dataKey=\"productId\"\r\n            ref={dt} filters={lazyParams.filters} lazy first={lazyParams.first} rows={lazyParams.rows}\r\n            totalRecords={totalRecords} rowsPerPageOptions={[5, 10, 20, 50, 100]} onPage={onPage} onFilter={onFilter} onSort={onSort}\r\n            sortField={lazyParams.sortField} sortOrder={lazyParams.sortOrder} rowHover \r\n            paginatorTemplate=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink\"\r\n            currentPageReportTemplate=\"{first} - {last} of {totalRecords}\" \r\n            emptyMessage={emptyMessage}\r\n            loading={loading} paginatorPosition=\"bottom\"\r\n        >\r\n            <Column field=\"productId\" header={t('product.id')} sortable body={bodyIdTemplate} filter filterElement={textFilter(\"productId\", productIdFilter)}></Column>\r\n            <Column field=\"productName\" header={t('product.name')} sortable filter body={bodyTemplate} filterElement={textFilter(\"productName\", productNameFilter)}></Column>\r\n            <Column field=\"categoryName\" header={t('product.productCategory')} sortable filter body={bodyTemplate} filterElement={textFilter(\"categoryName\", productCategoryFilter)}></Column>\r\n            <Column field=\"statusId\" header={t('product.status')} sortable filter body={productStatusBodyTemplate} filterElement={textFilter(\"statusId\", statusIdFilter)}></Column>\r\n        </DataTable>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}