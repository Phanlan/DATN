{"ast":null,"code":"import _objectSpread from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"D:/\\u0110A/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\\\u0110A\\\\src\\\\pages\\\\Logistics\\\\Employee\\\\EmployeeList\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { useHistory } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from 'primereact/button';\nimport { PartyService } from '../../../../service/PartyService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar EmployeeList = function EmployeeList() {\n  _s();\n\n  var history = useHistory();\n\n  var _useTranslation = useTranslation('common'),\n      t = _useTranslation.t;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      employeeList = _useState4[0],\n      setEmployeeList = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalRecords = _useState6[0],\n      setTotalRecords = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedEmployee = _useState8[0],\n      setSelectedEmployee = _useState8[1];\n\n  var _useState9 = useState({\n    first: 0,\n    rows: 10,\n    page: 0,\n    sortField: null,\n    sortOrder: null,\n    filters: {}\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      lazyParams = _useState10[0],\n      setLazyParams = _useState10[1];\n\n  useEffect(function () {\n    var params = {\n      roleTypeId: 'Shipper',\n      partyTypeEnumId: 'PtyPerson'\n    };\n    var partyService = new PartyService();\n    setLoading(true);\n    partyService.search(_objectSpread(_objectSpread({}, params), transformRequest())).then(function (data) {\n      setEmployeeList(data.documentList);\n      setTotalRecords(data.totalRecords);\n    });\n    setLoading(false);\n  }, [lazyParams]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var transformRequest = function transformRequest() {\n    var params = {\n      pageIndex: lazyParams.page,\n      pageSize: lazyParams.rows\n    }; // sort object\n\n    if (lazyParams.sortOrder) {\n      params['orderByField'] = (lazyParams.sortOrder === -1 ? \"-\" : \"\") + lazyParams.sortField; // simple for single sort\n    } // filters object\n\n\n    if (lazyParams.filters) {\n      for (var _i = 0, _Object$entries = Object.entries(lazyParams.filters); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            key = _Object$entries$_i[0],\n            value = _Object$entries$_i[1];\n\n        params[key] = value.value;\n      }\n    }\n\n    return params;\n  };\n\n  var onSort = function onSort(event) {\n    var _lazyParams = _objectSpread(_objectSpread({}, lazyParams), event);\n\n    setLazyParams(_lazyParams);\n  };\n\n  var onFilter = function onFilter(event) {\n    var _lazyParams = _objectSpread(_objectSpread({}, lazyParams), event);\n\n    _lazyParams['first'] = 0;\n    setLazyParams(_lazyParams);\n  };\n\n  var onPage = function onPage(event) {\n    setLazyParams(event);\n  };\n\n  var rowIndexBodyTemplate = function rowIndexBodyTemplate(rowData, props) {\n    var index = parseInt(props.rowIndex + 1);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: index\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var idBodyTemplate = function idBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#/logistics/shipper/detail/\".concat(rowData.partyId),\n        style: {\n          color: '#2196f3'\n        },\n        children: [' ', rowData.partyId, ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var roleBodyTemplate = function roleBodyTemplate(rowData) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData.roles.map(function (item) {\n          return item.role;\n        }).join(', ')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var telecomBodyTemplate = function telecomBodyTemplate(rowData) {\n    var _rowData$contactMechs;\n\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: rowData === null || rowData === void 0 ? void 0 : (_rowData$contactMechs = rowData.contactMechs) === null || _rowData$contactMechs === void 0 ? void 0 : _rowData$contactMechs.filter(function (item) {\n          return item.contactMechTypeEnumId === 'CmtTelecomNumber';\n        }).map(function (item) {\n          return item.contactNumber;\n        }).join(', ')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-d-flex p-jc-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [' ', /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: t('title.employeeList')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          label: t('homepage.logistics.addNew'),\n          icon: \"pi pi-plus\",\n          className: \"p-mr-2 p-mb-2 \",\n          onClick: function onClick() {\n            return history.push('/logistics/shipper/create');\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(DataTable, {\n      value: employeeList,\n      showGridlines: true,\n      paginator: true,\n      responsiveLayout: \"scroll\",\n      lazy: true,\n      paginatorTemplate: \"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\",\n      currentPageReportTemplate: \"Showing {first} to {last} of {totalRecords}\",\n      rows: lazyParams.rows,\n      rowsPerPageOptions: [10, 25, 50, 100],\n      totalRecords: totalRecords,\n      loading: loading,\n      onPage: onPage,\n      onSort: onSort,\n      sortField: lazyParams.sortField,\n      sortOrder: lazyParams.sortOrder,\n      onFilter: onFilter,\n      filters: lazyParams.filters,\n      selection: selectedEmployee,\n      onSelectionChange: function onSelectionChange(e) {\n        return setSelectedEmployee(e.value);\n      },\n      children: [/*#__PURE__*/_jsxDEV(Column, {\n        header: \"#\",\n        body: rowIndexBodyTemplate,\n        headerStyle: {\n          width: '4rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Column, {\n        field: \"partyId\",\n        filter: true,\n        sortable: true,\n        header: t('shipper.partyId'),\n        body: idBodyTemplate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Column, {\n        field: \"combinedName\",\n        filter: true,\n        sortable: true,\n        header: t('shipper.combinedName')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Column, {\n        header: t('shipper.phoneNumber'),\n        body: telecomBodyTemplate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Column, {\n        header: t('shipper.position'),\n        body: roleBodyTemplate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 11\n  }, _this);\n};\n\n_s(EmployeeList, \"WY5BjjTIDI18WM+xZH2AbToe/TU=\", false, function () {\n  return [useHistory, useTranslation];\n});\n\n_c = EmployeeList;\nexport default EmployeeList;\n\nvar _c;\n\n$RefreshReg$(_c, \"EmployeeList\");","map":{"version":3,"sources":["D:/ÄA/src/pages/Logistics/Employee/EmployeeList/index.js"],"names":["React","useState","useEffect","DataTable","Column","useHistory","useTranslation","Button","PartyService","EmployeeList","history","t","loading","setLoading","employeeList","setEmployeeList","totalRecords","setTotalRecords","selectedEmployee","setSelectedEmployee","first","rows","page","sortField","sortOrder","filters","lazyParams","setLazyParams","params","roleTypeId","partyTypeEnumId","partyService","search","transformRequest","then","data","documentList","pageIndex","pageSize","Object","entries","key","value","onSort","event","_lazyParams","onFilter","onPage","rowIndexBodyTemplate","rowData","props","index","parseInt","rowIndex","idBodyTemplate","partyId","color","roleBodyTemplate","roles","map","item","role","join","telecomBodyTemplate","contactMechs","filter","contactMechTypeEnumId","contactNumber","push","e","width"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {DataTable} from 'primereact/datatable';\r\nimport {Column} from 'primereact/column';\r\n\r\nimport {useHistory} from 'react-router-dom';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Button} from 'primereact/button';\r\nimport {PartyService} from '../../../../service/PartyService';\r\n\r\nconst EmployeeList = () => {\r\n  const history = useHistory();\r\n  const {t} = useTranslation('common');\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [employeeList, setEmployeeList] = useState({});\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [selectedEmployee, setSelectedEmployee] = useState([]);\r\n\r\n  const [lazyParams, setLazyParams] = useState({\r\n    first: 0,\r\n    rows: 10,\r\n    page: 0,\r\n    sortField: null,\r\n    sortOrder: null,\r\n    filters: {},\r\n  });\r\n\r\n  useEffect(() => {\r\n    let params = {\r\n      roleTypeId: 'Shipper',\r\n      partyTypeEnumId: 'PtyPerson',\r\n    };\r\n    \r\n    let partyService = new PartyService();\r\n    setLoading(true);\r\n    partyService.search({...params,...transformRequest(), }).then((data) => {\r\n      setEmployeeList(data.documentList);\r\n      setTotalRecords(data.totalRecords);\r\n      \r\n    });\r\n    setLoading(false);\r\n  },[lazyParams]);// eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const transformRequest = () => {\r\n    let params = {\r\n        pageIndex: lazyParams.page,\r\n        pageSize: lazyParams.rows\r\n    }\r\n    // sort object\r\n    if(lazyParams.sortOrder){\r\n        params['orderByField'] = (lazyParams.sortOrder === -1? \"-\":\"\") + lazyParams.sortField // simple for single sort\r\n    }\r\n    // filters object\r\n    if(lazyParams.filters){\r\n        for (let [key, value] of Object.entries(lazyParams.filters)) {\r\n            params[key] = value.value ; \r\n        }\r\n    }\r\n    return params;\r\n}\r\n\r\n\r\n  const onSort = (event) => {\r\n    let _lazyParams = { ...lazyParams, ...event };\r\n    setLazyParams(_lazyParams);\r\n  }\r\n\r\n  const onFilter = (event) => {\r\n      let _lazyParams = { ...lazyParams, ...event };\r\n      _lazyParams['first'] = 0;\r\n      setLazyParams(_lazyParams);\r\n  }\r\n\r\n  const onPage = (event) => {\r\n      setLazyParams(event);\r\n  }\r\n\r\n  const rowIndexBodyTemplate = (rowData, props) => {\r\n    let index = parseInt(props.rowIndex + 1);\r\n    return (\r\n      <React.Fragment>\r\n        <span>{index}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const idBodyTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <a href={`#/logistics/shipper/detail/${rowData.partyId}`} style={{color: '#2196f3'}}>\r\n          {' '}\r\n          {rowData.partyId}{' '}\r\n        </a>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const roleBodyTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>{rowData.roles.map((item) => item.role).join(', ')}</span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n  const telecomBodyTemplate = (rowData) => {\r\n    return (\r\n      <React.Fragment>\r\n        <span>\r\n          {rowData?.contactMechs\r\n            ?.filter((item) => item.contactMechTypeEnumId === 'CmtTelecomNumber')\r\n            .map((item) => item.contactNumber)\r\n            .join(', ')}\r\n        </span>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n          <div className=\"card\">\r\n            <div className=\"p-d-flex p-jc-between\">\r\n              <div>\r\n                {' '}\r\n                <h5>{t('title.employeeList')}</h5>\r\n              </div>\r\n              <div>\r\n                <Button\r\n                  label={t('homepage.logistics.addNew')}\r\n                  icon=\"pi pi-plus\"\r\n                  className=\"p-mr-2 p-mb-2 \"\r\n                  onClick={() => history.push('/logistics/shipper/create')}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n      <DataTable\r\n        value={employeeList}\r\n        showGridlines\r\n        paginator\r\n        responsiveLayout=\"scroll\"\r\n        lazy\r\n        paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n        currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords}\"\r\n        rows={lazyParams.rows} rowsPerPageOptions={[10, 25, 50, 100]}\r\n        totalRecords={totalRecords}\r\n        loading={loading}\r\n        onPage={onPage}\r\n        onSort={onSort}\r\n        sortField={lazyParams.sortField}\r\n        sortOrder={lazyParams.sortOrder}\r\n        onFilter={onFilter}\r\n        filters={lazyParams.filters}\r\n        selection={selectedEmployee}\r\n        onSelectionChange={(e) => setSelectedEmployee(e.value)}\r\n      >\r\n        <Column header=\"#\" body={rowIndexBodyTemplate} headerStyle={{width: '4rem'}} />\r\n        <Column field=\"partyId\" filter sortable header={t('shipper.partyId')} body={idBodyTemplate}></Column>\r\n        <Column field=\"combinedName\" filter sortable header={t('shipper.combinedName')}></Column>\r\n        <Column header={t('shipper.phoneNumber')} body={telecomBodyTemplate}></Column>\r\n        <Column header={t('shipper.position')} body={roleBodyTemplate}></Column>\r\n      </DataTable>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeList;\r\n"]},"metadata":{},"sourceType":"module"}